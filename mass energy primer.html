<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mass-Energy Equivalence - Interactive Learning</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .main-content {
            display: flex;
            gap: 20px;
            padding: 20px;
        }

        .formula-panel {
            width: 300px;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            height: fit-content;
            position: sticky;
            top: 20px;
        }

        .formula-panel h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .formula-item {
            background: white;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
        }

        .formula-item .equation {
            font-size: 1.1em;
            color: #333;
            margin-bottom: 5px;
            text-align: center;
            font-weight: bold;
        }

        .formula-item .description {
            font-size: 0.9em;
            color: #666;
        }

        .content-area {
            flex: 1;
        }

        .tabs {
            display: flex;
            gap: 5px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .tab-button {
            padding: 12px 20px;
            background: #f0f0f0;
            border: none;
            border-radius: 10px 10px 0 0;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
            color: #555;
        }

        .tab-button:hover {
            background: #e0e0e0;
        }

        .tab-button.active {
            background: #667eea;
            color: white;
        }

        .tab-content {
            display: none;
            background: white;
            padding: 30px;
            border-radius: 10px;
            animation: fadeIn 0.5s;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .concept-box {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .concept-box h3 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .key-point {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid #667eea;
            border-radius: 5px;
        }

        .example-box {
            background: #fff9e6;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #ffd700;
        }

        .example-box h4 {
            color: #d4a017;
            margin-bottom: 10px;
        }

        .question-item {
            background: #f8f9fa;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 10px;
            border: 2px solid #e0e0e0;
        }

        .question-item h4 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .options label {
            display: block;
            padding: 10px;
            margin: 5px 0;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .options label:hover {
            background: #f0f0f0;
        }

        .options input[type="radio"] {
            margin-right: 10px;
        }

        .cloze-select {
            padding: 8px;
            border: 2px solid #667eea;
            border-radius: 5px;
            font-size: 1em;
            min-width: 180px;
            margin: 0 5px;
            background: white;
            cursor: pointer;
        }

        .cloze-select:focus {
            outline: none;
            border-color: #764ba2;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .submit-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            cursor: pointer;
            transition: transform 0.3s;
            margin: 20px 0;
        }

        .submit-btn:hover {
            transform: scale(1.05);
        }

        .feedback {
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            display: none;
        }

        .feedback.correct {
            background: #d4edda;
            border: 2px solid #28a745;
            color: #155724;
        }

        .feedback.incorrect {
            background: #f8d7da;
            border: 2px solid #dc3545;
            color: #721c24;
        }

        .feedback.show {
            display: block;
        }

        .constants-box {
            background: #e8f4f8;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .constants-box h4 {
            color: #2196F3;
            margin-bottom: 10px;
        }

        .constant-item {
            padding: 5px 0;
            font-family: 'Courier New', monospace;
        }

        .email-section {
            background: #f0f8ff;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .email-btn {
            background: #28a745;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            transition: background 0.3s;
        }

        .email-btn:hover {
            background: #218838;
        }

        .results-summary {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            display: none;
        }

        .results-summary.show {
            display: block;
        }

        .score-display {
            font-size: 2em;
            color: #667eea;
            text-align: center;
            margin: 20px 0;
        }

        .solution-explanation {
            background: #e8f5e9;
            padding: 15px;
            border-left: 4px solid #4caf50;
            margin: 10px 0;
            border-radius: 5px;
        }

        .wrong-explanation {
            background: #ffebee;
            padding: 15px;
            border-left: 4px solid #f44336;
            margin: 10px 0;
            border-radius: 5px;
        }

        .student-name-input {
            padding: 8px;
            border: 2px solid #667eea;
            border-radius: 5px;
            font-size: 1em;
            width: 250px;
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚öõÔ∏è Mass-Energy Equivalence</h1>
            <p>Special Relativity & Nuclear Transformations - Interactive Learning Module</p>
        </div>

        <div class="main-content">
            <div class="formula-panel">
                <h3>üìê Key Formulas</h3>
                
                <div class="formula-item">
                    <div class="equation">E‚ÇÄ = mc¬≤</div>
                    <div class="description">Rest Energy</div>
                </div>
                
                <div class="formula-item">
                    <div class="equation">E‚Çú‚Çí‚Çú = Œ≥mc¬≤</div>
                    <div class="description">Total Mass-Energy</div>
                </div>
                
                <div class="formula-item">
                    <div class="equation">KE = (Œ≥ - 1)mc¬≤</div>
                    <div class="description">Relativistic Kinetic Energy</div>
                </div>
                
                <div class="formula-item">
                    <div class="equation">Œ≥ = 1/‚àö(1 - v¬≤/c¬≤)</div>
                    <div class="description">Lorentz Factor</div>
                </div>
                
                <div class="formula-item">
                    <div class="equation">ŒîE = Œîmc¬≤</div>
                    <div class="description">Mass-Energy Conversion</div>
                </div>

                <div class="constants-box">
                    <h4>Constants</h4>
                    <div class="constant-item">c = 3.00 √ó 10‚Å∏ m/s</div>
                    <div class="constant-item">m‚Çë = 9.11 √ó 10‚Åª¬≥¬π kg</div>
                    <div class="constant-item">m‚Çö = 1.67 √ó 10‚Åª¬≤‚Å∑ kg</div>
                    <div class="constant-item">m‚Çô = 1.67 √ó 10‚Åª¬≤‚Å∑ kg</div>
                </div>
            </div>

            <div class="content-area">
                <div class="tabs">
                    <button class="tab-button active" onclick="showTab('overview')">Overview</button>
                    <button class="tab-button" onclick="showTab('rest-energy')">Rest Energy</button>
                    <button class="tab-button" onclick="showTab('total-energy')">Total Energy</button>
                    <button class="tab-button" onclick="showTab('kinetic-energy')">Kinetic Energy</button>
                    <button class="tab-button" onclick="showTab('conservation')">Conservation</button>
                    <button class="tab-button" onclick="showTab('applications')">Applications</button>
                    <button class="tab-button" onclick="showTab('mc-questions')">MC Questions</button>
                    <button class="tab-button" onclick="showTab('cloze-questions')">Cloze Questions</button>
                    <button class="tab-button" onclick="showTab('results')">Results</button>
                </div>

                <div id="overview" class="tab-content active">
                    <h2>Mass-Energy Equivalence Overview</h2>
                    
                    <div class="concept-box">
                        <h3>Core Principle</h3>
                        <div class="key-point">
                            <strong>Einstein's Revolutionary Insight:</strong> Mass and energy are different forms of the same thing. Any mass has an equivalent amount of energy associated with it.
                        </div>
                        <div class="key-point">
                            <strong>Universal Speed Limit:</strong> No object with mass can reach the speed of light (c) because it would require infinite energy.
                        </div>
                    </div>

                    <div class="concept-box">
                        <h3>Why is this Important?</h3>
                        <div class="key-point">
                            ‚Ä¢ Explains how the Sun produces energy through fusion<br>
                            ‚Ä¢ Enables understanding of particle physics and accelerators<br>
                            ‚Ä¢ Forms the basis for nuclear energy<br>
                            ‚Ä¢ Shows that mass can be converted to energy and vice versa
                        </div>
                    </div>
                </div>

                <div id="rest-energy" class="tab-content">
                    <h2>Rest Energy (E‚ÇÄ)</h2>
                    
                    <div class="concept-box">
                        <h3>Definition</h3>
                        <div class="key-point">
                            Rest energy is the energy equivalent of a mass when it is stationary (v = 0). Even when not moving, mass contains enormous amounts of energy.
                        </div>
                    </div>

                    <div class="example-box">
                        <h4>Example: Proton Rest Energy</h4>
                        <p>A proton has mass m = 1.67 √ó 10‚Åª¬≤‚Å∑ kg</p>
                        <p><strong>Calculate rest energy:</strong></p>
                        <p>E‚ÇÄ = mc¬≤ = 1.67 √ó 10‚Åª¬≤‚Å∑ √ó (3.00 √ó 10‚Å∏)¬≤</p>
                        <p>E‚ÇÄ = 1.50 √ó 10‚Åª¬π‚Å∞ J</p>
                    </div>

                    <div class="key-point">
                        <strong>Key Insight:</strong> Even tiny masses contain enormous energy. One kilogram of matter contains 9 √ó 10¬π‚Å∂ J of rest energy - equivalent to about 21 megatons of TNT!
                    </div>
                </div>

                <div id="total-energy" class="tab-content">
                    <h2>Total Mass-Energy</h2>
                    
                    <div class="concept-box">
                        <h3>The Complete Picture</h3>
                        <div class="key-point">
                            Total energy = Rest energy + Kinetic energy<br>
                            <strong>E‚Çú‚Çí‚Çú = Œ≥mc¬≤</strong><br><br>
                            When Œ≥ = 1 (at rest): E‚Çú‚Çí‚Çú = mc¬≤ = E‚ÇÄ<br>
                            As v ‚Üí c, Œ≥ ‚Üí ‚àû, so E‚Çú‚Çí‚Çú ‚Üí ‚àû
                        </div>
                    </div>

                    <div class="example-box">
                        <h4>Example: Moving Proton</h4>
                        <p>Proton at v = 2.72 √ó 10‚Å∏ m/s (Œ≥ = 2.37)</p>
                        <p><strong>Total energy:</strong></p>
                        <p>E‚Çú‚Çí‚Çú = Œ≥mc¬≤ = 2.37 √ó 1.67 √ó 10‚Åª¬≤‚Å∑ √ó (3.00 √ó 10‚Å∏)¬≤</p>
                        <p>E‚Çú‚Çí‚Çú = 3.56 √ó 10‚Åª¬π‚Å∞ J</p>
                    </div>

                    <div class="key-point">
                        <strong>Important:</strong> This explains why particles can never reach light speed - it would require infinite energy!
                    </div>
                </div>

                <div id="kinetic-energy" class="tab-content">
                    <h2>Relativistic Kinetic Energy</h2>
                    
                    <div class="concept-box">
                        <h3>Beyond Classical Physics</h3>
                        <div class="key-point">
                            <strong>Classical (Low speeds):</strong> KE = ¬Ωmv¬≤<br>
                            <strong>Relativistic (All speeds):</strong> KE = (Œ≥ - 1)mc¬≤
                        </div>
                    </div>

                    <div class="key-point">
                        <strong>Key Differences:</strong><br>
                        ‚Ä¢ At low speeds (v << c): Both formulas give similar results<br>
                        ‚Ä¢ At high speeds (v ‚Üí c): Classical formula fails dramatically<br>
                        ‚Ä¢ Relativistic KE ‚Üí ‚àû as v ‚Üí c (explaining universal speed limit)
                    </div>

                    <div class="example-box">
                        <h4>Example: Fast Neutron</h4>
                        <p>Neutron at v = 2.85 √ó 10‚Å∏ m/s (Œ≥ = 3.20)</p>
                        <p><strong>Relativistic KE:</strong></p>
                        <p>KE = (Œ≥ - 1)mc¬≤ = (3.20 - 1) √ó 1.67 √ó 10‚Åª¬≤‚Å∑ √ó (3.00 √ó 10‚Å∏)¬≤</p>
                        <p>KE = 3.31 √ó 10‚Åª¬π‚Å∞ J</p>
                    </div>
                </div>

                <div id="conservation" class="tab-content">
                    <h2>Conservation of Mass-Energy</h2>
                    
                    <div class="concept-box">
                        <h3>The Universal Law</h3>
                        <div class="key-point">
                            <strong>Total mass-energy is always conserved in an isolated system</strong><br><br>
                            Œ£E‚Çú‚Çí‚Çú‚Çê‚Çó(products) + E‚Çõ·µ§‚Çö‚Çö‚Çó·µ¢‚Çë‚Çê = Œ£E‚Çú‚Çí‚Çú‚Çê‚Çó(reactants) + E·µ£‚Çë‚Çó‚Çë‚Çê‚Çõ‚Çë‚Çê
                        </div>
                    </div>

                    <div class="key-point">
                        <strong>Mass-Energy Conversion:</strong><br>
                        ŒîE = Œîmc¬≤<br><br>
                        ‚Ä¢ Mass can be converted to energy (nuclear reactions)<br>
                        ‚Ä¢ Energy can be converted to mass (particle creation)
                    </div>

                    <div class="example-box">
                        <h4>Example: Mass Defect</h4>
                        <p>When mass "disappears" in a reaction, it's converted to energy:</p>
                        <p>If Œîm = -1.0 √ó 10‚Åª¬≥‚Å∞ kg</p>
                        <p>Then ŒîE = -1.0 √ó 10‚Åª¬≥‚Å∞ √ó (3.00 √ó 10‚Å∏)¬≤ = -9.0 √ó 10‚Åª¬π‚Å¥ J</p>
                        <p>This energy is released (usually as kinetic energy or radiation)</p>
                    </div>
                </div>

                <div id="applications" class="tab-content">
                    <h2>Real-World Applications</h2>
                    
                    <div class="concept-box">
                        <h3>1. Fusion in the Sun</h3>
                        <div class="key-point">
                            ‚Ä¢ Small nuclei fuse ‚Üí larger nuclei + energy<br>
                            ‚Ä¢ Mass of products < Mass of reactants<br>
                            ‚Ä¢ "Missing" mass converted to light and heat<br>
                            ‚Ä¢ Sun loses ~4.3 √ó 10‚Åπ kg/s ‚Üí 3.8 √ó 10¬≤‚Å∂ J/s of energy
                        </div>
                    </div>

                    <div class="concept-box">
                        <h3>2. Positron-Electron Annihilation</h3>
                        <div class="key-point">
                            <strong>Low Energy:</strong> e‚Å∫ + e‚Åª ‚Üí pure energy (gamma rays)<br>
                            Total energy = 2m‚Çëc¬≤ = 2 √ó 8.2 √ó 10‚Åª¬π‚Å¥ J<br><br>
                            <strong>High Energy:</strong> Can create new particles from kinetic energy
                        </div>
                    </div>

                    <div class="concept-box">
                        <h3>3. Particle Accelerators</h3>
                        <div class="key-point">
                            ‚Ä¢ Accelerate particles to near light speed<br>
                            ‚Ä¢ High KE allows creation of new, heavier particles<br>
                            ‚Ä¢ Study fundamental particles that only exist briefly<br>
                            ‚Ä¢ Energy ‚Üí Mass conversion in action
                        </div>
                    </div>
                </div>

                <div id="mc-questions" class="tab-content">
                    <h2>Multiple Choice Questions</h2>
                    <div id="mc-container"></div>
                    <button class="submit-btn" onclick="submitMC()">Submit Multiple Choice</button>
                    <div id="mc-feedback" class="feedback"></div>
                </div>

                <div id="cloze-questions" class="tab-content">
                    <h2>Cloze Questions - Select the Correct Answer</h2>
                    <div id="cloze-container"></div>
                    <button class="submit-btn" onclick="submitCloze()">Submit Cloze Questions</button>
                    <div id="cloze-feedback" class="feedback"></div>
                </div>

                <div id="results" class="tab-content">
                    <h2>Your Results</h2>
                    
                    <div class="results-summary" id="results-summary">
                        <h3>Performance Summary</h3>
                        <div class="score-display" id="total-score">
                            Total Score: 0/16
                        </div>
                        
                        <div id="detailed-results"></div>
                    </div>

                    <div class="email-section">
                        <h3>Send Results to Teacher</h3>
                        <p>Click below to prepare an email with your results to send to your teacher.</p>
                        <label>Your Name: <input type="text" id="student-name" class="student-name-input" placeholder="Enter your name"></label><br><br>
                        <button class="email-btn" onclick="prepareEmail()">üìß Prepare Email to Teacher</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // MC Questions data structure with correct answers
        const mcQuestions = [
            {
                question: "Which statement about rest energy is correct?",
                options: [
                    { value: 'a', text: "Rest energy increases as speed increases" },
                    { value: 'b', text: "Rest energy decreases as speed increases" },
                    { value: 'c', text: "Rest energy is the energy of a mass at rest" },
                    { value: 'd', text: "Rest energy equals kinetic energy at high speeds" }
                ],
                correct: 'c',
                explanation: "Rest energy E‚ÇÄ = mc¬≤ is the energy of a mass at rest and doesn't change with speed."
            },
            {
                question: "An electron (m‚Çë = 9.11 √ó 10‚Åª¬≥¬π kg) has a Lorentz factor Œ≥ = 2.0. Its total energy is closest to:",
                options: [
                    { value: 'a', text: "8.2 √ó 10‚Åª¬π‚Å¥ J" },
                    { value: 'b', text: "1.6 √ó 10‚Åª¬π¬≥ J" },
                    { value: 'c', text: "4.1 √ó 10‚Åª¬π‚Å¥ J" },
                    { value: 'd', text: "2.5 √ó 10‚Åª¬π¬≥ J" }
                ],
                correct: 'b',
                explanation: "E_tot = Œ≥mc¬≤ = 2 √ó 9.11√ó10‚Åª¬≥¬π √ó (3√ó10‚Å∏)¬≤ = 1.64√ó10‚Åª¬π¬≥ J"
            },
            {
                question: "The relativistic kinetic energy formula KE = (Œ≥ - 1)mc¬≤ approaches infinity as:",
                options: [
                    { value: 'a', text: "v approaches 0" },
                    { value: 'b', text: "v approaches c/2" },
                    { value: 'c', text: "v approaches c" },
                    { value: 'd', text: "Œ≥ approaches 1" }
                ],
                correct: 'c',
                explanation: "As v‚Üíc, Œ≥‚Üí‚àû, making KE approach infinity (explaining why nothing can reach c)."
            },
            {
                question: "A proton with Œ≥ = 1.5 has kinetic energy closest to:",
                options: [
                    { value: 'a', text: "7.5 √ó 10‚Åª¬π¬π J" },
                    { value: 'b', text: "1.5 √ó 10‚Åª¬π‚Å∞ J" },
                    { value: 'c', text: "2.25 √ó 10‚Åª¬π‚Å∞ J" },
                    { value: 'd', text: "3.0 √ó 10‚Åª¬π‚Å∞ J" }
                ],
                correct: 'a',
                explanation: "KE = (Œ≥-1)mc¬≤ = 0.5 √ó 1.67√ó10‚Åª¬≤‚Å∑ √ó 9√ó10¬π‚Å∂ = 7.5√ó10‚Åª¬π¬π J"
            },
            {
                question: "In positron-electron annihilation at low energies, the total energy released is:",
                options: [
                    { value: 'a', text: "m‚Çëc¬≤" },
                    { value: 'b', text: "2m‚Çëc¬≤" },
                    { value: 'c', text: "¬Ωm‚Çëc¬≤" },
                    { value: 'd', text: "4m‚Çëc¬≤" }
                ],
                correct: 'b',
                explanation: "Both particles annihilate completely: Total = 2m‚Çëc¬≤"
            },
            {
                question: "The Sun loses mass at 4.2 √ó 10‚Åπ kg/s. The power output is closest to:",
                options: [
                    { value: 'a', text: "3.8 √ó 10¬≤‚Å∂ W" },
                    { value: 'b', text: "4.2 √ó 10¬π‚Å∑ W" },
                    { value: 'c', text: "1.3 √ó 10¬π‚Å∏ W" },
                    { value: 'd', text: "9.0 √ó 10¬≤‚Åµ W" }
                ],
                correct: 'a',
                explanation: "Power = Œîmc¬≤ = 4.2√ó10‚Åπ √ó 9√ó10¬π‚Å∂ = 3.78√ó10¬≤‚Å∂ W"
            },
            {
                question: "Why can't an object with mass reach the speed of light?",
                options: [
                    { value: 'a', text: "Its mass would become zero" },
                    { value: 'b', text: "It would require infinite energy" },
                    { value: 'c', text: "Time would stop for the object" },
                    { value: 'd', text: "Its rest energy would become infinite" }
                ],
                correct: 'b',
                explanation: "The Lorentz factor approaches infinity, requiring infinite energy."
            },
            {
                question: "Classical kinetic energy (¬Ωmv¬≤) gives accurate results when:",
                options: [
                    { value: 'a', text: "v is close to c" },
                    { value: 'b', text: "v << c (much less than c)" },
                    { value: 'c', text: "Œ≥ is very large" },
                    { value: 'd', text: "The object has no mass" }
                ],
                correct: 'b',
                explanation: "Classical KE is accurate only at low speeds (v << c)."
            },
            {
                question: "In nuclear fusion, the mass of products is less than reactants. This 'missing' mass:",
                options: [
                    { value: 'a', text: "Violates conservation laws" },
                    { value: 'b', text: "Is converted to energy" },
                    { value: 'c', text: "Becomes dark matter" },
                    { value: 'd', text: "Is stored in the nucleus" }
                ],
                correct: 'b',
                explanation: "Mass-energy is conserved; mass converts to energy via E = mc¬≤."
            },
            {
                question: "A particle has total energy 5 times its rest energy. Its Lorentz factor Œ≥ is:",
                options: [
                    { value: 'a', text: "1" },
                    { value: 'b', text: "4" },
                    { value: 'c', text: "5" },
                    { value: 'd', text: "6" }
                ],
                correct: 'c',
                explanation: "E_tot = Œ≥mc¬≤, so if E_tot = 5E‚ÇÄ, then Œ≥ = 5."
            }
        ];

        // Cloze questions data structure
        const clozeQuestions = [
            {
                question: "The rest energy E‚ÇÄ = ___ where m is mass and c is the speed of light.",
                options: ["mc¬≤", "¬Ωmc¬≤", "Œ≥mc¬≤", "mc", "2mc¬≤"],
                correct: "mc¬≤"
            },
            {
                question: "As an object's velocity approaches the speed of light, the Lorentz factor Œ≥ approaches ___.",
                options: ["infinity", "zero", "one", "c", "negative infinity"],
                correct: "infinity"
            },
            {
                question: "Relativistic kinetic energy KE = (___ - 1)mc¬≤",
                options: ["Œ≥", "v/c", "Œ≤", "v¬≤/c¬≤", "‚àöŒ≥"],
                correct: "Œ≥"
            },
            {
                question: "When mass changes by Œîm, the energy change ŒîE = ___",
                options: ["Œîmc¬≤", "¬ΩŒîmv¬≤", "Œîmc", "Œ≥Œîmc¬≤", "Œîm/c¬≤"],
                correct: "Œîmc¬≤"
            },
            {
                question: "In particle accelerators, the high ___ energy of colliding particles can be converted into the mass of new particles.",
                options: ["kinetic", "potential", "rest", "thermal", "electrical"],
                correct: "kinetic"
            },
            {
                question: "The total energy E‚Çú‚Çí‚Çú = ___ where Œ≥ is the Lorentz factor.",
                options: ["Œ≥mc¬≤", "mc¬≤", "(Œ≥-1)mc¬≤", "¬ΩŒ≥mc¬≤", "Œ≥¬≤mc¬≤"],
                correct: "Œ≥mc¬≤"
            }
        ];

        // Store correct answers
        let correctAnswers = {};
        let clozeAnswers = {};
        let userAnswers = {
            mc: {},
            cloze: {}
        };

        // Function to shuffle array
        function shuffle(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        // Initialize MC questions with randomized options
        function initializeMCQuestions() {
            const container = document.getElementById('mc-container');
            container.innerHTML = '';
            
            mcQuestions.forEach((q, index) => {
                const qNum = index + 1;
                const qName = 'mc' + qNum;
                correctAnswers[qName] = q.correct;
                
                // Shuffle options
                const shuffledOptions = shuffle(q.options);
                
                const questionHTML = `
                    <div class="question-item">
                        <h4>Q${qNum}. ${q.question}</h4>
                        <div class="options">
                            ${shuffledOptions.map(opt => `
                                <label><input type="radio" name="${qName}" value="${opt.value}">${opt.text}</label>
                            `).join('')}
                        </div>
                    </div>
                `;
                
                container.innerHTML += questionHTML;
            });
        }

        // Initialize Cloze questions with randomized dropdown options
        function initializeClozeQuestions() {
            const container = document.getElementById('cloze-container');
            container.innerHTML = '';
            
            clozeQuestions.forEach((q, index) => {
                const qNum = index + 1;
                const qId = 'cloze' + qNum;
                clozeAnswers[qId] = q.correct;
                
                // Shuffle options
                const shuffledOptions = shuffle(q.options);
                
                const questionHTML = `
                    <div class="question-item">
                        <h4>Q${qNum}. Complete the statement:</h4>
                        <p>${q.question.replace('___', `
                            <select class="cloze-select" id="${qId}">
                                <option value="">-- Select answer --</option>
                                ${shuffledOptions.map(opt => `
                                    <option value="${opt}">${opt}</option>
                                `).join('')}
                            </select>
                        `)}</p>
                    </div>
                `;
                
                container.innerHTML += questionHTML;
            });
        }

        // Tab switching
        function showTab(tabName) {
            const tabs = document.querySelectorAll('.tab-content');
            const buttons = document.querySelectorAll('.tab-button');
            
            tabs.forEach(tab => tab.classList.remove('active'));
            buttons.forEach(btn => btn.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            
            // Save state to localStorage
            localStorage.setItem('currentTab', tabName);
        }

        // Save answers to localStorage continuously
        document.addEventListener('change', function(e) {
            if (e.target.type === 'radio') {
                userAnswers.mc[e.target.name] = e.target.value;
                localStorage.setItem('userAnswers', JSON.stringify(userAnswers));
            }
            if (e.target.classList.contains('cloze-select')) {
                userAnswers.cloze[e.target.id] = e.target.value;
                localStorage.setItem('userAnswers', JSON.stringify(userAnswers));
            }
        });

        // Load saved answers on page load
        window.onload = function() {
            // Initialize questions with randomized options
            initializeMCQuestions();
            initializeClozeQuestions();
            
            // Load saved answers
            const saved = localStorage.getItem('userAnswers');
            if (saved) {
                userAnswers = JSON.parse(saved);
                
                // Restore MC answers
                for (let q in userAnswers.mc) {
                    const radio = document.querySelector(`input[name="${q}"][value="${userAnswers.mc[q]}"]`);
                    if (radio) radio.checked = true;
                }
                
                // Restore cloze answers
                for (let q in userAnswers.cloze) {
                    const select = document.getElementById(q);
                    if (select) select.value = userAnswers.cloze[q];
                }
            }
            
            // Set start time
            if (!localStorage.getItem('startTime')) {
                localStorage.setItem('startTime', Date.now());
            }
        };

        function submitMC() {
            let correct = 0;
            let feedback = '<h3>Multiple Choice Results</h3>';
            
            for (let i = 1; i <= 10; i++) {
                const qName = 'mc' + i;
                const userAnswer = userAnswers.mc[qName];
                const correctAnswer = correctAnswers[qName];
                
                if (userAnswer === correctAnswer) {
                    correct++;
                    feedback += `<div class="solution-explanation">Q${i}: ‚úì Correct!</div>`;
                } else {
                    feedback += `<div class="wrong-explanation">Q${i}: ‚úó Your answer: ${userAnswer || 'Not answered'}, Correct: ${correctAnswer}<br>`;
                    feedback += `<em>${mcQuestions[i-1].explanation}</em></div>`;
                }
            }
            
            feedback += `<p><strong>Score: ${correct}/10</strong></p>`;
            
            const feedbackDiv = document.getElementById('mc-feedback');
            feedbackDiv.innerHTML = feedback;
            feedbackDiv.className = correct >= 7 ? 'feedback correct show' : 'feedback incorrect show';
            
            localStorage.setItem('mcScore', correct);
        }

        function submitCloze() {
            let correct = 0;
            let feedback = '<h3>Cloze Results</h3>';
            
            for (let i = 1; i <= 6; i++) {
                const qId = 'cloze' + i;
                const userAnswer = userAnswers.cloze[qId] || '';
                const correctAnswer = clozeAnswers[qId];
                
                if (userAnswer === correctAnswer) {
                    correct++;
                    feedback += `<div class="solution-explanation">Q${i}: ‚úì Correct!</div>`;
                } else {
                    feedback += `<div class="wrong-explanation">Q${i}: ‚úó Your answer: "${userAnswer || 'Not answered'}"<br>Correct answer: ${correctAnswer}</div>`;
                }
            }
            
            feedback += `<p><strong>Score: ${correct}/6</strong></p>`;
            
            const feedbackDiv = document.getElementById('cloze-feedback');
            feedbackDiv.innerHTML = feedback;
            feedbackDiv.className = correct >= 4 ? 'feedback correct show' : 'feedback incorrect show';
            
            localStorage.setItem('clozeScore', correct);
            
            // Update total results
            updateTotalResults();
        }

        function updateTotalResults() {
            const mcScore = parseInt(localStorage.getItem('mcScore') || 0);
            const clozeScore = parseInt(localStorage.getItem('clozeScore') || 0);
            const total = mcScore + clozeScore;
            
            document.getElementById('total-score').innerHTML = `Total Score: ${total}/16`;
            document.getElementById('results-summary').classList.add('show');
            
            let performance = '';
            if (total >= 14) performance = 'Excellent! You have mastered mass-energy equivalence.';
            else if (total >= 11) performance = 'Good work! Review the topics you missed.';
            else if (total >= 8) performance = 'Keep studying. Focus on the key formulas and concepts.';
            else performance = 'More practice needed. Review all sections carefully.';
            
            document.getElementById('detailed-results').innerHTML = `
                <p>Multiple Choice: ${mcScore}/10</p>
                <p>Cloze Questions: ${clozeScore}/6</p>
                <p><strong>${performance}</strong></p>
            `;
        }

        function prepareEmail() {
            const studentName = document.getElementById('student-name').value || 'Student';
            const mcScore = parseInt(localStorage.getItem('mcScore') || 0);
            const clozeScore = parseInt(localStorage.getItem('clozeScore') || 0);
            const total = mcScore + clozeScore;
            
            let detailedAnswers = '\n\nDetailed Answers:\n\nMultiple Choice:\n';
            for (let i = 1; i <= 10; i++) {
                const qName = 'mc' + i;
                const userAnswer = userAnswers.mc[qName] || 'Not answered';
                const correct = userAnswer === correctAnswers[qName] ? '‚úì' : '‚úó';
                detailedAnswers += `Q${i}: ${userAnswer} ${correct}\n`;
            }
            
            detailedAnswers += '\nCloze Questions:\n';
            for (let i = 1; i <= 6; i++) {
                const qId = 'cloze' + i;
                const userAnswer = userAnswers.cloze[qId] || 'Not answered';
                const correct = userAnswer === clozeAnswers[qId] ? '‚úì' : '‚úó';
                detailedAnswers += `Q${i}: ${userAnswer} ${correct}\n`;
            }
            
            const subject = encodeURIComponent(`Mass-Energy Equivalence Results - ${studentName}`);
            const body = encodeURIComponent(
                `Dear Mr. Macarthur,\n\n` +
                `Here are my results from the Mass-Energy Equivalence interactive module:\n\n` +
                `Student Name: ${studentName}\n` +
                `Date Completed: ${new Date().toLocaleDateString()}\n` +
                `Time Completed: ${new Date().toLocaleTimeString()}\n\n` +
                `RESULTS SUMMARY\n` +
                `===============\n` +
                `Multiple Choice Score: ${mcScore}/10\n` +
                `Cloze Questions Score: ${clozeScore}/6\n` +
                `Total Score: ${total}/16 (${Math.round(total/16*100)}%)\n` +
                `${detailedAnswers}\n\n` +
                `Time spent on module: ${Math.round((Date.now() - (parseInt(localStorage.getItem('startTime')) || Date.now()))/60000)} minutes\n\n` +
                `Best regards,\n${studentName}`
            );
            
            window.location.href = `mailto:macarthur.j@kingswoodcollege.vic.edu.au?subject=${subject}&body=${body}`;
        }
    </script>
</body>
</html>