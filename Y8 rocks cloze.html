<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Year 8 Geology: Interactive Cloze Activity</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #8B7355 0%, #5C4033 100%);
            min-height: 100vh;
        }
        
        .container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }
        
        h1 {
            color: #5C4033;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .header-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            padding: 15px;
            background: #f7fafc;
            border-radius: 10px;
        }
        
        .header-info input {
            padding: 8px 12px;
            border: 2px solid #e2e8f0;
            border-radius: 5px;
            font-size: 16px;
        }
        
        .tabs {
            display: flex;
            border-bottom: 3px solid #5C4033;
            margin-bottom: 0;
            background: #e8e8e8;
            padding: 5px 5px 0 5px;
            border-radius: 10px 10px 0 0;
        }
        
        .tab {
            padding: 12px 24px;
            background: #d0d0d0;
            border: 1px solid #999;
            cursor: pointer;
            font-size: 16px;
            margin-right: 3px;
            border-radius: 8px 8px 0 0;
            transition: all 0.3s;
            color: #333;
            font-weight: 500;
            position: relative;
        }
        
        .tab.completed::after {
            content: "✓";
            position: absolute;
            top: 5px;
            right: 5px;
            color: #48bb78;
            font-weight: bold;
        }
        
        .tab:hover {
            background: #c0c0c0;
            transform: translateY(-2px);
            box-shadow: 0 -2px 4px rgba(0,0,0,0.1);
        }
        
        .tab.active {
            background: white;
            color: #5C4033;
            font-weight: bold;
            border-bottom: 3px solid white;
            position: relative;
            top: 3px;
            box-shadow: 0 -3px 8px rgba(0,0,0,0.15);
            border: 1px solid #5C4033;
            border-bottom: 1px solid white;
        }
        
        .tab-content {
            display: none;
            background: white;
            padding: 20px;
            border: 1px solid #5C4033;
            border-top: none;
            border-radius: 0 0 10px 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.1);
            margin-top: -1px;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .content-section {
            margin: 25px 0;
            padding: 25px;
            background: #f8f9ff;
            border-left: 4px solid #5C4033;
            border-radius: 5px;
            line-height: 2;
            font-size: 17px;
            text-align: left;
        }
        
        .content-section h3 {
            color: #5C4033;
            margin-top: 0;
            margin-bottom: 15px;
        }
        
        select {
            padding: 5px 10px;
            margin: 0 3px;
            border: 2px solid #cbd5e0;
            border-radius: 5px;
            font-size: 16px;
            background: #fffacd;
            cursor: pointer;
            transition: all 0.3s;
            min-width: 150px;
        }
        
        select:hover {
            border-color: #5C4033;
        }
        
        select.selected {
            background: #add8e6;
            border-color: #4682b4;
        }
        
        select.correct {
            background: #90ee90;
            border-color: #228b22;
        }
        
        select.incorrect {
            background: #d3d3d3;
            border-color: #696969;
        }
        
        .tooltip {
            position: relative;
            display: inline-block;
        }
        
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 220px;
            background-color: #555;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -110px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 14px;
            pointer-events: none;
        }
        
        .tooltip .tooltiptext.show-delayed {
            visibility: visible;
            opacity: 1;
        }
        
        .button-container {
            text-align: center;
            margin-top: 30px;
        }
        
        button {
            padding: 12px 30px;
            font-size: 18px;
            background: #5C4033;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            margin: 0 10px;
        }
        
        button:hover:not(:disabled) {
            background: #4A3329;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(92, 64, 51, 0.3);
        }
        
        button:disabled {
            background: #a0aec0;
            cursor: not-allowed;
            opacity: 0.6;
        }
        
        .stats {
            margin-top: 30px;
            padding: 20px;
            background: #edf2f7;
            border-radius: 10px;
            text-align: center;
        }
        
        .stats h3 {
            color: #2d3748;
            margin-bottom: 15px;
        }
        
        .stat-item {
            display: inline-block;
            margin: 0 20px;
            padding: 10px 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #5C4033;
        }
        
        .stat-label {
            font-size: 14px;
            color: #718096;
            margin-top: 5px;
        }
        
        .progress-indicator {
            text-align: center;
            margin: 20px 0;
            padding: 10px;
            background: #edf2f7;
            border-radius: 8px;
            font-size: 16px;
            color: #4a5568;
        }
        
        .progress-indicator span {
            font-weight: bold;
            color: #5C4033;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Year 8 Geology: Interactive Cloze Activity</h1>
        
        <div class="header-info">
            <div>
                <label>Name: </label>
                <input type="text" id="studentName" placeholder="Enter your name">
            </div>
            <div>
                <label>First Attempt: </label>
                <input type="text" id="firstAttempt" readonly>
            </div>
        </div>
        
        <div class="progress-indicator">
            Current Tab - Completed: <span id="progressCount">0/16</span> | Submit button will activate when current tab is complete
        </div>
        
        <div class="tabs">
            <button class="tab active" onclick="openTab(event, 'rocks')">Types of Rock</button>
            <button class="tab" onclick="openTab(event, 'structure')">Earth's Structure</button>
            <button class="tab" onclick="openTab(event, 'cycle')">Rock Cycle</button>
            <button class="tab" onclick="openTab(event, 'minerals')">Minerals</button>
        </div>
        
        <!-- Tab 1: Types of Rock -->
        <div id="rocks" class="tab-content active">
            <div class="content-section">
                <h3>Formation of Igneous Rocks</h3>
                Deep below the Earth's surface, temperatures are high enough for rock to
                <span class="tooltip">
                    <select id="r1" data-correct="melt">
                        <option value="">--Select--</option>
                        <option value="melt">melt</option>
                        <option value="freeze">freeze</option>
                        <option value="compress">compress</option>
                        <option value="expand">expand</option>
                    </select>
                    <span class="tooltiptext">Change from solid to liquid</span>
                </span>. 
                While it's below the surface, molten rock is called
                <span class="tooltip">
                    <select id="r2" data-correct="magma">
                        <option value="">--Select--</option>
                        <option value="magma">magma</option>
                        <option value="lava">lava</option>
                        <option value="plasma">plasma</option>
                        <option value="mantle">mantle</option>
                    </select>
                    <span class="tooltiptext">Underground molten rock</span>
                </span>, 
                but when it rises to the surface in a volcanic eruption, it's called
                <span class="tooltip">
                    <select id="r3" data-correct="lava">
                        <option value="">--Select--</option>
                        <option value="lava">lava</option>
                        <option value="magma">magma</option>
                        <option value="ash">ash</option>
                        <option value="tephra">tephra</option>
                    </select>
                    <span class="tooltiptext">Surface molten rock</span>
                </span>. 
                As molten rock cools, it undergoes
                <span class="tooltip">
                    <select id="r4" data-correct="solidification">
                        <option value="">--Select--</option>
                        <option value="solidification">solidification</option>
                        <option value="evaporation">evaporation</option>
                        <option value="sublimation">sublimation</option>
                        <option value="condensation">condensation</option>
                    </select>
                    <span class="tooltiptext">Change from liquid to solid</span>
                </span>, 
                forming igneous rock.
            </div>
            
            <div class="content-section">
                <h3>Crystal Size in Igneous Rocks</h3>
                The size of crystals in an igneous rock indicates how
                <span class="tooltip">
                    <select id="r5" data-correct="quickly">
                        <option value="">--Select--</option>
                        <option value="quickly">quickly</option>
                        <option value="slowly">slowly</option>
                        <option value="deeply">deeply</option>
                        <option value="recently">recently</option>
                    </select>
                    <span class="tooltiptext">Rate of cooling</span>
                </span>
                it cooled. Magma that cools slowly underground produces igneous rock with
                <span class="tooltip">
                    <select id="r6" data-correct="large">
                        <option value="">--Select--</option>
                        <option value="large">large</option>
                        <option value="small">small</option>
                        <option value="no">no</option>
                        <option value="medium">medium</option>
                    </select>
                    <span class="tooltiptext">Big crystal size</span>
                </span>
                crystals, while lava that cools quickly on the surface produces igneous rock with
                <span class="tooltip">
                    <select id="r7" data-correct="small">
                        <option value="">--Select--</option>
                        <option value="small">small</option>
                        <option value="large">large</option>
                        <option value="colorful">colorful</option>
                        <option value="transparent">transparent</option>
                    </select>
                    <span class="tooltiptext">Tiny or no crystals</span>
                </span>
                crystals or no crystals at all.
            </div>
            
            <div class="content-section">
                <h3>Formation of Sedimentary Rocks</h3>
                Rocks at the surface are broken down by
                <span class="tooltip">
                    <select id="r8" data-correct="weathering">
                        <option value="">--Select--</option>
                        <option value="weathering">weathering</option>
                        <option value="melting">melting</option>
                        <option value="freezing">freezing</option>
                        <option value="crystallization">crystallization</option>
                    </select>
                    <span class="tooltiptext">Breakdown in place</span>
                </span>, 
                which breaks down rock while it remains in the same place, and
                <span class="tooltip">
                    <select id="r9" data-correct="erosion">
                        <option value="">--Select--</option>
                        <option value="erosion">erosion</option>
                        <option value="deposition">deposition</option>
                        <option value="weathering">weathering</option>
                        <option value="sedimentation">sedimentation</option>
                    </select>
                    <span class="tooltiptext">Wearing away and removal</span>
                </span>, 
                which wears away and removes rock. These processes break rocks into small pieces called
                <span class="tooltip">
                    <select id="r10" data-correct="sediments">
                        <option value="">--Select--</option>
                        <option value="sediments">sediments</option>
                        <option value="crystals">crystals</option>
                        <option value="minerals">minerals</option>
                        <option value="fragments">fragments</option>
                    </select>
                    <span class="tooltiptext">Small rock particles</span>
                </span>. 
                Over time, these particles undergo
                <span class="tooltip">
                    <select id="r11" data-correct="compaction">
                        <option value="">--Select--</option>
                        <option value="compaction">compaction</option>
                        <option value="expansion">expansion</option>
                        <option value="melting">melting</option>
                        <option value="crystallization">crystallization</option>
                    </select>
                    <span class="tooltiptext">Squeezing by overlying weight</span>
                </span>
                and cementation to form sedimentary rock.
            </div>
            
            <div class="content-section">
                <h3>Formation of Metamorphic Rocks</h3>
                Deep beneath the surface, rocks experience high
                <span class="tooltip">
                    <select id="r12" data-correct="temperatures">
                        <option value="">--Select--</option>
                        <option value="temperatures">temperatures</option>
                        <option value="moisture">moisture</option>
                        <option value="acidity">acidity</option>
                        <option value="magnetism">magnetism</option>
                    </select>
                    <span class="tooltiptext">Heat conditions</span>
                </span>
                and pressures. Any rock changed by these intense conditions is called a
                <span class="tooltip">
                    <select id="r13" data-correct="metamorphic">
                        <option value="">--Select--</option>
                        <option value="metamorphic">metamorphic</option>
                        <option value="sedimentary">sedimentary</option>
                        <option value="igneous">igneous</option>
                        <option value="volcanic">volcanic</option>
                    </select>
                    <span class="tooltiptext">Changed rock type</span>
                </span>
                rock. The original rocks from which these form are called
                <span class="tooltip">
                    <select id="r14" data-correct="parent rocks">
                        <option value="">--Select--</option>
                        <option value="parent rocks">parent rocks</option>
                        <option value="source rocks">source rocks</option>
                        <option value="base rocks">base rocks</option>
                        <option value="primary rocks">primary rocks</option>
                    </select>
                    <span class="tooltiptext">Original rock before change</span>
                </span>. 
                Metamorphic rocks are usually
                <span class="tooltip">
                    <select id="r15" data-correct="stronger">
                        <option value="">--Select--</option>
                        <option value="stronger">stronger</option>
                        <option value="weaker">weaker</option>
                        <option value="softer">softer</option>
                        <option value="lighter">lighter</option>
                    </select>
                    <span class="tooltiptext">More resistant than original</span>
                </span>
                than their original rocks, which is why
                <span class="tooltip">
                    <select id="r16" data-correct="marble">
                        <option value="">--Select--</option>
                        <option value="marble">marble</option>
                        <option value="limestone">limestone</option>
                        <option value="sandstone">sandstone</option>
                        <option value="granite">granite</option>
                    </select>
                    <span class="tooltiptext">Metamorphosed limestone</span>
                </span>
                was preferred over limestone for ancient Greek statues.
            </div>
            
            <div class="button-container">
                <button id="rocksSubmitBtn" onclick="submitTab('rocks')" disabled>Submit Types of Rock</button>
                <button onclick="resetTab('rocks')">Reset This Section</button>
            </div>
        </div>
        
        <!-- Tab 2: Structure of the Earth -->
        <div id="structure" class="tab-content">
            <div class="content-section">
                <h3>Earth's Layers</h3>
                Scientists have identified four main layers of the Earth by studying
                <span class="tooltip">
                    <select id="s1" data-correct="earthquakes">
                        <option value="">--Select--</option>
                        <option value="earthquakes">earthquakes</option>
                        <option value="volcanoes">volcanoes</option>
                        <option value="magnetism">magnetism</option>
                        <option value="gravity">gravity</option>
                    </select>
                    <span class="tooltiptext">Seismic wave source</span>
                </span>. 
                The waves from these events travel through the planet at different
                <span class="tooltip">
                    <select id="s2" data-correct="speeds">
                        <option value="">--Select--</option>
                        <option value="speeds">speeds</option>
                        <option value="angles">angles</option>
                        <option value="frequencies">frequencies</option>
                        <option value="amplitudes">amplitudes</option>
                    </select>
                    <span class="tooltiptext">Velocity changes</span>
                </span>
                as they move from one type of substance to another. The outermost layer is the
                <span class="tooltip">
                    <select id="s3" data-correct="crust">
                        <option value="">--Select--</option>
                        <option value="crust">crust</option>
                        <option value="mantle">mantle</option>
                        <option value="core">core</option>
                        <option value="lithosphere">lithosphere</option>
                    </select>
                    <span class="tooltiptext">Thin outer layer</span>
                </span>, 
                which comes in two types:
                <span class="tooltip">
                    <select id="s4" data-correct="oceanic">
                        <option value="">--Select--</option>
                        <option value="oceanic">oceanic</option>
                        <option value="volcanic">volcanic</option>
                        <option value="basaltic">basaltic</option>
                        <option value="marine">marine</option>
                    </select>
                    <span class="tooltiptext">Under the ocean</span>
                </span>
                and continental.
            </div>
            
            <div class="content-section">
                <h3>The Mantle and Core</h3>
                Below the crust lies the
                <span class="tooltip">
                    <select id="s5" data-correct="mantle">
                        <option value="">--Select--</option>
                        <option value="mantle">mantle</option>
                        <option value="core">core</option>
                        <option value="crust">crust</option>
                        <option value="asthenosphere">asthenosphere</option>
                    </select>
                    <span class="tooltiptext">Largest layer by volume</span>
                </span>, 
                which is almost entirely
                <span class="tooltip">
                    <select id="s6" data-correct="solid">
                        <option value="">--Select--</option>
                        <option value="solid">solid</option>
                        <option value="liquid">liquid</option>
                        <option value="gas">gas</option>
                        <option value="plasma">plasma</option>
                    </select>
                    <span class="tooltiptext">State of matter</span>
                </span>
                rock that can flow over geological timescales. The Earth's core is divided into the
                <span class="tooltip">
                    <select id="s7" data-correct="outer core">
                        <option value="">--Select--</option>
                        <option value="outer core">outer core</option>
                        <option value="upper core">upper core</option>
                        <option value="lower core">lower core</option>
                        <option value="middle core">middle core</option>
                    </select>
                    <span class="tooltiptext">Liquid iron layer</span>
                </span>, 
                which is liquid, and the
                <span class="tooltip">
                    <select id="s8" data-correct="inner core">
                        <option value="">--Select--</option>
                        <option value="inner core">inner core</option>
                        <option value="central core">central core</option>
                        <option value="deep core">deep core</option>
                        <option value="solid core">solid core</option>
                    </select>
                    <span class="tooltiptext">Solid center</span>
                </span>, 
                which is solid despite having the same composition.
            </div>
            
            <div class="content-section">
                <h3>Temperature and Pressure Changes</h3>
                As depth below the Earth's surface increases, temperature
                <span class="tooltip">
                    <select id="s9" data-correct="increases">
                        <option value="">--Select--</option>
                        <option value="increases">increases</option>
                        <option value="decreases">decreases</option>
                        <option value="remains constant">remains constant</option>
                        <option value="fluctuates">fluctuates</option>
                    </select>
                    <span class="tooltiptext">Gets hotter</span>
                </span>
                and pressure also
                <span class="tooltip">
                    <select id="s10" data-correct="increases">
                        <option value="">--Select--</option>
                        <option value="increases">increases</option>
                        <option value="decreases">decreases</option>
                        <option value="remains constant">remains constant</option>
                        <option value="varies">varies</option>
                    </select>
                    <span class="tooltiptext">Gets greater</span>
                </span>. 
                The layer with the highest temperature and pressure is the
                <span class="tooltip">
                    <select id="s11" data-correct="inner core">
                        <option value="">--Select--</option>
                        <option value="inner core">inner core</option>
                        <option value="outer core">outer core</option>
                        <option value="lower mantle">lower mantle</option>
                        <option value="upper mantle">upper mantle</option>
                    </select>
                    <span class="tooltiptext">Deepest layer</span>
                </span>. 
                Pressure is measured in
                <span class="tooltip">
                    <select id="s12" data-correct="gigapascals">
                        <option value="">--Select--</option>
                        <option value="gigapascals">gigapascals</option>
                        <option value="kilopascals">kilopascals</option>
                        <option value="megapascals">megapascals</option>
                        <option value="atmospheres">atmospheres</option>
                    </select>
                    <span class="tooltiptext">GPa units</span>
                </span>
                within the Earth, with one unit equal to one billion pascals.
            </div>
            
            <div class="content-section">
                <h3>Special Conditions and Formation</h3>
                Diamonds form at pressures of about
                <span class="tooltip">
                    <select id="s13" data-correct="10 GPa">
                        <option value="">--Select--</option>
                        <option value="10 GPa">10 GPa</option>
                        <option value="1 GPa">1 GPa</option>
                        <option value="100 GPa">100 GPa</option>
                        <option value="50 GPa">50 GPa</option>
                    </select>
                    <span class="tooltiptext">Diamond formation pressure</span>
                </span>, 
                which occurs in the
                <span class="tooltip">
                    <select id="s14" data-correct="mantle">
                        <option value="">--Select--</option>
                        <option value="mantle">mantle</option>
                        <option value="crust">crust</option>
                        <option value="outer core">outer core</option>
                        <option value="inner core">inner core</option>
                    </select>
                    <span class="tooltiptext">Diamond formation layer</span>
                </span>. 
                The deepest hole drilled by humans, the Kola superdeep borehole, reaches only
                <span class="tooltip">
                    <select id="s15" data-correct="12,262">
                        <option value="">--Select--</option>
                        <option value="12,262">12,262</option>
                        <option value="1,226">1,226</option>
                        <option value="122,620">122,620</option>
                        <option value="50,000">50,000</option>
                    </select>
                    <span class="tooltiptext">Meters deep</span>
                </span>
                meters, limited by extreme
                <span class="tooltip">
                    <select id="s16" data-correct="temperature">
                        <option value="">--Select--</option>
                        <option value="temperature">temperature</option>
                        <option value="radiation">radiation</option>
                        <option value="magnetism">magnetism</option>
                        <option value="gravity">gravity</option>
                    </select>
                    <span class="tooltiptext">Main drilling limitation</span>
                </span>
                and pressure conditions.
            </div>
            
            <div class="button-container">
                <button id="structureSubmitBtn" onclick="submitTab('structure')" disabled>Submit Earth's Structure</button>
                <button onclick="resetTab('structure')">Reset This Section</button>
            </div>
        </div>
        
        <!-- Tab 3: Rock Cycle -->
        <div id="cycle" class="tab-content">
            <div class="content-section">
                <h3>Rock Cycle Processes</h3>
                The rock cycle involves continuous transformation between the three rock types through various
                <span class="tooltip">
                    <select id="c1" data-correct="processes">
                        <option value="">--Select--</option>
                        <option value="processes">processes</option>
                        <option value="reactions">reactions</option>
                        <option value="events">events</option>
                        <option value="changes">changes</option>
                    </select>
                    <span class="tooltiptext">Transformation methods</span>
                </span>. 
                Igneous rocks form when molten rock
                <span class="tooltip">
                    <select id="c2" data-correct="cools and solidifies">
                        <option value="">--Select--</option>
                        <option value="cools and solidifies">cools and solidifies</option>
                        <option value="melts and flows">melts and flows</option>
                        <option value="breaks and erodes">breaks and erodes</option>
                        <option value="compacts and cements">compacts and cements</option>
                    </select>
                    <span class="tooltiptext">Igneous formation</span>
                </span>, 
                sedimentary rocks form when sediments undergo
                <span class="tooltip">
                    <select id="c3" data-correct="compaction and cementation">
                        <option value="">--Select--</option>
                        <option value="compaction and cementation">compaction and cementation</option>
                        <option value="melting and cooling">melting and cooling</option>
                        <option value="heat and pressure">heat and pressure</option>
                        <option value="weathering and erosion">weathering and erosion</option>
                    </select>
                    <span class="tooltiptext">Sedimentary formation</span>
                </span>, 
                and metamorphic rocks form when existing rocks experience
                <span class="tooltip">
                    <select id="c4" data-correct="heat and pressure">
                        <option value="">--Select--</option>
                        <option value="heat and pressure">heat and pressure</option>
                        <option value="weathering and erosion">weathering and erosion</option>
                        <option value="melting and cooling">melting and cooling</option>
                        <option value="compaction and cementation">compaction and cementation</option>
                    </select>
                    <span class="tooltiptext">Metamorphic formation</span>
                </span>.
            </div>
            
            <div class="content-section">
                <h3>Transformations Between Rock Types</h3>
                Any rock type can transform into any other through the rock cycle. When sedimentary rock experiences intense heat and pressure, it becomes
                <span class="tooltip">
                    <select id="c5" data-correct="metamorphic">
                        <option value="">--Select--</option>
                        <option value="metamorphic">metamorphic</option>
                        <option value="igneous">igneous</option>
                        <option value="sedimentary">sedimentary</option>
                        <option value="volcanic">volcanic</option>
                    </select>
                    <span class="tooltiptext">Changed by heat/pressure</span>
                </span>
                rock. When any rock type completely melts and then cools, it becomes
                <span class="tooltip">
                    <select id="c6" data-correct="igneous">
                        <option value="">--Select--</option>
                        <option value="igneous">igneous</option>
                        <option value="metamorphic">metamorphic</option>
                        <option value="sedimentary">sedimentary</option>
                        <option value="crystalline">crystalline</option>
                    </select>
                    <span class="tooltiptext">From molten rock</span>
                </span>
                rock. When rocks are broken down by weathering and erosion, the resulting
                <span class="tooltip">
                    <select id="c7" data-correct="sediments">
                        <option value="">--Select--</option>
                        <option value="sediments">sediments</option>
                        <option value="crystals">crystals</option>
                        <option value="minerals">minerals</option>
                        <option value="fragments">fragments</option>
                    </select>
                    <span class="tooltiptext">Broken rock pieces</span>
                </span>
                can form new sedimentary rock.
            </div>
            
            <div class="content-section">
                <h3>Rock Cycle Timescales</h3>
                Rock cycle processes occur over vastly different timescales. Some processes, like volcanic eruptions producing igneous rock, can happen in
                <span class="tooltip">
                    <select id="c8" data-correct="days">
                        <option value="">--Select--</option>
                        <option value="days">days</option>
                        <option value="millions of years">millions of years</option>
                        <option value="billions of years">billions of years</option>
                        <option value="seconds">seconds</option>
                    </select>
                    <span class="tooltiptext">Quick formation</span>
                </span>
                or weeks, while the formation of sedimentary rock typically takes
                <span class="tooltip">
                    <select id="c9" data-correct="millions of years">
                        <option value="">--Select--</option>
                        <option value="millions of years">millions of years</option>
                        <option value="days">days</option>
                        <option value="hours">hours</option>
                        <option value="decades">decades</option>
                    </select>
                    <span class="tooltiptext">Very slow process</span>
                </span>. 
                Weathering breaks down rocks
                <span class="tooltip">
                    <select id="c10" data-correct="gradually">
                        <option value="">--Select--</option>
                        <option value="gradually">gradually</option>
                        <option value="instantly">instantly</option>
                        <option value="explosively">explosively</option>
                        <option value="periodically">periodically</option>
                    </select>
                    <span class="tooltiptext">Slow breakdown</span>
                </span>, 
                though natural hazards like earthquakes can cause
                <span class="tooltip">
                    <select id="c11" data-correct="rapid">
                        <option value="">--Select--</option>
                        <option value="rapid">rapid</option>
                        <option value="slow">slow</option>
                        <option value="reverse">reverse</option>
                        <option value="minimal">minimal</option>
                    </select>
                    <span class="tooltiptext">Quick erosion</span>
                </span>
                erosion through landslides.
            </div>
            
            <div class="content-section">
                <h3>Rock Cycle and Natural Hazards</h3>
                The rock cycle can create conditions for natural hazards. Volcanic eruptions produce
                <span class="tooltip">
                    <select id="c12" data-correct="lava flows">
                        <option value="">--Select--</option>
                        <option value="lava flows">lava flows</option>
                        <option value="tsunamis">tsunamis</option>
                        <option value="hurricanes">hurricanes</option>
                        <option value="tornadoes">tornadoes</option>
                    </select>
                    <span class="tooltiptext">Molten rock hazard</span>
                </span>
                that can reach temperatures of
                <span class="tooltip">
                    <select id="c13" data-correct="2000°C">
                        <option value="">--Select--</option>
                        <option value="2000°C">2000°C</option>
                        <option value="200°C">200°C</option>
                        <option value="20°C">20°C</option>
                        <option value="20000°C">20000°C</option>
                    </select>
                    <span class="tooltiptext">Lava temperature</span>
                </span>. 
                Steep hills made of weak sedimentary rock are at
                <span class="tooltip">
                    <select id="c14" data-correct="high">
                        <option value="">--Select--</option>
                        <option value="high">high</option>
                        <option value="low">low</option>
                        <option value="no">no</option>
                        <option value="moderate">moderate</option>
                    </select>
                    <span class="tooltiptext">Landslide risk level</span>
                </span>
                risk of landslides during earthquakes, while mountains made of strong
                <span class="tooltip">
                    <select id="c15" data-correct="metamorphic">
                        <option value="">--Select--</option>
                        <option value="metamorphic">metamorphic</option>
                        <option value="sedimentary">sedimentary</option>
                        <option value="volcanic">volcanic</option>
                        <option value="soft">soft</option>
                    </select>
                    <span class="tooltiptext">Strongest rock type</span>
                </span>
                rock like gneiss are more stable. Understanding rock types helps geologists assess
                <span class="tooltip">
                    <select id="c16" data-correct="natural disaster">
                        <option value="">--Select--</option>
                        <option value="natural disaster">natural disaster</option>
                        <option value="weather pattern">weather pattern</option>
                        <option value="climate change">climate change</option>
                        <option value="ocean current">ocean current</option>
                    </select>
                    <span class="tooltiptext">Geological hazard</span>
                </span>
                risks.
            </div>
            
            <div class="button-container">
                <button id="cycleSubmitBtn" onclick="submitTab('cycle')" disabled>Submit Rock Cycle</button>
                <button onclick="resetTab('cycle')">Reset This Section</button>
            </div>
        </div>
        
        <!-- Tab 4: Minerals -->
        <div id="minerals" class="tab-content">
            <div class="content-section">
                <h3>Defining Minerals</h3>
                Minerals are naturally occurring
                <span class="tooltip">
                    <select id="m1" data-correct="inorganic">
                        <option value="">--Select--</option>
                        <option value="inorganic">inorganic</option>
                        <option value="organic">organic</option>
                        <option value="artificial">artificial</option>
                        <option value="synthetic">synthetic</option>
                    </select>
                    <span class="tooltiptext">Not from living things</span>
                </span>
                solids with a definite chemical composition and
                <span class="tooltip">
                    <select id="m2" data-correct="crystalline">
                        <option value="">--Select--</option>
                        <option value="crystalline">crystalline</option>
                        <option value="amorphous">amorphous</option>
                        <option value="random">random</option>
                        <option value="irregular">irregular</option>
                    </select>
                    <span class="tooltiptext">Ordered atomic structure</span>
                </span>
                structure. Scientists classify minerals based on observable properties including
                <span class="tooltip">
                    <select id="m3" data-correct="colour">
                        <option value="">--Select--</option>
                        <option value="colour">colour</option>
                        <option value="weight">weight</option>
                        <option value="age">age</option>
                        <option value="origin">origin</option>
                    </select>
                    <span class="tooltiptext">Visual appearance</span>
                </span>, 
                hardness, lustre, streak, and
                <span class="tooltip">
                    <select id="m4" data-correct="cleavage">
                        <option value="">--Select--</option>
                        <option value="cleavage">cleavage</option>
                        <option value="density">density</option>
                        <option value="magnetism">magnetism</option>
                        <option value="radioactivity">radioactivity</option>
                    </select>
                    <span class="tooltiptext">How it breaks</span>
                </span>.
            </div>
            
            <div class="content-section">
                <h3>Hardness and Lustre</h3>
                The hardness of a mineral is tested using the
                <span class="tooltip">
                    <select id="m5" data-correct="scratch test">
                        <option value="">--Select--</option>
                        <option value="scratch test">scratch test</option>
                        <option value="density test">density test</option>
                        <option value="acid test">acid test</option>
                        <option value="heat test">heat test</option>
                    </select>
                    <span class="tooltiptext">Mohs scale method</span>
                </span>, 
                which determines what materials can scratch the mineral. The softest mineral is
                <span class="tooltip">
                    <select id="m6" data-correct="talc">
                        <option value="">--Select--</option>
                        <option value="talc">talc</option>
                        <option value="gypsum">gypsum</option>
                        <option value="calcite">calcite</option>
                        <option value="graphite">graphite</option>
                    </select>
                    <span class="tooltiptext">Mohs hardness 1</span>
                </span>
                with a hardness of 1, while the hardest is
                <span class="tooltip">
                    <select id="m7" data-correct="diamond">
                        <option value="">--Select--</option>
                        <option value="diamond">diamond</option>
                        <option value="quartz">quartz</option>
                        <option value="corundum">corundum</option>
                        <option value="topaz">topaz</option>
                    </select>
                    <span class="tooltiptext">Mohs hardness 10</span>
                </span>
                with a hardness of 10. Lustre describes how light
                <span class="tooltip">
                    <select id="m8" data-correct="reflects">
                        <option value="">--Select--</option>
                        <option value="reflects">reflects</option>
                        <option value="absorbs">absorbs</option>
                        <option value="refracts">refracts</option>
                        <option value="transmits">transmits</option>
                    </select>
                    <span class="tooltiptext">Bounces off surface</span>
                </span>
                from a mineral's surface.
            </div>
            
            <div class="content-section">
                <h3>Streak and Cleavage</h3>
                The streak of a mineral is the colour of its
                <span class="tooltip">
                    <select id="m9" data-correct="powder">
                        <option value="">--Select--</option>
                        <option value="powder">powder</option>
                        <option value="crystal">crystal</option>
                        <option value="surface">surface</option>
                        <option value="interior">interior</option>
                    </select>
                    <span class="tooltiptext">Crushed form</span>
                </span>
                when rubbed on a streak plate. Interestingly, a mineral's streak colour may be
                <span class="tooltip">
                    <select id="m10" data-correct="different">
                        <option value="">--Select--</option>
                        <option value="different">different</option>
                        <option value="identical">identical</option>
                        <option value="darker">darker</option>
                        <option value="lighter">lighter</option>
                    </select>
                    <span class="tooltiptext">Not the same as appearance</span>
                </span>
                from its apparent colour. Cleavage describes how a mineral
                <span class="tooltip">
                    <select id="m11" data-correct="breaks">
                        <option value="">--Select--</option>
                        <option value="breaks">breaks</option>
                        <option value="forms">forms</option>
                        <option value="grows">grows</option>
                        <option value="dissolves">dissolves</option>
                    </select>
                    <span class="tooltiptext">Splits apart</span>
                </span>
                along flat planes. Some minerals have perfect cleavage in
                <span class="tooltip">
                    <select id="m12" data-correct="one">
                        <option value="">--Select--</option>
                        <option value="one">one</option>
                        <option value="zero">zero</option>
                        <option value="infinite">infinite</option>
                        <option value="random">random</option>
                    </select>
                    <span class="tooltiptext">Single direction</span>
                </span>
                direction, while others may have cleavage in multiple directions.
            </div>
            
            <div class="content-section">
                <h3>Special Mineral Properties</h3>
                Some minerals have unique properties that help identify them. For example, the green sand at Papakōlea Beach in Hawaii contains the mineral
                <span class="tooltip">
                    <select id="m13" data-correct="olivine">
                        <option value="">--Select--</option>
                        <option value="olivine">olivine</option>
                        <option value="emerald">emerald</option>
                        <option value="malachite">malachite</option>
                        <option value="jade">jade</option>
                    </select>
                    <span class="tooltiptext">Green volcanic mineral</span>
                </span>, 
                which forms from volcanic activity. Some minerals exhibit
                <span class="tooltip">
                    <select id="m14" data-correct="fluorescence">
                        <option value="">--Select--</option>
                        <option value="fluorescence">fluorescence</option>
                        <option value="magnetism">magnetism</option>
                        <option value="radioactivity">radioactivity</option>
                        <option value="conductivity">conductivity</option>
                    </select>
                    <span class="tooltiptext">Glows under UV light</span>
                </span>
                under ultraviolet light, while others like magnetite are naturally
                <span class="tooltip">
                    <select id="m15" data-correct="magnetic">
                        <option value="">--Select--</option>
                        <option value="magnetic">magnetic</option>
                        <option value="radioactive">radioactive</option>
                        <option value="fluorescent">fluorescent</option>
                        <option value="phosphorescent">phosphorescent</option>
                    </select>
                    <span class="tooltiptext">Attracts iron</span>
                </span>. 
                These special properties, combined with the five main observable properties, allow geologists to accurately
                <span class="tooltip">
                    <select id="m16" data-correct="classify">
                        <option value="">--Select--</option>
                        <option value="classify">classify</option>
                        <option value="create">create</option>
                        <option value="destroy">destroy</option>
                        <option value="sell">sell</option>
                    </select>
                    <span class="tooltiptext">Identify and categorize</span>
                </span>
                minerals in the field.
            </div>
            
            <div class="button-container">
                <button id="mineralsSubmitBtn" onclick="submitTab('minerals')" disabled>Submit Minerals</button>
                <button onclick="resetTab('minerals')">Reset This Section</button>
            </div>
        </div>
        
        
        <div class="stats" id="stats" style="display: none;">
            <h3>Your Results</h3>
            <div id="tabStats"></div>
            <hr style="margin: 20px 0; border: 1px solid #e0e0e0;">
            <div style="display: flex; justify-content: center; flex-wrap: wrap;">
                <div class="stat-item">
                    <div class="stat-value" id="overallScore">0/64</div>
                    <div class="stat-label">Overall Score</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="overallPercent">0%</div>
                    <div class="stat-label">Overall Percentage</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="attemptValue">1</div>
                    <div class="stat-label">Total Attempts</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="efficiencyValue">0%</div>
                    <div class="stat-label">Efficiency (% per Attempt)</div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        let submitted = {};
        let currentTab = 'rocks';
        let tabScores = {
            rocks: null,
            structure: null,
            cycle: null,
            minerals: null
        };
        let tooltipTimers = {};
        
        // Load saved data on page load
        window.onload = function() {
            loadSavedData();
            randomizeDropdowns();
            addChangeListeners();
            addTooltipListeners();
            checkCompletion();
        };
        
        function randomizeDropdowns() {
            // Get all select elements
            const selects = document.querySelectorAll('select');
            
            selects.forEach(select => {
                // Get all options except the first one (--Select--)
                const options = Array.from(select.options).slice(1);
                
                // Shuffle the options array
                for (let i = options.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [options[i], options[j]] = [options[j], options[i]];
                }
                
                // Remove all options except the first
                while (select.options.length > 1) {
                    select.remove(1);
                }
                
                // Re-add the shuffled options
                options.forEach(option => {
                    select.add(option);
                });
            });
        }
        
        function addTooltipListeners() {
            // Add hover listeners to all tooltips
            const tooltips = document.querySelectorAll('.tooltip');
            
            tooltips.forEach((tooltip, index) => {
                const tooltipText = tooltip.querySelector('.tooltiptext');
                const select = tooltip.querySelector('select');
                
                if (tooltipText && select) {
                    let hoverTimer = null;
                    let tooltipShown = false;
                    
                    // Mouse enter - start timer
                    tooltip.addEventListener('mouseenter', function() {
                        // Only show tooltip if the answer is incorrect (has incorrect class)
                        if (select.classList.contains('incorrect')) {
                            // Clear any existing timer
                            if (hoverTimer) {
                                clearTimeout(hoverTimer);
                            }
                            
                            tooltipShown = false;
                            
                            // Set new timer for 1.5 seconds
                            hoverTimer = setTimeout(() => {
                                tooltipText.classList.add('show-delayed');
                                tooltipShown = true;
                            }, 1500);
                        }
                    });
                    
                    // Mouse leave - clear timer and hide tooltip
                    tooltip.addEventListener('mouseleave', function() {
                        if (hoverTimer) {
                            clearTimeout(hoverTimer);
                            hoverTimer = null;
                        }
                        tooltipText.classList.remove('show-delayed');
                        tooltipShown = false;
                    });
                    
                    // Mouse move - only hide if tooltip is already shown
                    tooltip.addEventListener('mousemove', function() {
                        if (tooltipShown) {
                            tooltipText.classList.remove('show-delayed');
                            tooltipShown = false;
                            // Clear timer to prevent re-showing
                            if (hoverTimer) {
                                clearTimeout(hoverTimer);
                                hoverTimer = null;
                            }
                        }
                    });
                }
            });
        }
        
        function openTab(evt, tabName) {
            // Hide all tab content
            const tabContents = document.getElementsByClassName('tab-content');
            for (let i = 0; i < tabContents.length; i++) {
                tabContents[i].classList.remove('active');
            }
            
            // Remove active class from all tabs
            const tabs = document.getElementsByClassName('tab');
            for (let i = 0; i < tabs.length; i++) {
                tabs[i].classList.remove('active');
            }
            
            // Show selected tab and mark button as active
            document.getElementById(tabName).classList.add('active');
            evt.currentTarget.classList.add('active');
            currentTab = tabName;
            
            // Update progress for current tab
            checkCompletion();
        }
        
        function addChangeListeners() {
            // Add change listeners to all select elements
            const selects = document.querySelectorAll('select');
            selects.forEach(select => {
                select.addEventListener('change', function() {
                    if (this.value !== '') {
                        this.classList.add('selected');
                    } else {
                        this.classList.remove('selected');
                    }
                    checkCompletion();
                });
            });
        }
        
        function checkCompletion() {
            // Get the prefix for current tab
            let prefix = '';
            switch(currentTab) {
                case 'rocks': prefix = 'r'; break;
                case 'structure': prefix = 's'; break;
                case 'cycle': prefix = 'c'; break;
                case 'minerals': prefix = 'm'; break;
            }
            
            let completed = 0;
            let total = 16;
            
            // Count completed fields in current tab
            for (let i = 1; i <= 16; i++) {
                const select = document.getElementById(prefix + i);
                if (select && select.value !== '') {
                    completed++;
                }
            }
            
            // Update progress indicator
            document.getElementById('progressCount').textContent = completed + '/' + total;
            
            // Enable/disable submit button for current tab
            const submitBtn = document.getElementById(currentTab + 'SubmitBtn');
            if (submitBtn) {
                submitBtn.disabled = (completed !== total);
            }
        }
        
        function loadSavedData() {
            const savedName = localStorage.getItem('geoStudentName');
            const firstAttemptDate = localStorage.getItem('geoFirstAttemptDate');
            const attemptCount = parseInt(localStorage.getItem('geoAttemptCount') || 0);
            
            // Load saved scores
            const savedScores = localStorage.getItem('geoTabScores');
            if (savedScores) {
                tabScores = JSON.parse(savedScores);
                updateStatsDisplay();
                
                // Mark completed tabs
                Object.keys(tabScores).forEach(tabName => {
                    if (tabScores[tabName]) {
                        const tabs = document.querySelectorAll('.tab');
                        tabs.forEach(tab => {
                            if (tab.textContent.includes(getTabLabel(tabName))) {
                                tab.classList.add('completed');
                            }
                        });
                        // Also mark as submitted
                        submitted[tabName] = true;
                    }
                });
            }
            
            if (savedName) {
                document.getElementById('studentName').value = savedName;
            }
            
            if (firstAttemptDate) {
                document.getElementById('firstAttempt').value = firstAttemptDate;
            }
            
            if (attemptCount > 0) {
                document.getElementById('attemptValue').textContent = attemptCount;
            }
        }
        
        function submitTab(tabName) {
            // Save student name
            const studentName = document.getElementById('studentName').value;
            if (studentName) {
                localStorage.setItem('geoStudentName', studentName);
            }
            
            // Set first attempt date if not already set
            if (!localStorage.getItem('geoFirstAttemptDate')) {
                const now = new Date();
                const dateStr = now.toLocaleDateString() + ' ' + now.toLocaleTimeString();
                localStorage.setItem('geoFirstAttemptDate', dateStr);
                document.getElementById('firstAttempt').value = dateStr;
            }
            
            // Get the prefix for this tab
            let prefix = '';
            switch(tabName) {
                case 'rocks': prefix = 'r'; break;
                case 'structure': prefix = 's'; break;
                case 'cycle': prefix = 'c'; break;
                case 'minerals': prefix = 'm'; break;
            }
            
            // Check answers for this tab
            let correct = 0;
            let total = 16;
            
            for (let i = 1; i <= 16; i++) {
                const select = document.getElementById(prefix + i);
                if (select) {
                    const correctAnswer = select.getAttribute('data-correct');
                    const selectedAnswer = select.value;
                    
                    // Reset classes
                    select.classList.remove('selected', 'correct', 'incorrect');
                    
                    if (selectedAnswer === correctAnswer) {
                        select.classList.add('correct');
                        correct++;
                    } else if (selectedAnswer !== '') {
                        select.classList.add('incorrect');
                        // Note: Not automatically showing tooltips anymore
                    }
                }
            }
            
            // Save score for this tab
            tabScores[tabName] = {
                score: correct,
                total: total,
                percentage: Math.round((correct/total)*100)
            };
            
            // Save to localStorage
            localStorage.setItem('geoTabScores', JSON.stringify(tabScores));
            
            // Update attempt count only if this is the first submission for any tab
            if (!submitted[tabName]) {
                let attemptCount = parseInt(localStorage.getItem('geoAttemptCount') || 0) + 1;
                localStorage.setItem('geoAttemptCount', attemptCount);
                submitted[tabName] = true;
            }
            
            // Update stats display
            updateStatsDisplay();
            
            // Mark tab as completed
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                if (tab.textContent.includes(getTabLabel(tabName))) {
                    tab.classList.add('completed');
                }
            });
            
            // Disable submit button after submission
            document.getElementById(tabName + 'SubmitBtn').disabled = true;
        }
        
        function getTabLabel(tabName) {
            switch(tabName) {
                case 'rocks': return 'Types of Rock';
                case 'structure': return "Earth's Structure";
                case 'cycle': return 'Rock Cycle';
                case 'minerals': return 'Minerals';
                default: return '';
            }
        }
        
        function updateStatsDisplay() {
            let totalCorrect = 0;
            let hasAnyScore = false;
            let completedTabs = 0;
            
            // Create tab-specific stats
            let tabStatsHTML = '';
            
            Object.keys(tabScores).forEach(tab => {
                if (tabScores[tab]) {
                    hasAnyScore = true;
                    totalCorrect += tabScores[tab].score;
                    completedTabs++;
                    
                    let tabLabel = '';
                    switch(tab) {
                        case 'rocks': tabLabel = 'Types of Rock'; break;
                        case 'structure': tabLabel = "Earth's Structure"; break;
                        case 'cycle': tabLabel = 'Rock Cycle'; break;
                        case 'minerals': tabLabel = 'Minerals'; break;
                    }
                    
                    tabStatsHTML += `
                        <div class="stat-item" style="margin: 10px;">
                            <div class="stat-value">${tabScores[tab].score}/${tabScores[tab].total}</div>
                            <div class="stat-label">${tabLabel} (${tabScores[tab].percentage}%)</div>
                        </div>
                    `;
                }
            });
            
            if (hasAnyScore) {
                document.getElementById('tabStats').innerHTML = tabStatsHTML;
                document.getElementById('overallScore').textContent = totalCorrect + '/64';
                
                // Calculate overall percentage and efficiency
                const overallPercentage = Math.round((totalCorrect / 64) * 100);
                const attemptCount = parseInt(localStorage.getItem('geoAttemptCount') || 1);
                const percentPerAttempt = Math.round(overallPercentage / attemptCount);
                
                // Update all stat values
                document.getElementById('overallPercent').textContent = overallPercentage + '%';
                document.getElementById('attemptValue').textContent = attemptCount;
                document.getElementById('efficiencyValue').textContent = percentPerAttempt + '%';
                
                document.getElementById('stats').style.display = 'block';
            }
        }
        
        function resetTab(tabName) {
            // Get the prefix for this tab
            let prefix = '';
            switch(tabName) {
                case 'rocks': prefix = 'r'; break;
                case 'structure': prefix = 's'; break;
                case 'cycle': prefix = 'c'; break;
                case 'minerals': prefix = 'm'; break;
            }
            
            // Reset all selections in this tab
            for (let i = 1; i <= 16; i++) {
                const select = document.getElementById(prefix + i);
                if (select) {
                    select.value = '';
                    select.classList.remove('selected', 'correct', 'incorrect');
                    
                    // Hide tooltip
                    const tooltip = select.parentElement.querySelector('.tooltiptext');
                    if (tooltip) {
                        tooltip.classList.remove('show-delayed');
                    }
                }
            }
            
            // Clear any active tooltip timers
            Object.keys(tooltipTimers).forEach(key => {
                if (tooltipTimers[key]) {
                    clearTimeout(tooltipTimers[key]);
                    tooltipTimers[key] = null;
                }
            });
            
            // Reset submission status for this tab
            submitted[tabName] = false;
            
            // Remove completed checkmark
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                if (tab.textContent.includes(getTabLabel(tabName))) {
                    tab.classList.remove('completed');
                }
            });
            
            // Reset score for this tab
            tabScores[tabName] = null;
            localStorage.setItem('geoTabScores', JSON.stringify(tabScores));
            
            // Update displays
            checkCompletion();
            updateStatsDisplay();
        }
    </script>
</body>
</html>