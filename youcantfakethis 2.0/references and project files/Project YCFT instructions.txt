# YouCantFakeThis: Multi-Curriculum Educational Review Platform

## Complete Project Specification v3.0

---

## 1. PROJECT OVERVIEW

### 1.1 Purpose
Create a web-based educational review platform that enables students to master curriculum content through **spaced repetition** using dropdown-based cloze exercises. The system presents the same concepts across **3 rounds** with different phrasing to reinforce deep understanding, not rote memorization.

### 1.2 Core Philosophy
- **"You Can't Fake This"**: Students must demonstrate genuine understanding across multiple rounds
- **Curriculum-First**: Content is driven by official study design dot points, not textbook structure
- **Conceptual Tracking**: Errors are tracked by underlying concept, not individual questions
- **Mastery-Based Progression**: Students must achieve 100% on all tabs before advancing rounds

### 1.3 Key Innovation
The platform tracks *what students misunderstand* (concepts), not just *which questions they missed*. This enables targeted feedback and identifies persistent misconceptions across different question phrasings.

---

## 2. TECHNICAL REQUIREMENTS

### 2.1 Technology Stack
- **Frontend**: Vanilla HTML5, CSS3, JavaScript (ES6+) only - NO frameworks
- **Data Storage**: JSON files served from server
- **State Persistence**: localStorage with namespaced keys
- **Compatibility**: Chrome 90+, Firefox 88+, Safari 14+, Edge 90+

### 2.2 Core Constraints
- Single HTML file with embedded CSS and JavaScript
- Online-only (requires server for JSON files)
- Full Unicode support with special character handling
- No external dependencies except CDN fonts (optional)
- No modal dialogs except for destructive reset actions

---

## 3. FILE STRUCTURE

```
project-root/
â”‚
â”œâ”€â”€ youcantfakethis.html              # Main application (single file)
â”œâ”€â”€ states.json                        # Registry of all curricula/states
â”‚
â”œâ”€â”€ VCEAU/                             # Victoria, Australia (VCE)
â”‚   â”œâ”€â”€ study-manifest.json            # Lists all subjects for this curriculum
â”‚   â”‚
â”‚   â”œâ”€â”€ physics/
â”‚   â”‚   â”œâ”€â”€ topic-manifest.json        # Lists all topics for Physics
â”‚   â”‚   â”œâ”€â”€ U3AOS1-01-WaveProperties.json
â”‚   â”‚   â”œâ”€â”€ U4AOS1-11-ComparingLightMatter.json
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ chemistry/
â”‚   â”‚   â”œâ”€â”€ topic-manifest.json
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â””â”€â”€ biology/
â”‚       â”œâ”€â”€ topic-manifest.json
â”‚       â””â”€â”€ ...
â”‚
â”œâ”€â”€ HSCNSW/                            # New South Wales (HSC)
â”‚   â”œâ”€â”€ study-manifest.json
â”‚   â””â”€â”€ ...
â”‚
â””â”€â”€ IBDP/                              # International Baccalaureate
    â”œâ”€â”€ study-manifest.json
    â””â”€â”€ ...
```

### 3.1 File Naming Conventions
- **Topic files**: `U[unit]AOS[aos]-[number]-[TopicName].json`
- **Examples**:
  - `U4AOS1-11-ComparingLightMatter.json`
  - `U3AOS2-05-OrganicCompounds.json`
  - `U3AOS1-01-WaveProperties.json`

---

## 4. DATA STRUCTURES

### 4.1 states.json (Root Registry)
```json
{
  "version": "1.0.0",
  "lastUpdated": "2025-01-15T10:00:00Z",
  "states": [
    {
      "id": "VCEAU",
      "name": "VCE",
      "region": "Victoria, Australia",
      "description": "Victorian Certificate of Education",
      "path": "VCEAU/study-manifest.json",
      "icon": "ğŸ‡¦ğŸ‡º",
      "color": "#003366"
    },
    {
      "id": "HSCNSW",
      "name": "HSC",
      "region": "New South Wales, Australia",
      "description": "Higher School Certificate",
      "path": "HSCNSW/study-manifest.json",
      "icon": "ğŸ‡¦ğŸ‡º",
      "color": "#1E90FF"
    },
    {
      "id": "IBDP",
      "name": "IB Diploma",
      "region": "International",
      "description": "International Baccalaureate Diploma Programme",
      "path": "IBDP/study-manifest.json",
      "icon": "ğŸŒ",
      "color": "#006400"
    }
  ]
}
```

### 4.2 study-manifest.json (Per Curriculum)
```json
{
  "curriculum": "VCEAU",
  "version": "1.0.0",
  "lastUpdated": "2025-01-15T10:00:00Z",
  "subjects": [
    {
      "id": "physics",
      "name": "Physics",
      "path": "physics/topic-manifest.json",
      "icon": "âš›ï¸",
      "color": "#667eea",
      "gradient": "linear-gradient(135deg, #667eea 0%, #764ba2 100%)"
    },
    {
      "id": "chemistry",
      "name": "Chemistry",
      "path": "chemistry/topic-manifest.json",
      "icon": "âš—ï¸",
      "color": "#ef4444",
      "gradient": "linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"
    },
    {
      "id": "biology",
      "name": "Biology",
      "path": "biology/topic-manifest.json",
      "icon": "ğŸ§¬",
      "color": "#10b981",
      "gradient": "linear-gradient(135deg, #34d399 0%, #059669 100%)"
    }
  ]
}
```

### 4.3 topic-manifest.json (Per Subject)
```json
{
  "subject": "physics",
  "curriculum": "VCEAU",
  "version": "1.0.0",
  "lastUpdated": "2025-01-15T10:00:00Z",
  "units": [
    {
      "id": "U3",
      "code": "Unit 3",
      "name": "How do fields explain motion and electricity?",
      "areasOfStudy": [
        {
          "id": "AOS1",
          "code": "Area of Study 1",
          "name": "How do things move without contact?",
          "topics": [
            {
              "id": "01",
              "code": "01",
              "filename": "U3AOS1-01-WaveProperties.json",
              "name": "Wave Properties",
              "status": "available",
              "difficulty": "medium",
              "estimatedMinutes": 45,
              "totalQuestions": 54,
              "tabs": 3,
              "rounds": 3
            }
          ]
        }
      ]
    },
    {
      "id": "U4",
      "code": "Unit 4",
      "name": "How can two contradictory models explain both light and matter?",
      "areasOfStudy": [
        {
          "id": "AOS1",
          "code": "Area of Study 1",
          "name": "How can waves explain the behaviour of light?",
          "topics": [
            {
              "id": "11",
              "code": "11",
              "filename": "U4AOS1-11-ComparingLightMatter.json",
              "name": "Comparing Light and Matter",
              "status": "available",
              "difficulty": "medium",
              "estimatedMinutes": 60,
              "totalQuestions": 72,
              "tabs": 4,
              "rounds": 3
            }
          ]
        }
      ]
    }
  ]
}
```

### 4.4 Topic Content JSON (Individual Topic)
```json
{
  "metadata": {
    "id": "U4AOS1-11",
    "curriculum": "VCEAU",
    "subject": "physics",
    "unit": "U4",
    "aos": "AOS1",
    "topicCode": "11",
    "topicName": "Comparing Light and Matter",
    "version": "1.0.0",
    "lastUpdated": "2025-01-15",
    "colorTheme": {
      "primary": "#667eea",
      "secondary": "#764ba2",
      "gradient": "linear-gradient(135deg, #667eea 0%, #764ba2 100%)"
    }
  },
  
  "dotPoints": [
    "interpret electron diffraction patterns as evidence for the wave-like nature of matter",
    "distinguish between the diffraction patterns produced by photons and electrons",
    "calculate the de Broglie wavelength of matter: Î» = h/p",
    "compare the momentum of photons and of matter of the same wavelength including calculations using: p = h/Î»",
    "interpret the single photon and the electron double slit experiment as evidence for the dual nature of light and matter",
    "investigate and explain theoretically and practically diffraction as the directional spread of various frequencies with reference to different gap width or obstacle size, including the qualitative effect of changing the ratio, and apply this to limitations of imaging using electromagnetic waves"
  ],
  
  "tabs": [
    {
      "id": "debroglie",
      "label": "de Broglie Wavelength",
      "icon": "Î»",
      "order": 1
    },
    {
      "id": "momentum",
      "label": "Photon Momentum",
      "icon": "p",
      "order": 2
    },
    {
      "id": "diffraction",
      "label": "Diffraction Patterns",
      "icon": "â—Š",
      "order": 3
    },
    {
      "id": "doubleslit",
      "label": "Double Slit Experiment",
      "icon": "||",
      "order": 4
    }
  ],
  
  "content": {
    "round1": {
      "debroglie": {
        "title": "Understanding de Broglie Wavelength",
        "instructions": "Complete the dropdowns to demonstrate your understanding of matter waves.",
        "sentences": [
          {
            "text": "In 1924, Louis de Broglie hypothesized that {{d1}} and all matter possess an associated wavelength called the {{d2}}.",
            "questions": {
              "d1": {
                "correct": "electrons",
                "distractors": ["photons", "alpha particles", "atoms"],
                "concept": "matter_wave_hypothesis",
                "tooltip": "Think about which particles were first shown to diffract"
              },
              "d2": {
                "correct": "de Broglie wavelength",
                "distractors": ["Compton wavelength", "quantum wavelength", "matter frequency"],
                "concept": "wavelength_terminology",
                "tooltip": "Named after the physicist who proposed it"
              }
            }
          },
          {
            "text": "The de Broglie wavelength can be calculated using Î» = {{d3}}, where the wavelength is {{d4}} to the object's momentum.",
            "questions": {
              "d3": {
                "correct": "h/p",
                "distractors": ["hp", "p/h", "h/mvÂ²"],
                "concept": "debroglie_formula",
                "tooltip": "Planck's constant divided by what?"
              },
              "d4": {
                "correct": "inversely proportional",
                "distractors": ["directly proportional", "exponentially related", "equal"],
                "concept": "momentum_wavelength_relationship",
                "tooltip": "As momentum increases, wavelength...?"
              }
            }
          }
        ]
      }
    },
    "round2": {
      "debroglie": {
        "title": "Applying de Broglie's Hypothesis",
        "instructions": "Apply your understanding of matter waves to these scenarios.",
        "sentences": [
          {
            "text": "The revolutionary idea that {{d1}} could behave like waves earned de Broglie the Nobel Prize after electron diffraction was demonstrated in {{d2}}.",
            "questions": {
              "d1": {
                "correct": "particles with mass",
                "distractors": ["only electrons", "charged particles", "subatomic particles"],
                "concept": "matter_wave_hypothesis",
                "tooltip": "Consider the universality of de Broglie's hypothesis"
              },
              "d2": {
                "correct": "1927",
                "distractors": ["1924", "1929", "1925"],
                "concept": "historical_timeline",
                "tooltip": "Three years after the hypothesis was proposed"
              }
            }
          }
        ]
      }
    },
    "round3": {
      "debroglie": {
        "title": "de Broglie Wavelength in Practice",
        "instructions": "Demonstrate mastery of matter wave concepts.",
        "sentences": [
          {
            "text": "Modern electron microscopes work because {{d1}} have a measurable wavelength, typically around {{d2}} for high-energy electrons.",
            "questions": {
              "d1": {
                "correct": "electrons",
                "distractors": ["photons", "atoms", "molecules"],
                "concept": "matter_wave_hypothesis",
                "tooltip": "Which particles are used in electron microscopes?"
              },
              "d2": {
                "correct": "10â»Â¹Â² m",
                "distractors": ["10â»â¶ m", "10â»â¹ m", "10â»Â³ m"],
                "concept": "electron_wavelength_scale",
                "tooltip": "Much smaller than visible light wavelength"
              }
            }
          }
        ]
      }
    }
  },
  
  "explanations": {
    "matter_wave_hypothesis": {
      "title": "Matter Wave Hypothesis",
      "content": "De Broglie proposed that ALL matter exhibits wave-like properties, not just light. This was revolutionary because it extended wave-particle duality from photons to all particles with mass.",
      "keyPoints": [
        "Applies to all matter, not just electrons",
        "Wavelength depends on momentum",
        "Confirmed by electron diffraction in 1927"
      ]
    },
    "debroglie_formula": {
      "title": "The de Broglie Formula",
      "content": "Î» = h/p shows that wavelength is inversely proportional to momentum. Higher momentum means shorter wavelength.",
      "formula": "Î» = h/p = h/(mv)",
      "keyPoints": [
        "h = 6.63 Ã— 10â»Â³â´ JÂ·s (Planck's constant)",
        "p = mv for matter",
        "Inverse relationship: more momentum = shorter wavelength"
      ]
    }
  }
}
```

---

## 5. USER INTERFACE SPECIFICATION

### 5.1 Selection Cascade (5-Tier)
```
State/Curriculum â†’ Subject â†’ Unit â†’ Area of Study â†’ Topic
```

**Behavior**:
- Each dropdown enables the next when a valid selection is made
- "Load Topic" button activates only when all selections are complete
- Last selections are remembered in localStorage
- Invalid/unavailable topics show "Coming Soon" status

### 5.2 Main Application Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HEADER: Topic Title | Round X of 3 | Progress % | Total Score â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  TAB NAVIGATION: [Tab 1] [Tab 2] [Tab 3] [Tab 4]               â”‚
â”‚                   R1 R2    R1      â—                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  CONTENT AREA:                                                  â”‚
â”‚                                                                 â”‚
â”‚  Tab Title                                                      â”‚
â”‚  Instructions text here...                                      â”‚
â”‚                                                                 â”‚
â”‚  Sentence with [dropdown â–¼] embedded in the [dropdown â–¼]       â”‚
â”‚  text that students must complete.                              â”‚
â”‚                                                                 â”‚
â”‚  Another sentence with [dropdown â–¼] that tests a [dropdown â–¼]  â”‚
â”‚  different aspect of the same concept.                          â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  CONTROL PANEL:                                                 â”‚
â”‚  [Reset Section]  Score: 4/6 | Attempt 2  [SUBMIT / RESUBMIT]  â”‚
â”‚                                                                 â”‚
â”‚  Feedback: "2 incorrect - hover for hints"                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 Tab Indicators
- **Incomplete**: No indicator
- **Round 1 complete**: `R1` badge
- **Round 2 complete**: `R1 R2` badges
- **Round 3 complete**: `R1 R2 R3` badges (or checkmark)
- **Current tab**: Highlighted/active state
- **Perfect score on current round**: Green dot indicator

### 5.4 Dropdown Visual States

| State | Background Color | Border | Behavior |
|-------|-----------------|--------|----------|
| Unfilled | Light Yellow `#fffacd` | Gray | Clickable |
| Filled (not submitted) | Light Blue `#add8e6` | Gray | Clickable |
| Correct (after submit) | Light Green `#90ee90` | Green | Clickable (can change) |
| Incorrect (after submit) | Pale Red `#ffcccb` | Red | Clickable (can change) |

**Important**: Dropdowns remain editable after submission to allow retry attempts.

### 5.5 Tooltip System
- **Trigger**: Hover over incorrect dropdown for 1.2 seconds
- **Content**: Helpful hint from question's `tooltip` field
- **Position**: Above the dropdown with arrow pointer
- **Dismiss**: Immediately on mouse movement
- **Styling**: Dark background, light text, subtle shadow

---

## 6. APPLICATION LOGIC

### 6.1 Round Progression System

```
Round 1 â†’ Complete ALL tabs with 100% â†’ Review â†’ Round 2
Round 2 â†’ Complete ALL tabs with 100% â†’ Review â†’ Round 3
Round 3 â†’ Complete ALL tabs with 100% â†’ Final Review â†’ Topic Complete
```

**Rules**:
- Each round presents the SAME concepts with DIFFERENT phrasing
- Must achieve 100% on ALL tabs before advancing
- Progress is saved per round (can resume)
- Review screen shows performance before advancing

### 6.2 Scoring System

#### Per-Tab Scoring
- **Base Score**: Correct answers / Total questions
- **Attempt Penalty**: 
  - 1st attempt: 100% of score
  - 2nd attempt: 90% of score
  - 3rd attempt: 80% of score
  - 4th+ attempt: 70% of score (minimum)
- **Best Score**: Highest score achieved is recorded

#### Total Topic Score
```
Total = Sum of (Tab Score Ã— Attempt Multiplier) across all rounds and tabs
Maximum = Total Questions Ã— 3 rounds
```

#### Display Format
- Tab: "Score: 5/6 | Attempt 2"
- Header: "Total Score: 45/72 (62%)"

### 6.3 Submission Flow

```
1. Student fills dropdowns
2. Student clicks SUBMIT
3. System grades all dropdowns:
   - Correct â†’ Green background
   - Incorrect â†’ Red background, tooltip enabled
4. Feedback displayed: "4/6 correct - hover incorrect for hints"
5. Student can:
   a) Change answers and RESUBMIT (attempt counter increments)
   b) Move to next tab (if satisfied)
6. Tab marked complete only on 100% correct
7. All tabs complete â†’ Review screen â†’ Next round
```

### 6.4 Conceptual Error Tracking

Each question maps to a `concept` identifier. Errors are aggregated by concept:

```javascript
errorTracking: {
  "debroglie_formula": {
    count: 3,
    rounds: [1, 2],
    wrongAnswers: ["hp", "p/h", "hp"]
  },
  "matter_wave_hypothesis": {
    count: 1,
    rounds: [1],
    wrongAnswers: ["only electrons"]
  }
}
```

**Review Screen** shows:
- Top 5 most-missed concepts
- Educational explanation for each
- Which rounds the errors occurred in
- Pattern analysis (same mistake repeated?)

### 6.5 Reset Hierarchy

| Reset Type | Scope | Confirmation Required |
|------------|-------|----------------------|
| Reset Section | Current tab, current round only | Yes (modal) |
| Reset Round | All tabs in current round | Yes (modal) |
| Reset Topic | Everything - start fresh | Yes (modal) |

---

## 7. CONTENT CREATION GUIDELINES

### 7.1 Curriculum-First Approach

**Priority Order**:
1. **Study Design Dot Points** (PRIMARY) - These define what must be tested
2. **Textbook Content** (SECONDARY) - Provides context and detail
3. **Common Misconceptions** - Inform distractor design

**Process**:
1. List all dot points for the topic
2. Group dot points into logical tabs (3-5 tabs)
3. Create 2-3 sentences per tab that test the dot point requirements
4. Write 3 variations (rounds) of each sentence with different phrasing
5. Design distractors based on real student mistakes

### 7.2 Sentence Design Rules

- **Minimum 2 sentences per tab**
- **Minimum 3 dropdowns per sentence** (aim for 3-4)
- **6-8 dropdowns per tab** recommended
- **Avoid answer giveaways**: Don't use words in the sentence that reveal the answer
- **Test understanding, not recall**: Require application, not just memorization

**Bad Example** (answer given away):
> "The wave-particle duality of matter means particles demonstrate both particle and {{wave}} properties."

**Good Example**:
> "De Broglie's hypothesis extended the dual nature concept from photons to {{all matter with mass}}."

### 7.3 Distractor Requirements

#### CRITICAL: Exactly 4 Options Per Question
- 1 correct answer
- 3 incorrect distractors
- Total: 4 options always

#### Distractor Quality Rules

**Distractors MUST be**:
- Plausible within the subject context
- Representative of actual student mistakes
- Similar in format/length to the correct answer
- From the same domain (not random unrelated terms)

**Distractors MUST NOT be**:
- Obviously wrong to anyone
- From completely different fields
- Joke answers
- Significantly different in length/format

#### Distractor Design by Question Type

**For Numerical Answers**:
```json
{
  "correct": "6.63 Ã— 10â»Â³â´ JÂ·s",
  "distractors": [
    "6.63 Ã— 10â»Â²â· JÂ·s",    // Wrong exponent (order of magnitude)
    "6.63 Ã— 10â»Â³â´ eVÂ·s",   // Wrong units
    "1.06 Ã— 10â»Â³â´ JÂ·s"     // Confusion with â„ (h-bar)
  ]
}
```

**For Formulas**:
```json
{
  "correct": "Î» = h/p",
  "distractors": [
    "Î» = p/h",      // Inverted
    "Î» = hp",       // Multiplication instead
    "Î» = h/mvÂ²"    // Confused with energy formula
  ]
}
```

**For Concepts**:
```json
{
  "correct": "all matter with mass",
  "distractors": [
    "only electrons",           // Too restrictive
    "only charged particles",   // Common misconception
    "only subatomic particles"  // Another restriction error
  ]
}
```

**For Relationships**:
```json
{
  "correct": "inversely proportional",
  "distractors": [
    "directly proportional",    // Opposite relationship
    "exponentially related",    // Wrong math relationship
    "independent of"            // No relationship
  ]
}
```

### 7.4 Round Variation Guidelines

**Round 1**: Direct, clear phrasing
> "The de Broglie wavelength equals {{h/p}}, showing wavelength is {{inversely proportional}} to momentum."

**Round 2**: Applied context
> "To calculate matter wavelength, use the formula {{Î» = h/p}}, where increasing momentum causes wavelength to {{decrease}}."

**Round 3**: Synthesis/comparison
> "Both photons and electrons with the same {{momentum}} will have the same {{wavelength}}, as shown by the relationship p = h/Î»."

**Key Principle**: Same concept, different words, increasing integration with other concepts.

---

## 8. STATE MANAGEMENT

### 8.1 localStorage Schema

```javascript
// Namespace pattern: [curriculum]_[subject]_[topicId]_[dataType]

// Global preferences
localStorage.setItem('ycft_lastState', 'VCEAU');
localStorage.setItem('ycft_lastSubject', 'physics');
localStorage.setItem('ycft_lastTopic', 'U4AOS1-11');

// Per-topic progress
localStorage.setItem('VCEAU_physics_U4AOS1-11_currentRound', '2');

localStorage.setItem('VCEAU_physics_U4AOS1-11_tabProgress', JSON.stringify({
  round1: {
    debroglie: { complete: true, bestScore: 6, attempts: 1 },
    momentum: { complete: true, bestScore: 6, attempts: 2 },
    diffraction: { complete: true, bestScore: 6, attempts: 1 },
    doubleslit: { complete: true, bestScore: 6, attempts: 3 }
  },
  round2: {
    debroglie: { complete: true, bestScore: 6, attempts: 1 },
    momentum: { complete: false, bestScore: 4, attempts: 2 }
  }
}));

localStorage.setItem('VCEAU_physics_U4AOS1-11_errorTracking', JSON.stringify({
  debroglie_formula: {
    count: 2,
    rounds: [1, 2],
    wrongAnswers: ["hp", "p/h"]
  }
}));

localStorage.setItem('VCEAU_physics_U4AOS1-11_selections', JSON.stringify({
  round2: {
    momentum: {
      p1: "mass",
      p2: "momentum",
      p3: "E = mcÂ²"  // Current wrong selection
    }
  }
}));
```

### 8.2 Session State (In-Memory)

```javascript
const sessionState = {
  currentCurriculum: 'VCEAU',
  currentSubject: 'physics',
  currentTopic: 'U4AOS1-11',
  currentRound: 2,
  currentTab: 'momentum',
  topicData: { /* loaded JSON */ },
  tabStates: {
    momentum: {
      submitted: true,
      selections: { p1: 'mass', p2: 'momentum', p3: 'E = mcÂ²' },
      results: { p1: true, p2: true, p3: false },
      attempts: 2
    }
  }
};
```

---

## 9. REVIEW SYSTEM

### 9.1 Review Screen Triggers
- All tabs in current round achieve 100%
- User clicks "Review Performance" button
- User completes all 3 rounds (final review)

### 9.2 Review Screen Content

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PERFORMANCE REVIEW                                              â”‚
â”‚                                                                  â”‚
â”‚  Filter: [Current Round] [Round 1] [Round 2] [Round 3] [Total]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  SUMMARY                                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€                                                        â”‚
â”‚  Score: 22/24 (92%)                                             â”‚
â”‚  Average Attempts: 1.5 per tab                                  â”‚
â”‚  Time: 12 minutes                                                â”‚
â”‚                                                                  â”‚
â”‚  TAB BREAKDOWN                                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                   â”‚
â”‚  âœ“ de Broglie Wavelength    6/6  (1 attempt)                   â”‚
â”‚  âœ“ Photon Momentum          6/6  (2 attempts)                   â”‚
â”‚  âœ“ Diffraction Patterns     6/6  (1 attempt)                    â”‚
â”‚  âœ“ Double Slit Experiment   4/6 â†’ 6/6  (3 attempts)            â”‚
â”‚                                                                  â”‚
â”‚  CONCEPTS TO REVIEW                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                              â”‚
â”‚  âš  debroglie_formula (2 errors)                                 â”‚
â”‚    "The de Broglie formula Î» = h/p shows wavelength is          â”‚
â”‚     inversely proportional to momentum..."                       â”‚
â”‚    Your answers: "hp", "p/h"                                     â”‚
â”‚    Correct: "h/p"                                                â”‚
â”‚                                                                  â”‚
â”‚  âš  photon_momentum (1 error)                                    â”‚
â”‚    "Photon momentum is calculated using E = pc..."              â”‚
â”‚    Your answer: "E = mcÂ²"                                        â”‚
â”‚    Correct: "E = pc"                                             â”‚
â”‚                                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Continue to Round 2]    [Reset Current Round]    [Close]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.3 Final Completion Screen

After Round 3 completion:
- Celebration animation
- Total score across all rounds
- Persistent problem concepts highlighted
- Option to reset and try again
- Link to next topic (if available)

---

## 10. SPECIAL FEATURES

### 10.1 Debug Mode
**Activation**: Press `q` + `w` + `e` simultaneously
**Function**: Auto-fills all dropdowns with correct answers
**Purpose**: Testing only
**Visual**: Console log "Debug mode activated"

### 10.2 Character Handling

**Special Character Conversions** (for option values):
```javascript
const conversions = {
  'Î»': 'lambda',
  'Ï€': 'pi',
  'Î”': 'Delta',
  'âˆ': 'infinity',
  'Ã—': 'x',
  'Â·': '*',
  'â‰ˆ': '~',
  'â‰ ': '!=',
  'â‰¤': '<=',
  'â‰¥': '>=',
  'â‚€': '0',
  'â‚': '1',
  'Â²': '^2',
  'Â³': '^3'
};
```

**Display**: Show original Unicode in dropdown text
**Comparison**: Use converted values for answer checking

### 10.3 Long Text Handling
- Options > 60 characters: Truncate with "..." and show full text in title attribute
- Tooltips appear on hover for truncated options

### 10.4 Option Randomization
- Options are randomized on each load
- Correct answer position varies
- Same randomization within a session (prevents re-rolling by refresh)

---

## 11. ERROR HANDLING

### 11.1 Network Errors
- Show inline error message (no modal)
- "Unable to load topic. Please check your connection."
- Retry button
- Fall back to cached version if available

### 11.2 Invalid JSON
- Log error to console
- Show user-friendly message
- "Content error. Please try another topic."

### 11.3 Missing Content
- Topics with `status: "coming_soon"` show placeholder
- "This topic is coming soon!"
- Disable selection, don't show error

### 11.4 Browser Compatibility
- Feature detection for localStorage
- Graceful degradation for older browsers
- Clear message if required features unavailable

---

## 12. VISUAL DESIGN

### 12.1 Color Palette

**Primary Colors** (per subject):
- Physics: `#667eea` (purple-blue)
- Chemistry: `#ef4444` (red)
- Biology: `#10b981` (green)
- Mathematics: `#f59e0b` (amber)

**Semantic Colors**:
- Success: `#10b981`
- Error: `#ef4444`
- Warning: `#f59e0b`
- Info: `#3b82f6`

**Dropdown States**:
- Unfilled: `#fffacd` (light yellow)
- Filled: `#add8e6` (light blue)
- Correct: `#90ee90` (light green)
- Incorrect: `#ffcccb` (pale red)

### 12.2 Typography
- Headings: System sans-serif, bold
- Body: System sans-serif, regular
- Monospace: For formulas and code
- Size scale: 14px base, 1.25 ratio

### 12.3 Spacing
- Base unit: 4px
- Component padding: 16px
- Section margins: 24px
- Maximum content width: 800px

### 12.4 Animations
- Dropdown focus: 0.2s ease
- Tab switch: 0.3s ease
- Color transitions: 0.3s ease
- Review screen slide: 0.4s ease-out

---

## 13. IMPLEMENTATION PHASES

### Phase 0: Content Preparation
- [ ] Parse study design dot points
- [ ] Map dot points to tabs
- [ ] Write sentences with dropdowns
- [ ] Create 3-round variations
- [ ] Design plausible distractors
- [ ] Write explanations for concepts
- [ ] Validate JSON structure

### Phase 1: Foundation
- [ ] HTML skeleton with semantic structure
- [ ] CSS styling system with variables
- [ ] 5-tier selection cascade
- [ ] JSON loading utilities
- [ ] localStorage management

### Phase 2: Content Rendering
- [ ] Tab generation from JSON
- [ ] Sentence parsing for {{placeholders}}
- [ ] Dropdown creation and insertion
- [ ] Option randomization
- [ ] Round content switching

### Phase 3: Interaction Logic
- [ ] Dropdown change handlers
- [ ] Tab navigation
- [ ] Submit/grade functionality
- [ ] Attempt tracking
- [ ] Reset functionality (3 levels)

### Phase 4: Scoring System
- [ ] Per-tab scoring
- [ ] Attempt penalty calculation
- [ ] Total score aggregation
- [ ] Concept error tracking
- [ ] Progress persistence

### Phase 5: Review System
- [ ] Review screen generation
- [ ] Filter by round
- [ ] Concept explanation display
- [ ] Error pattern analysis
- [ ] Round progression controls

### Phase 6: Polish
- [ ] Tooltip system (1.2s delay)
- [ ] Debug mode (q+w+e)
- [ ] Animations/transitions
- [ ] Mobile responsiveness
- [ ] Accessibility audit
- [ ] Cross-browser testing

---

## 14. DELIVERABLES

1. **youcantfakethis.html** - Complete application (HTML/CSS/JS)
2. **states.json** - Curriculum registry
3. **[STATE]/study-manifest.json** - Per-curriculum subject list
4. **[STATE]/[subject]/topic-manifest.json** - Per-subject topic list
5. **[STATE]/[subject]/[topic].json** - Individual topic content
6. **README.md** - Setup and usage documentation

---

## 15. QUALITY CHECKLIST

### Content Quality
- [ ] Every dropdown has exactly 4 options (1 correct + 3 distractors)
- [ ] All distractors are plausible student mistakes
- [ ] No answer giveaways in sentence text
- [ ] 3 rounds with genuinely different phrasing
- [ ] Concepts map to study design dot points
- [ ] Tooltips provide helpful hints, not answers

### Technical Quality
- [ ] Valid JSON (no trailing commas, proper escaping)
- [ ] All file paths resolve correctly
- [ ] localStorage keys are properly namespaced
- [ ] No console errors in normal operation
- [ ] Graceful error handling
- [ ] Cross-browser compatibility

### UX Quality
- [ ] Clear visual feedback for all states
- [ ] Intuitive navigation
- [ ] Progress always visible
- [ ] Reset requires confirmation
- [ ] Tooltips appear reliably
- [ ] Mobile-friendly layout

---

## APPENDIX A: Example Complete Topic JSON

See Section 4.4 for the full structure. A complete topic should have:
- Metadata with all required fields
- Array of dot points from study design
- Array of tab definitions
- Content object with round1, round2, round3
- Each round has all tabs
- Each tab has title, instructions, sentences array
- Each sentence has text with {{placeholders}} and questions object
- Each question has correct, distractors (exactly 3), concept, tooltip
- Explanations object mapping concept IDs to educational content

---

## APPENDIX B: Common Mistakes to Avoid

1. **Distractors from wrong domain**: "Planck's constant" vs "Hubble's constant" (astronomy) - use same-field alternatives
2. **Answer in sentence**: "wave-particle duality shows both wave and {{wave}} properties" - restructure sentence
3. **Unequal option lengths**: One option is 3 words, others are 15 words - balance them
4. **Missing round variations**: Copy-pasting Round 1 to Rounds 2 and 3 - genuinely rephrase
5. **Trivial distractors**: Obviously wrong answers that no student would choose
6. **Inconsistent JSON**: Missing fields, wrong nesting, trailing commas

---

*End of Project Specification*