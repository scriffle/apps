# Trovu - Manifest-Based Topic System Implementation

## Overview

**Trovu** uses a **manifest-based dynamic topic discovery system** instead of hardcoded strands. Each learning area has a `manifest.json` file that lists all available topics, which the UI fetches and uses to populate the Topic dropdown.

---

## File Structure

```
trovu/
├── trovu.html                                     ← Main application
│
└── data/
    ├── hpe/
    │   ├── manifest.json                          ← Topic index for this area
    │   ├── hpe_identity-development_7-8_topic-1.json
    │   ├── hpe_identity-development_7-8_topic-2.json
    │   ├── hpe_identity-development_7-8_topic-3.json
    │   ├── hpe_mental-health-wellbeing_5-6_topic-1.json
    │   ├── hpe_mental-health-wellbeing_7-8_topic-1.json
    │   └── ...
    │
    ├── science/
    │   ├── manifest.json
    │   ├── science_chemical-sciences_5-6_topic-1.json
    │   └── ...
    │
    ├── english/
    │   ├── manifest.json
    │   └── ...
    │
    ├── mathematics/
    │   ├── manifest.json
    │   └── ...
    │
    ├── humanities/
    │   ├── manifest.json
    │   └── ...
    │
    ├── the-arts/
    │   ├── manifest.json
    │   └── ...
    │
    ├── technologies/
    │   ├── manifest.json
    │   └── ...
    │
    ├── critical-and-creative-thinking/
    │   ├── manifest.json
    │   └── ...
    │
    ├── ethical-capability/
    │   ├── manifest.json
    │   └── ...
    │
    ├── intercultural-capability/
    │   ├── manifest.json
    │   └── ...
    │
    └── personal-and-social-capability/
        ├── manifest.json
        └── ...
```

---

## Manifest Schema

```json
{
  "platform": "Trovu",
  "learningArea": "Health and Physical Education",
  "code": "hpe",
  "version": "1.0",
  "lastUpdated": "2024-12-21",
  "topics": [
    {
      "id": "identity-development",
      "title": "Identity Development",
      "description": "Exploring personal values, beliefs, and identity formation",
      "strand": "Health",
      "levels": ["7-8", "9-10"],
      "topicCount": 3
    },
    {
      "id": "mental-health-wellbeing",
      "title": "Mental Health & Wellbeing",
      "description": "Understanding and supporting mental health",
      "strand": "Health",
      "levels": ["5-6", "7-8", "9-10"],
      "topicCount": 4
    }
  ]
}
```

### Manifest Properties

| Property | Type | Description |
|----------|------|-------------|
| `platform` | string | Always "Trovu" |
| `learningArea` | string | Full name of the learning area |
| `code` | string | Short code used in filenames |
| `version` | string | Manifest version |
| `lastUpdated` | string | ISO date of last update |
| `topics` | array | List of topic objects |

### Topic Object Properties

| Property | Type | Description |
|----------|------|-------------|
| `id` | string | URL-safe identifier used in filenames |
| `title` | string | Human-readable title shown in dropdown |
| `description` | string | Optional brief description |
| `strand` | string | Which strand this topic belongs to (for filtering) |
| `levels` | string[] | Which year levels have content for this topic |
| `topicCount` | number | How many parts/files exist for this topic |

---

## Content File Naming Convention

### F-10
```
{area}_{topicId}_{level}_topic-{n}.json
```
Example: `hpe_identity-development_7-8_topic-1.json`

### VCE
```
{study}_{topicId}_unit-{n}_topic-{n}.json
```
Example: `biology_cell-biology_unit-3_topic-1.json`

### University
```
{course}_{topicId}_{level}_sem-{n}-week-{n}_topic-{n}.json
```
Example: `biology_molecular-biology_intro_sem-1-week-3_topic-1.json`

---

## Trovu UI Navigation Flow

### Dropdowns (F-10 Mode)
```
[T] Trovu | [Level: F-10] | [Type: Subjects] | [Subject: HPE] | [Year: 7-8] | [Topic: Identity Development] | [#: 1] | [Reading: Standard]
```

### State Properties

| Property | Description |
|----------|-------------|
| `state.topicId` | Selected topic ID from manifest (e.g., "identity-development") |
| `state.topicNum` | Part number within topic (1, 2, 3...) |

### Cascade Behavior

When parent dropdowns change:

1. **Mode changes** → Clear topics, fetch new manifest structure
2. **Category/Type changes** → Repopulate areas, clear topics
3. **Subject/Area changes** → Fetch new manifest, clear topic selection
4. **Year/Level changes** → Refilter topics from manifest, clear if current not available
5. **Topic changes** → Update part count from manifest, reset to part 1
6. **Part changes** → Load content file

---

## Empty State Handling

When no topic is selected (or no topics available), Trovu shows:

```
┌─────────────────────────────────────┐
│                                     │
│          [Book Icon]                │
│                                     │
│   Select a Topic to Begin           │
│                                     │
│   Choose a topic from the dropdown  │
│   above to start learning.          │
│                                     │
│   No content available yet for      │
│   this subject and year level.      │
│                                     │
└─────────────────────────────────────┘
```

---

## How to Add New Content

### 1. Create/Update Manifest

Edit `data/{area}/manifest.json` to add new topic:

```json
{
  "id": "new-topic-slug",
  "title": "New Topic Title",
  "description": "Brief description",
  "strand": "Relevant Strand",
  "levels": ["5-6", "7-8"],
  "topicCount": 2
}
```

### 2. Create Content Files

Create files in `data/{area}/` following the naming convention:
- `{area}_{topicId}_{level}_topic-1.json`
- `{area}_{topicId}_{level}_topic-2.json`
- etc.

### 3. Content File Schema

Content files use the `literacyLevels` schema with sections:
- `whatYouWillLearn`
- `explicatoryContent`
- `caseStudy`
- `assessmentBlooms`
- `assessmentSOLO`
- `studentReflection`

---

## Fallback Behavior

If manifest or content files are not found:
1. **No manifest** → Topic dropdown shows "No topics yet"
2. **No content file** → Falls back to placeholder JSON (generated dynamically)

Console logs show fetch attempts for debugging.

---

## Sample Files Included

- `trovu.html` - Main Trovu application
- `data/hpe/manifest.json` - Complete manifest with 10 topics
- UI configured for HPE at Years 7-8 by default

---

## Next Steps

1. Create manifests for all learning areas
2. Generate content files using the Data_Structure schema
3. VCE manifests should include `units` array instead of `levels`
4. University manifests should include `semesters` and `levels` arrays

---

## Content Generation

Use the provided prompts to generate content files:

- **`CONTENT_GENERATION_PROMPT.md`** — Full detailed prompt with complete schema reference
- **`CONTENT_GENERATION_QUICKSTART.md`** — Quick template for rapid generation

### Workflow

1. Identify topic from manifest
2. Fill in prompt template with topic details
3. Generate JSON content
4. Validate JSON structure
5. Save to `data/{area}/` directory
6. Test in Trovu UI