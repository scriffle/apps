<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ion Bonding Simulation</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      overflow: hidden;
    }
    /* Container for top panel and simulation */
    .container {
      display: flex;
      flex-direction: column;
      height: 100vh;
    }
    /* Top panel is now resizable */
    #top-panel {
      overflow: auto;
      background-color: #eee;
      border-bottom: 2px solid #ccc;
    }
    /* Resize handle between top panel and simulation */
    #resize-handle {
      height: 10px;
      background: #ccc;
      cursor: ns-resize;
    }
    /* Simulation area remains fixed below */
    #simulation {
      flex: 1;
      background-color: #f9f9f9;
      position: relative;
      overflow: hidden;
    }
    /* Split periodic table into two groups with a gap */
    #periodic-table {
      display: flex;
      justify-content: space-around;
      padding: 10px;
    }
    .metals, .nonmetals {
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
      max-width: 45%;
    }
    /* Element buttons now have fixed width */
    .element {
      width: 60px;
      padding: 10px;
      text-align: center;
      font-size: 16px;
      cursor: pointer;
      border: 1px solid #ccc;
      border-radius: 5px;
      background-color: #f0f0f0;
    }
    .element:hover {
      background-color: #ddd;
    }
    /* Control buttons styling */
    #controls {
      text-align: center;
      margin: 10px;
    }
    #controls button {
      margin: 0 5px;
      padding: 8px 12px;
      font-size: 14px;
      cursor: pointer;
    }
    /* Ions and compounds styling */
    .ion, .compound {
      position: absolute;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: bold;
      text-align: center;
      user-select: none;
    }
    .ion {
      width: 40px;
      height: 40px;
      border-radius: 50%;
    }
    .compound {
      min-width: 50px;
      padding: 5px;
      border: 2px solid #004085;
      border-radius: 10px;
      cursor: pointer;
    }
    /* Soft colors for periodic table elements */
    .Li { background-color: #d7eaff; }
    .Na { background-color: #ffc0cb; }
    .K  { background-color: #e4f1ff; }
    .Rb { background-color: #ffddcc; }
    .Cs { background-color: #ffebcc; }
    .Be { background-color: #c7ffe5; }
    .Mg { background-color: #d9ffb3; }
    .Ca { background-color: #ffb3b3; }
    .Sr { background-color: #e6e6ff; }
    .Ba { background-color: #fffacd; }
    .Sc { background-color: #f0f0f0; }
    .Ti { background-color: #c0c0c0; }
    .V  { background-color: #e6ffe6; }
    .Cr { background-color: #ffe5e5; }
    .Mn { background-color: #e0f7fa; }
    .Fe { background-color: #ffa07a; }
    .Co { background-color: #add8e6; }
    .Ni { background-color: #dcdcdc; }
    .Cu { background-color: #c08040; }
    .Zn { background-color: #d7d7d7; }
    .Ag { background-color: #d9d9d9; }
    .Cd { background-color: #ffdead; }
    .Au { background-color: #ffd700; }
    .Hg { background-color: #c0c0c0; }
    .Al { background-color: #d8bfd8; }
    .Ga { background-color: #e6e6fa; }
    .In { background-color: #ffcccb; }
    .Sn { background-color: #e5e5e5; }
    .Pb { background-color: #a9a9a9; }
    .F  { background-color: #e0ffff; }
    .Cl { background-color: #d3ffd3; }
    .Br { background-color: #f5deb3; }
    .I  { background-color: #f4c2c2; }
    .O  { background-color: #ffcccb; }
    .S  { background-color: #f5f5dc; }
    .Se { background-color: #ffb3b3; }
    .Te { background-color: #e6e6e6; }
    .N  { background-color: #add8e6; }
    .P  { background-color: #ffcccb; }
  </style>
</head>
<body>
  <div class="container">
    <!-- Top Panel: Periodic Table and Controls -->
    <div id="top-panel">
      <div id="periodic-table">
        <div class="metals" id="metals-container"></div>
        <div class="nonmetals" id="nonmetals-container"></div>
      </div>
      <div id="controls">
        <button onclick="removeIons()">Remove Ions</button>
        <button onclick="removeCompounds()">Remove Compounds</button>
        <button onclick="bondNow()">Bond Now</button>
      </div>
    </div>
    <!-- Draggable Resize Handle -->
    <div id="resize-handle"></div>
    <!-- Simulation Area -->
    <div id="simulation"></div>
  </div>

  <script>
    // --- Hard-coded compound mapping with real-life colors ---
    const compoundMapping = {
      "LiF": { compound: "LiF", name: "Lithium Fluoride", color: "#ffffff" },
      "LiCl": { compound: "LiCl", name: "Lithium Chloride", color: "#ffffff" },
      "LiBr": { compound: "LiBr", name: "Lithium Bromide", color: "#ffffff" },
      "LiI":  { compound: "LiI",  name: "Lithium Iodide",  color: "#ffffff" },
      "NaF": { compound: "NaF", name: "Sodium Fluoride", color: "#ffffff" },
      "NaCl": { compound: "NaCl", name: "Sodium Chloride", color: "#ffffff" },
      "NaBr": { compound: "NaBr", name: "Sodium Bromide", color: "#ffffff" },
      "NaI":  { compound: "NaI",  name: "Sodium Iodide",  color: "#ffffff" },
      "KF":  { compound: "KF",  name: "Potassium Fluoride", color: "#ffffff" },
      "KCl": { compound: "KCl", name: "Potassium Chloride", color: "#ffffff" },
      "KBr": { compound: "KBr", name: "Potassium Bromide", color: "#ffffff" },
      "KI":  { compound: "KI",  name: "Potassium Iodide", color: "#ffffff" },
      "RbF": { compound: "RbF", name: "Rubidium Fluoride", color: "#ffffff" },
      "RbCl": { compound: "RbCl", name: "Rubidium Chloride", color: "#ffffff" },
      "RbBr": { compound: "RbBr", name: "Rubidium Bromide", color: "#ffffff" },
      "RbI": { compound: "RbI", name: "Rubidium Iodide", color: "#ffffff" },
      "CsF": { compound: "CsF", name: "Cesium Fluoride", color: "#ffffff" },
      "CsCl": { compound: "CsCl", name: "Cesium Chloride", color: "#ffffff" },
      "CsBr": { compound: "CsBr", name: "Cesium Bromide", color: "#ffffff" },
      "CsI": { compound: "CsI", name: "Cesium Iodide", color: "#ffffff" },
      // Divalent compounds
      "BeO": { compound: "BeO", name: "Beryllium Oxide", color: "#ffffff" },
      "BeS": { compound: "BeS", name: "Beryllium Sulfide", color: "#ffffff" },
      "BeSe": { compound: "BeSe", name: "Beryllium Selenide", color: "#ffffff" },
      "BeTe": { compound: "BeTe", name: "Beryllium Telluride", color: "#ffffff" },
      "MgO": { compound: "MgO", name: "Magnesium Oxide", color: "#ffffff" },
      "MgS": { compound: "MgS", name: "Magnesium Sulfide", color: "#ffffff" },
      "MgSe": { compound: "MgSe", name: "Magnesium Selenide", color: "#ffffff" },
      "MgTe": { compound: "MgTe", name: "Magnesium Telluride", color: "#ffffff" },
      "CaO": { compound: "CaO", name: "Calcium Oxide", color: "#ffffff" },
      "CaS": { compound: "CaS", name: "Calcium Sulfide", color: "#ffffff" },
      "CaSe": { compound: "CaSe", name: "Calcium Selenide", color: "#ffffff" },
      "CaTe": { compound: "CaTe", name: "Calcium Telluride", color: "#ffffff" },
      "SrO": { compound: "SrO", name: "Strontium Oxide", color: "#ffffff" },
      "SrS": { compound: "SrS", name: "Strontium Sulfide", color: "#ffffff" },
      "SrSe": { compound: "SrSe", name: "Strontium Selenide", color: "#ffffff" },
      "SrTe": { compound: "SrTe", name: "Strontium Telluride", color: "#ffffff" },
      "BaO": { compound: "BaO", name: "Barium Oxide", color: "#ffffff" },
      "BaS": { compound: "BaS", name: "Barium Sulfide", color: "#ffffff" },
      "BaSe": { compound: "BaSe", name: "Barium Selenide", color: "#ffffff" },
      "BaTe": { compound: "BaTe", name: "Barium Telluride", color: "#ffffff" },
      "TiO": { compound: "TiO", name: "Titanium Oxide", color: "#d3d3d3" },
      "TiS": { compound: "TiS", name: "Titanium Sulfide", color: "#d3d3d3" },
      "TiSe": { compound: "TiSe", name: "Titanium Selenide", color: "#d3d3d3" },
      "TiTe": { compound: "TiTe", name: "Titanium Telluride", color: "#d3d3d3" },
      "VO":  { compound: "VO",  name: "Vanadium Oxide", color: "#808080" },
      "VS":  { compound: "VS",  name: "Vanadium Sulfide", color: "#808080" },
      "VSe": { compound: "VSe", name: "Vanadium Selenide", color: "#808080" },
      "VTe": { compound: "VTe", name: "Vanadium Telluride", color: "#808080" },
      "MnO": { compound: "MnO", name: "Manganese Oxide", color: "#a52a2a" },
      "MnS": { compound: "MnS", name: "Manganese Sulfide", color: "#a52a2a" },
      "MnSe": { compound: "MnSe", name: "Manganese Selenide", color: "#a52a2a" },
      "MnTe": { compound: "MnTe", name: "Manganese Telluride", color: "#a52a2a" },
      "FeO": { compound: "FeO", name: "Iron Oxide", color: "#000000" },
      "FeS": { compound: "FeS", name: "Iron Sulfide", color: "#000000" },
      "FeSe": { compound: "FeSe", name: "Iron Selenide", color: "#000000" },
      "FeTe": { compound: "FeTe", name: "Iron Telluride", color: "#000000" },
      "CoO": { compound: "CoO", name: "Cobalt Oxide", color: "#000000" },
      "CoS": { compound: "CoS", name: "Cobalt Sulfide", color: "#000000" },
      "CoSe": { compound: "CoSe", name: "Cobalt Selenide", color: "#000000" },
      "CoTe": { compound: "CoTe", name: "Cobalt Telluride", color: "#000000" },
      "NiO": { compound: "NiO", name: "Nickel Oxide", color: "#008000" },
      "NiS": { compound: "NiS", name: "Nickel Sulfide", color: "#008000" },
      "NiSe": { compound: "NiSe", name: "Nickel Selenide", color: "#008000" },
      "NiTe": { compound: "NiTe", name: "Nickel Telluride", color: "#008000" },
      "CuO": { compound: "CuO", name: "Copper Oxide", color: "#000000" },
      "CuS": { compound: "CuS", name: "Copper Sulfide", color: "#000000" },
      "CuSe": { compound: "CuSe", name: "Copper Selenide", color: "#000000" },
      "CuTe": { compound: "CuTe", name: "Copper Telluride", color: "#000000" },
      "ZnO": { compound: "ZnO", name: "Zinc Oxide", color: "#ffffff" },
      "ZnS": { compound: "ZnS", name: "Zinc Sulfide", color: "#ffffff" },
      "ZnSe": { compound: "ZnSe", name: "Zinc Selenide", color: "#ffffff" },
      "ZnTe": { compound: "ZnTe", name: "Zinc Telluride", color: "#ffffff" },
      "SnO": { compound: "SnO", name: "Tin Oxide", color: "#ffffff" },
      "SnS": { compound: "SnS", name: "Tin Sulfide", color: "#ffffff" },
      "SnSe": { compound: "SnSe", name: "Tin Selenide", color: "#ffffff" },
      "SnTe": { compound: "SnTe", name: "Tin Telluride", color: "#ffffff" },
      "PbO": { compound: "PbO", name: "Lead Oxide", color: "#ffff00" },
      "PbS": { compound: "PbS", name: "Lead Sulfide", color: "#ffff00" },
      "PbSe": { compound: "PbSe", name: "Lead Selenide", color: "#ffff00" },
      "PbTe": { compound: "PbTe", name: "Lead Telluride", color: "#ffff00" },
      "ScN": { compound: "ScN", name: "Scandium Nitride", color: "#d3d3d3" },
      "ScP": { compound: "ScP", name: "Scandium Phosphide", color: "#d3d3d3" },
      "CrN": { compound: "CrN", name: "Chromium Nitride", color: "#808080" },
      "CrP": { compound: "CrP", name: "Chromium Phosphide", color: "#808080" },
      "AlN": { compound: "AlN", name: "Aluminum Nitride", color: "#ffffff" },
      "AlP": { compound: "AlP", name: "Aluminum Phosphide", color: "#ffffff" },
      "GaN": { compound: "GaN", name: "Gallium Nitride", color: "#ffff00" },
      "GaP": { compound: "GaP", name: "Gallium Phosphide", color: "#ffff00" },
      "InN": { compound: "InN", name: "Indium Nitride", color: "#000000" },
      "InP": { compound: "InP", name: "Indium Phosphide", color: "#000000" }
    };

    // Helper: determine contrasting text color (black or white)
    function getContrastYIQ(hexcolor){
      hexcolor = hexcolor.replace("#", "");
      const r = parseInt(hexcolor.substr(0,2),16);
      const g = parseInt(hexcolor.substr(2,2),16);
      const b = parseInt(hexcolor.substr(4,2),16);
      const yiq = ((r*299)+(g*587)+(b*114))/1000;
      return (yiq >= 128) ? "#000000" : "#ffffff";
    }

    // --- Ion groups definition ---
    const group1 = [
      { symbol: 'Li', name: 'Lithium', charge: 1, class: 'Li' },
      { symbol: 'Na', name: 'Sodium', charge: 1, class: 'Na' },
      { symbol: 'K',  name: 'Potassium', charge: 1, class: 'K' },
      { symbol: 'Rb', name: 'Rubidium', charge: 1, class: 'Rb' },
      { symbol: 'Cs', name: 'Cesium', charge: 1, class: 'Cs' }
    ];
    const group2 = [
      { symbol: 'Be', name: 'Beryllium', charge: 2, class: 'Be' },
      { symbol: 'Mg', name: 'Magnesium', charge: 2, class: 'Mg' },
      { symbol: 'Ca', name: 'Calcium', charge: 2, class: 'Ca' },
      { symbol: 'Sr', name: 'Strontium', charge: 2, class: 'Sr' },
      { symbol: 'Ba', name: 'Barium', charge: 2, class: 'Ba' }
    ];
    const transitionMetals1 = [
      { symbol: 'Sc', name: 'Scandium', charge: 3, class: 'Sc' },
      { symbol: 'Ti', name: 'Titanium', charge: 2, class: 'Ti' },
      { symbol: 'V',  name: 'Vanadium', charge: 2, class: 'V' },
      { symbol: 'Cr', name: 'Chromium', charge: 3, class: 'Cr' },
      { symbol: 'Mn', name: 'Manganese', charge: 2, class: 'Mn' }
    ];
    const transitionMetals2 = [
      { symbol: 'Fe', name: 'Iron', charge: 2, class: 'Fe' },
      { symbol: 'Co', name: 'Cobalt', charge: 2, class: 'Co' },
      { symbol: 'Ni', name: 'Nickel', charge: 2, class: 'Ni' },
      { symbol: 'Cu', name: 'Copper', charge: 2, class: 'Cu' },
      { symbol: 'Zn', name: 'Zinc', charge: 2, class: 'Zn' }
    ];
    const postTransitionMetals = [
      { symbol: 'Al', name: 'Aluminum', charge: 3, class: 'Al' },
      { symbol: 'Ga', name: 'Gallium', charge: 3, class: 'Ga' },
      { symbol: 'In', name: 'Indium', charge: 3, class: 'In' },
      { symbol: 'Sn', name: 'Tin', charge: 2, class: 'Sn' },
      { symbol: 'Pb', name: 'Lead', charge: 2, class: 'Pb' }
    ];
    const anions = [
      { symbol: 'F',  name: 'Fluorine', charge: -1, class: 'F' },
      { symbol: 'Cl', name: 'Chlorine', charge: -1, class: 'Cl' },
      { symbol: 'Br', name: 'Bromine', charge: -1, class: 'Br' },
      { symbol: 'I',  name: 'Iodine', charge: -1, class: 'I' },
      { symbol: 'O',  name: 'Oxygen', charge: -2, class: 'O' },
      { symbol: 'S',  name: 'Sulfur', charge: -2, class: 'S' },
      { symbol: 'Se', name: 'Selenium', charge: -2, class: 'Se' },
      { symbol: 'Te', name: 'Tellurium', charge: -2, class: 'Te' },
      { symbol: 'N',  name: 'Nitrogen', charge: -3, class: 'N' },
      { symbol: 'P',  name: 'Phosphorus', charge: -3, class: 'P' }
    ];

    // Utility: format charge with superscript
    function formatCharge(charge) {
      const sign = charge > 0 ? '+' : '-';
      const absVal = Math.abs(charge);
      return absVal === 1 ? sign : sign + `<sup>${absVal}</sup>`;
    }

    function displayIons(ions, container) {
      ions.forEach(ion => {
        const div = document.createElement('div');
        div.classList.add('element', ion.class);
        div.innerHTML = `<strong>${ion.symbol}</strong><br>${formatCharge(ion.charge)}`;
        div.onclick = () => addIons(ion);
        container.appendChild(div);
      });
    }

    // Create two containers for periodic table groups
    const metalsContainer = document.getElementById("metals-container");
    const nonmetalsContainer = document.getElementById("nonmetals-container");
    const group1Div = document.createElement('div');
    const group2Div = document.createElement('div');
    const transition1Div = document.createElement('div');
    const transition2Div = document.createElement('div');
    const postTransitionDiv = document.createElement('div');

    displayIons(group1, group1Div);
    displayIons(group2, group2Div);
    displayIons(transitionMetals1, transition1Div);
    displayIons(transitionMetals2, transition2Div);
    displayIons(postTransitionMetals, postTransitionDiv);

    metalsContainer.appendChild(group1Div);
    metalsContainer.appendChild(group2Div);
    metalsContainer.appendChild(transition1Div);
    metalsContainer.appendChild(transition2Div);
    metalsContainer.appendChild(postTransitionDiv);

    const half = Math.ceil(anions.length / 2);
    const anionDiv1 = document.createElement('div');
    const anionDiv2 = document.createElement('div');
    displayIons(anions.slice(0, half), anionDiv1);
    displayIons(anions.slice(half), anionDiv2);
    nonmetalsContainer.appendChild(anionDiv1);
    nonmetalsContainer.appendChild(anionDiv2);

    const simulationArea = document.getElementById('simulation');

    function addIons(ion) {
      const count = 10;
      for (let i = 0; i < count; i++) {
        const ionDiv = document.createElement('div');
        ionDiv.classList.add('ion', ion.class);
        ionDiv.dataset.charge = ion.charge;
        ionDiv.dataset.symbol = ion.symbol;
        ionDiv.dataset.name = ion.name;
        ionDiv.innerHTML = `${ion.symbol}<br>${formatCharge(ion.charge)}`;
        ionDiv.style.top = `${Math.random() * simulationArea.clientHeight}px`;
        ionDiv.style.left = `${Math.random() * simulationArea.clientWidth}px`;
        simulationArea.appendChild(ionDiv);
        animateParticle(ionDiv);
      }
    }

    // Animate a particle (ion or compound)
    function animateParticle(particle) {
      let posX = parseFloat(particle.style.left);
      let posY = parseFloat(particle.style.top);
      let velX = (Math.random() - 0.5) * 2;
      let velY = (Math.random() - 0.5) * 2;
      const width = particle.offsetWidth;
      const height = particle.offsetHeight;
      const radius = width / 2;

      function move() {
        posX += velX;
        posY += velY + 0.05; // gravity

        // Boundary handling
        if (posX < 0) {
          posX = 0;
          velX *= -1;
        }
        if (posX + width > simulationArea.clientWidth) {
          posX = simulationArea.clientWidth - width;
          velX *= -1;
        }
        if (posY < 0) {
          posY = 0;
          velY *= -1;
        }
        if (particle.classList.contains('compound')) {
          // Compounds sink to the bottom
          if (posY + height > simulationArea.clientHeight) {
            posY = simulationArea.clientHeight - height;
            velY = 0;
          }
        } else {
          if (posY + height > simulationArea.clientHeight) {
            posY = simulationArea.clientHeight - height;
            velY *= -1;
          }
        }

        // Collision detection & repulsion
        const particles = document.querySelectorAll('.ion, .compound');
        particles.forEach(other => {
          if (other !== particle) {
            const otherX = parseFloat(other.style.left) + other.offsetWidth / 2;
            const otherY = parseFloat(other.style.top) + other.offsetHeight / 2;
            const centerX = posX + width / 2;
            const centerY = posY + height / 2;
            const dx = centerX - otherX;
            const dy = centerY - otherY;
            const distance = Math.sqrt(dx * dx + dy * dy);
            const otherRadius = other.offsetWidth / 2;
            const minDistance = radius + otherRadius;
            if (distance < minDistance && distance > 0) {
              const particleCharge = parseInt(particle.dataset.charge);
              const otherCharge = parseInt(other.dataset.charge);
              if (particleCharge + otherCharge === 0) {
                if (particle.dataset.symbol < other.dataset.symbol) {
                  bondParticles(particle, other);
                  return;
                }
              } else {
                const overlap = (minDistance - distance) * 0.5;
                const pushX = (dx / distance) * overlap;
                const pushY = (dy / distance) * overlap;
                posX += pushX;
                posY += pushY;
                velX += (dx / distance) * 0.1;
                velY += (dy / distance) * 0.1;
              }
            }
          }
        });

        particle.style.left = `${posX}px`;
        particle.style.top = `${posY}px`;
        requestAnimationFrame(move);
      }
      move();
    }

    // Bond two particles using the hard-coded mapping.
    function bondParticles(p1, p2) {
      const cation = parseInt(p1.dataset.charge) > 0 ? p1 : p2;
      const anion  = parseInt(p1.dataset.charge) < 0 ? p1 : p2;
      const key = cation.dataset.symbol + anion.dataset.symbol;
      let compoundData = compoundMapping[key];
      let compoundFormula, compoundName, compoundColor;
      if (compoundData) {
        compoundFormula = compoundData.compound;
        compoundName = compoundData.name;
        compoundColor = compoundData.color;
      } else {
        compoundFormula = key;
        compoundName = cation.dataset.name + " " + anion.dataset.name;
        compoundColor = "#ffffff";
      }
      const compoundDiv = document.createElement('div');
      compoundDiv.classList.add('compound');
      compoundDiv.dataset.compound = compoundFormula;
      compoundDiv.innerHTML = `${compoundFormula}<br>(${compoundName})`;
      compoundDiv.style.backgroundColor = compoundColor;
      compoundDiv.style.color = getContrastYIQ(compoundColor);
      compoundDiv.onclick = (e) => {
        e.stopPropagation();
        window.open("https://www.google.com/search?q=Wikipedia+" + encodeURIComponent(compoundName), "_blank");
      };
      compoundDiv.style.left = cation.style.left;
      compoundDiv.style.top = cation.style.top;
      simulationArea.appendChild(compoundDiv);
      simulationArea.removeChild(p1);
      simulationArea.removeChild(p2);
      animateParticle(compoundDiv);
    }

    // --- Control Button Functions ---
    function removeIons() {
      const ions = document.querySelectorAll('.ion');
      ions.forEach(ion => simulationArea.removeChild(ion));
    }
    function removeCompounds() {
      const compounds = document.querySelectorAll('.compound');
      compounds.forEach(comp => simulationArea.removeChild(comp));
    }
    function bondNow() {
      const ions = Array.from(document.querySelectorAll('.ion'));
      const cations = ions.filter(ion => parseInt(ion.dataset.charge) > 0);
      const anions = ions.filter(ion => parseInt(ion.dataset.charge) < 0);
      const count = Math.min(cations.length, anions.length);
      for (let i = 0; i < count; i++) {
        bondParticles(cations[i], anions[i]);
      }
    }

    // --- Resize Handle Functionality ---
    const resizeHandle = document.getElementById("resize-handle");
    const topPanel = document.getElementById("top-panel");
    let isResizing = false;

    resizeHandle.addEventListener("mousedown", function(e) {
      isResizing = true;
      document.body.style.cursor = "ns-resize";
    });

    document.addEventListener("mousemove", function(e) {
      if (!isResizing) return;
      // Limit the top panel height between 50px and 90% of viewport height
      let newHeight = e.clientY;
      newHeight = Math.max(50, newHeight);
      newHeight = Math.min(window.innerHeight * 0.9, newHeight);
      topPanel.style.height = newHeight + "px";
    });

    document.addEventListener("mouseup", function(e) {
      if (isResizing) {
        isResizing = false;
        document.body.style.cursor = "default";
      }
    });
  </script>
</body>
</html>
