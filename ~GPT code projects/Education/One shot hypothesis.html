<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Experiment Hypothesis Generator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    /* Style for the drop zones */
    .zone {
      border: 2px dashed #aaa;
      border-radius: 5px;
      padding: 10px;
      min-height: 50px;
      margin-bottom: 20px;
    }
    .zone.hovered {
      border-color: #555;
      background-color: #f0f0f0;
    }
    /* Style for draggable variable items */
    .draggable {
      padding: 5px 10px;
      margin: 5px;
      background-color: #ddd;
      border: 1px solid #aaa;
      border-radius: 3px;
      cursor: grab;
      display: inline-block;
    }
    #variable-pool {
      margin-bottom: 20px;
    }
    .inputField {
      margin: 5px 0;
    }
    button {
      margin-top: 10px;
      padding: 5px 10px;
    }
  </style>
</head>
<body>
  <h1>Experiment Hypothesis Generator</h1>
  <p>
    Drag variables from the pool into the boxes below to designate your Independent Variable (IV), Dependent Variable (DV), and Control Variables (CV). Then, type in what you expect to happen – for example, “increases” or “decreases” – to build your hypothesis.
  </p>

  <!-- Variables Pool -->
  <div id="variable-pool">
    <strong>Variables Pool:</strong>
    <div class="draggable" draggable="true" data-variable="Temperature">Temperature</div>
    <div class="draggable" draggable="true" data-variable="Light Intensity">Light Intensity</div>
    <div class="draggable" draggable="true" data-variable="Water Volume">Water Volume</div>
    <div class="draggable" draggable="true" data-variable="Fertilizer Amount">Fertilizer Amount</div>
    <div class="draggable" draggable="true" data-variable="pH Level">pH Level</div>
    <div class="draggable" draggable="true" data-variable="Reaction Time">Reaction Time</div>
    <div class="draggable" draggable="true" data-variable="Concentration">Concentration</div>
  </div>

  <!-- Drop zones -->
  <div>
    <h3>Independent Variable (IV)</h3>
    <div id="iv-zone" class="zone"></div>
  </div>
  <div>
    <h3>Dependent Variable (DV)</h3>
    <div id="dv-zone" class="zone"></div>
  </div>
  <div>
    <h3>Control Variables (CV)</h3>
    <div id="cv-zone" class="zone"></div>
  </div>

  <!-- Action Inputs for IV and DV -->
  <div>
    <h3>Specify Actions</h3>
    <div class="inputField">
      <label for="ivAction">IV Action (what does the independent variable do?)</label><br>
      <input type="text" id="ivAction" placeholder="e.g., increases, decreases">
    </div>
    <div class="inputField">
      <label for="dvAction">DV Response (what will the dependent variable do?)</label><br>
      <input type="text" id="dvAction" placeholder="e.g., increases, decreases">
    </div>
  </div>

  <!-- Hypothesis Display -->
  <h2>Your Hypothesis:</h2>
  <p id="hypothesisText">Drag variables and specify actions to see your hypothesis.</p>

  <!-- Reset Button -->
  <button id="resetButton">Reset Experiment</button>

  <script>
    // ---------------------------
    // Drag and Drop functionality
    // ---------------------------
    const draggables = document.querySelectorAll('.draggable');
    draggables.forEach(elem => {
      elem.addEventListener('dragstart', dragStart);
    });

    function dragStart(e) {
      // Store the variable name in the drag data
      e.dataTransfer.setData('text/plain', e.target.getAttribute('data-variable'));
    }

    // Set up all drop zones so that they allow drops
    const zones = document.querySelectorAll('.zone');
    zones.forEach(zone => {
      zone.addEventListener('dragover', dragOver);
      zone.addEventListener('dragleave', dragLeave);
      zone.addEventListener('drop', drop);
    });

    function dragOver(e) {
      e.preventDefault();  // Necessary to allow dropping
      e.currentTarget.classList.add('hovered');
    }

    function dragLeave(e) {
      e.currentTarget.classList.remove('hovered');
    }

    function drop(e) {
      e.preventDefault();
      e.currentTarget.classList.remove('hovered');
      const variable = e.dataTransfer.getData('text/plain');

      // Create a clone of the dragged variable to place in the drop zone
      const newElem = document.createElement('div');
      newElem.className = 'draggable';
      newElem.textContent = variable;
      newElem.setAttribute('data-variable', variable);
      newElem.setAttribute('draggable', 'true');

      // Allow removal: double-click to remove an item from the zone
      newElem.addEventListener('dblclick', function() {
        e.currentTarget.removeChild(newElem);
        updateHypothesis();
      });
      
      // Enable re–dragging from the drop zone if desired
      newElem.addEventListener('dragstart', dragStart);

      e.currentTarget.appendChild(newElem);
      updateHypothesis();
    }

    // ---------------------------
    // Hypothesis Generator
    // ---------------------------
    const ivActionInput = document.getElementById('ivAction');
    const dvActionInput = document.getElementById('dvAction');

    // Update hypothesis when text inputs change
    ivActionInput.addEventListener('input', updateHypothesis);
    dvActionInput.addEventListener('input', updateHypothesis);

    function updateHypothesis() {
      // Get the variable names from each drop zone
      const ivZone = document.getElementById('iv-zone');
      const dvZone = document.getElementById('dv-zone');
      const cvZone = document.getElementById('cv-zone');

      const ivVariables = Array.from(ivZone.children).map(child => child.getAttribute('data-variable'));
      const dvVariables = Array.from(dvZone.children).map(child => child.getAttribute('data-variable'));
      const cvVariables = Array.from(cvZone.children).map(child => child.getAttribute('data-variable'));

      // Get the actions from the text fields (or show a placeholder if none provided)
      const ivAction = ivActionInput.value.trim() || "[does something]";
      const dvAction = dvActionInput.value.trim() || "[does something else]";

      let hypothesis = "";
      if (ivVariables.length === 0 && dvVariables.length === 0 && cvVariables.length === 0) {
        hypothesis = "Drag variables and specify actions to see your hypothesis.";
      } else {
        // Build the hypothesis sentence
        if (ivVariables.length > 0) {
          hypothesis += "If " + ivVariables.join(" and ") + " " + ivAction;
        } else {
          hypothesis += "If [Independent Variable] " + ivAction;
        }
        if (dvVariables.length > 0) {
          hypothesis += ", then " + dvVariables.join(" and ") + " " + dvAction;
        } else {
          hypothesis += ", then [Dependent Variable] " + dvAction;
        }
        if (cvVariables.length > 0) {
          hypothesis += " provided that " + cvVariables.join(", ") + " remain constant.";
        } else {
          hypothesis += " provided that all other variables remain constant.";
        }
      }
      
      document.getElementById('hypothesisText').textContent = hypothesis;
    }

    // ---------------------------
    // Reset Button Functionality
    // ---------------------------
    document.getElementById('resetButton').addEventListener('click', function() {
      document.getElementById('iv-zone').innerHTML = "";
      document.getElementById('dv-zone').innerHTML = "";
      document.getElementById('cv-zone').innerHTML = "";
      ivActionInput.value = "";
      dvActionInput.value = "";
      updateHypothesis();
    });
  </script>
</body>
</html>
