<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3D Skeleton Model - Random Poses</title>
  <style>
    body { margin: 0; overflow: hidden; }
    canvas { display: block; }
  </style>
</head>
<body>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script>
    // Initialize Scene, Camera, and Renderer
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    const renderer = new THREE.WebGLRenderer();
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // Create Bone (Line-Based)
    function createBone(length) {
      const material = new THREE.LineBasicMaterial({ color: 0xffffff });
      const points = [new THREE.Vector3(0, 0, 0), new THREE.Vector3(0, length, 0)];
      const geometry = new THREE.BufferGeometry().setFromPoints(points);
      return new THREE.Line(geometry, material);
    }

    // Skeleton Class
    class Skeleton {
      constructor(position = { x: 0, y: 0, z: 0 }) {
        this.group = new THREE.Group();

        // --- SPINE ---
        this.spineBase = createBone(1);
        this.spineMiddle = createBone(1);
        this.spineUpper = createBone(1);

        this.spineMiddle.position.y = 1;
        this.spineUpper.position.y = 1;

        this.spineBase.add(this.spineMiddle);
        this.spineMiddle.add(this.spineUpper);
        this.group.add(this.spineBase);

        // --- HEAD ---
        this.neck = createBone(0.5);
        this.head = createBone(0.5);
        this.neck.position.y = 1;
        this.head.position.y = 0.5;

        this.spineUpper.add(this.neck);
        this.neck.add(this.head);

        // --- ARMS (LEFT) ---
        this.leftShoulder = createBone(0.5);
        this.leftUpperArm = createBone(1);
        this.leftLowerArm = createBone(1);
        this.leftHand = createBone(0.5);

        this.leftShoulder.position.set(-0.5, 1, 0);
        this.leftUpperArm.position.y = 0.5;
        this.leftLowerArm.position.y = 1;
        this.leftHand.position.y = 1;

        this.spineUpper.add(this.leftShoulder);
        this.leftShoulder.add(this.leftUpperArm);
        this.leftUpperArm.add(this.leftLowerArm);
        this.leftLowerArm.add(this.leftHand);

        // --- ARMS (RIGHT) ---
        this.rightShoulder = createBone(0.5);
        this.rightUpperArm = createBone(1);
        this.rightLowerArm = createBone(1);
        this.rightHand = createBone(0.5);

        this.rightShoulder.position.set(0.5, 1, 0);
        this.rightUpperArm.position.y = 0.5;
        this.rightLowerArm.position.y = 1;
        this.rightHand.position.y = 1;

        this.spineUpper.add(this.rightShoulder);
        this.rightShoulder.add(this.rightUpperArm);
        this.rightUpperArm.add(this.rightLowerArm);
        this.rightLowerArm.add(this.rightHand);

        // --- LEGS (LEFT) ---
        this.leftHip = createBone(0.5);
        this.leftThigh = createBone(1.5);
        this.leftShin = createBone(1.5);
        this.leftFoot = createBone(0.5);

        this.leftHip.position.set(-0.5, -1, 0);
        this.leftThigh.position.y = -0.5;
        this.leftShin.position.y = -1.5;
        this.leftFoot.position.y = -1.5;

        this.spineBase.add(this.leftHip);
        this.leftHip.add(this.leftThigh);
        this.leftThigh.add(this.leftShin);
        this.leftShin.add(this.leftFoot);

        // --- LEGS (RIGHT) ---
        this.rightHip = createBone(0.5);
        this.rightThigh = createBone(1.5);
        this.rightShin = createBone(1.5);
        this.rightFoot = createBone(0.5);

        this.rightHip.position.set(0.5, -1, 0);
        this.rightThigh.position.y = -0.5;
        this.rightShin.position.y = -1.5;
        this.rightFoot.position.y = -1.5;

        this.spineBase.add(this.rightHip);
        this.rightHip.add(this.rightThigh);
        this.rightThigh.add(this.rightShin);
        this.rightShin.add(this.rightFoot);

        this.group.position.set(position.x, position.y, position.z);
        scene.add(this.group);
      }

      // Randomized Movements within Constraints
      moveRandom() {
        const time = Date.now() * 0.001;

        // Arms
        this.leftUpperArm.rotation.z = Math.sin(time + Math.random() * 10) * 0.5;
        this.leftLowerArm.rotation.z = Math.cos(time + Math.random() * 10) * 0.7;
        this.rightUpperArm.rotation.z = Math.cos(time + Math.random() * 10) * 0.5;
        this.rightLowerArm.rotation.z = Math.sin(time + Math.random() * 10) * 0.7;

        // Legs
        this.leftThigh.rotation.x = Math.sin(time + Math.random() * 10) * 0.3;
        this.leftShin.rotation.x = Math.cos(time + Math.random() * 10) * 0.5;
        this.rightThigh.rotation.x = Math.sin(time + Math.random() * 10) * 0.3;
        this.rightShin.rotation.x = Math.cos(time + Math.random() * 10) * 0.5;

        // Head
        this.head.rotation.y = Math.sin(time * 0.3 + Math.random() * 10) * 0.2;
      }
    }

    // Create 16 Random Skeletons
    const skeletons = [];
    for (let i = 0; i < 16; i++) {
      const x = (i % 4) * 2 - 4;
      const z = Math.floor(i / 4) * 2 - 4;
      const skeleton = new Skeleton({ x: x, y: 0, z: z });
      skeletons.push(skeleton);
    }

    // Camera Position
    camera.position.set(0, 5, 15);
    camera.lookAt(0, 0, 0);

    // Animation Loop
    function animate() {
      requestAnimationFrame(animate);
      skeletons.forEach(skeleton => skeleton.moveRandom());
      renderer.render(scene, camera);
    }

    animate();
  </script>
</body>
</html>