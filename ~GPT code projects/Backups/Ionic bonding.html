<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ion Bonding Simulation</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }

        #periodic-table {
            display: grid;
            grid-template-columns: repeat(7, 1fr); /* 7 columns */
            gap: 5px;
            max-width: 100%;
            margin: 10px;
        }

        .element {
            background-color: #f0f0f0;
            border: 1px solid #ccc;
            padding: 5px;
            text-align: center;
            font-size: 12px;
            cursor: pointer;
            border-radius: 5px;
        }

        .element:hover {
            background-color: #ddd;
        }

        .group-label {
            grid-column: span 7;
            text-align: center;
            font-weight: bold;
            margin-top: 10px;
            background-color: #eee;
            padding: 5px;
            border-radius: 5px;
        }

        #simulation {
            height: 70vh; /* Increased height for more space */
            background-color: #f9f9f9;
            border-top: 2px solid #333;
            position: relative;
            overflow: hidden;
        }

        .ion {
            position: absolute;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
            text-align: center;
        }

        .compound {
            position: absolute;
            border: 2px solid black; /* Black circle around compounds */
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 8px;
            font-weight: bold;
            text-align: center;
        }

        .container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            resize: vertical;
        }

        /* Soft colors based on real-life element colors */
        .Li { background-color: #d7eaff; }
        .Na { background-color: #ffc0cb; }
        .K { background-color: #e4f1ff; }
        .Rb { background-color: #ffddcc; }
        .Cs { background-color: #ffebcc; }
        .Be { background-color: #c7ffe5; }
        .Mg { background-color: #d9ffb3; }
        .Ca { background-color: #ffb3b3; }
        .Sr { background-color: #e6e6ff; }
        .Ba { background-color: #fffacd; }
        .Sc { background-color: #f0f0f0; }
        .Ti { background-color: #c0c0c0; }
        .V { background-color: #e6ffe6; }
        .Cr { background-color: #ffe5e5; }
        .Mn { background-color: #e0f7fa; }
        .Fe { background-color: #ffa07a; }
        .Co { background-color: #add8e6; }
        .Ni { background-color: #dcdcdc; }
        .Cu { background-color: #c08040; }
        .Zn { background-color: #d7d7d7; }
        .Ag { background-color: #d9d9d9; }
        .Cd { background-color: #ffdead; }
        .Au { background-color: #ffd700; }
        .Hg { background-color: #c0c0c0; }
        .Al { background-color: #d8bfd8; }
        .Ga { background-color: #e6e6fa; }
        .In { background-color: #ffcccb; }
        .Sn { background-color: #e5e5e5; }
        .Pb { background-color: #a9a9a9; }
        .F { background-color: #e0ffff; }
        .Cl { background-color: #d3ffd3; }
        .Br { background-color: #f5deb3; }
        .I { background-color: #f4c2c2; }
        .O { background-color: #ffcccb; }
        .S { background-color: #f5f5dc; }
        .Se { background-color: #ffb3b3; }
        .Te { background-color: #e6e6e6; }
        .N { background-color: #add8e6; }
        .P { background-color: #ffcccb; }

    </style>
</head>
<body>
    <div class="container">
        <div id="periodic-table">
            <!-- Group 1, Group 2, Transition Metals (2 columns), Post-transition Metals, Anions in 2 columns -->
        </div>

        <!-- Simulation area for Brownian motion -->
        <div id="simulation"></div>
    </div>

    <script>
        const group1 = [
            { symbol: 'Li', name: 'Lithium', charge: 1, class: 'Li' },
            { symbol: 'Na', name: 'Sodium', charge: 1, class: 'Na' },
            { symbol: 'K', name: 'Potassium', charge: 1, class: 'K' },
            { symbol: 'Rb', name: 'Rubidium', charge: 1, class: 'Rb' },
            { symbol: 'Cs', name: 'Cesium', charge: 1, class: 'Cs' }
        ];

        const group2 = [
            { symbol: 'Be', name: 'Beryllium', charge: 2, class: 'Be' },
            { symbol: 'Mg', name: 'Magnesium', charge: 2, class: 'Mg' },
            { symbol: 'Ca', name: 'Calcium', charge: 2, class: 'Ca' },
            { symbol: 'Sr', name: 'Strontium', charge: 2, class: 'Sr' },
            { symbol: 'Ba', name: 'Barium', charge: 2, class: 'Ba' }
        ];

        const transitionMetals1 = [
            { symbol: 'Sc', name: 'Scandium', charge: 3, class: 'Sc' },
            { symbol: 'Ti', name: 'Titanium', charge: 2, class: 'Ti' },
            { symbol: 'V', name: 'Vanadium', charge: 2, class: 'V' },
            { symbol: 'Cr', name: 'Chromium', charge: 3, class: 'Cr' },
            { symbol: 'Mn', name: 'Manganese', charge: 2, class: 'Mn' }
        ];

        const transitionMetals2 = [
            { symbol: 'Fe', name: 'Iron', charge: 2, class: 'Fe' },
            { symbol: 'Co', name: 'Cobalt', charge: 2, class: 'Co' },
            { symbol: 'Ni', name: 'Nickel', charge: 2, class: 'Ni' },
            { symbol: 'Cu', name: 'Copper', charge: 2, class: 'Cu' },
            { symbol: 'Zn', name: 'Zinc', charge: 2, class: 'Zn' }
        ];

        const postTransitionMetals = [
            { symbol: 'Al', name: 'Aluminum', charge: 3, class: 'Al' },
            { symbol: 'Ga', name: 'Gallium', charge: 3, class: 'Ga' },
            { symbol: 'In', name: 'Indium', charge: 3, class: 'In' },
            { symbol: 'Sn', name: 'Tin', charge: 2, class: 'Sn' },
            { symbol: 'Pb', name: 'Lead', charge: 2, class: 'Pb' }
        ];

        const anions = [
            { symbol: 'F', name: 'Fluorine', charge: -1, class: 'F' },
            { symbol: 'Cl', name: 'Chlorine', charge: -1, class: 'Cl' },
            { symbol: 'Br', name: 'Bromine', charge: -1, class: 'Br' },
            { symbol: 'I', name: 'Iodine', charge: -1, class: 'I' },
            { symbol: 'O', name: 'Oxygen', charge: -2, class: 'O' },
            { symbol: 'S', name: 'Sulfur', charge: -2, class: 'S' },
            { symbol: 'Se', name: 'Selenium', charge: -2, class: 'Se' },
            { symbol: 'Te', name: 'Tellurium', charge: -2, class: 'Te' },
            { symbol: 'N', name: 'Nitrogen', charge: -3, class: 'N' },
            { symbol: 'P', name: 'Phosphorus', charge: -3, class: 'P' }
        ];

        // Display ions in columns
        function displayIons(ions, group) {
            ions.forEach(ion => {
                const div = document.createElement('div');
                div.classList.add('element', ion.class);
                div.innerHTML = `<strong>${ion.symbol}</strong><br>${ion.charge > 0 ? '+' : ''}${ion.charge}`;
                div.onclick = () => addIons(ion);
                group.appendChild(div);
            });
        }

        const periodicTable = document.getElementById('periodic-table');

        // Create groups
        const group1Div = document.createElement('div');
        const group2Div = document.createElement('div');
        const transition1Div = document.createElement('div');
        const transition2Div = document.createElement('div');
        const postTransitionDiv = document.createElement('div');
        const anionDiv1 = document.createElement('div');
        const anionDiv2 = document.createElement('div'); // Second column for anions

        displayIons(group1, group1Div);
        displayIons(group2, group2Div);
        displayIons(transitionMetals1, transition1Div);
        displayIons(transitionMetals2, transition2Div);
        displayIons(postTransitionMetals, postTransitionDiv);
        
        // Split anions into two columns
        displayIons(anions.slice(0, Math.ceil(anions.length / 2)), anionDiv1);
        displayIons(anions.slice(Math.ceil(anions.length / 2)), anionDiv2);

        periodicTable.appendChild(group1Div);
        periodicTable.appendChild(group2Div);
        periodicTable.appendChild(transition1Div);
        periodicTable.appendChild(transition2Div);
        periodicTable.appendChild(postTransitionDiv);
        periodicTable.appendChild(anionDiv1);
        periodicTable.appendChild(anionDiv2);

        // Brownian motion and ion display
        const simulationArea = document.getElementById('simulation');

        function addIons(ion) {
            const count = 10;
            for (let i = 0; i < count; i++) {
                const ionDiv = document.createElement('div');
                ionDiv.classList.add('ion', ion.class);
                ionDiv.dataset.charge = ion.charge;
                ionDiv.dataset.symbol = ion.symbol;
                ionDiv.dataset.name = ion.name;
                ionDiv.innerHTML = `${ion.symbol} ${ion.charge > 0 ? '+' : ''}${ion.charge}`;
                ionDiv.style.top = `${Math.random() * simulationArea.clientHeight}px`;
                ionDiv.style.left = `${Math.random() * simulationArea.clientWidth}px`;
                simulationArea.appendChild(ionDiv);
                animateIon(ionDiv);
            }
        }

        // Brownian motion with gravity, boundary wrapping, and ionic bonding
        function animateIon(ionDiv) {
            let posX = parseInt(ionDiv.style.left);
            let posY = parseInt(ionDiv.style.top);
            let velX = (Math.random() - 0.5) * 2;
            let velY = (Math.random() - 0.5) * 2;
            const radius = ionDiv.offsetWidth / 2;

            function move() {
                posX += velX;
                posY += velY + 0.05; // Gravity

                // Wrap around left/right boundaries
                if (posX < 0) posX = simulationArea.clientWidth;
                if (posX > simulationArea.clientWidth) posX = 0;

                // Bounce off top and bottom boundaries
                if (posY < 0 || posY > simulationArea.clientHeight - ionDiv.offsetHeight) {
                    velY *= -1;
                }

                // Collision detection with other ions
                const ions = document.querySelectorAll('.ion');
                ions.forEach(otherIon => {
                    if (otherIon !== ionDiv) {
                        const otherX = parseInt(otherIon.style.left);
                        const otherY = parseInt(otherIon.style.top);
                        const distX = posX - otherX;
                        const distY = posY - otherY;
                        const distance = Math.sqrt(distX * distX + distY * distY);

                        // Pauli exclusion principle: bounce off each other
                        if (distance < radius * 2) {
                            const angle = Math.atan2(distY, distX);
                            velX = Math.cos(angle) * 2;
                            velY = Math.sin(angle) * 2;

                            // Check for ionic bonding
                            const ionCharge = parseInt(ionDiv.dataset.charge);
                            const otherCharge = parseInt(otherIon.dataset.charge);

                            // If charges add up to zero, form an ionic bond
                            if (ionCharge + otherCharge === 0) {
                                bondIons(ionDiv, otherIon);
                            }
                        }
                    }
                });

                // Update position
                ionDiv.style.left = `${posX}px`;
                ionDiv.style.top = `${posY}px`;

                requestAnimationFrame(move);
            }
            move();
        }

        // Function to bond ions and label them with the compound name
        function bondIons(ion1, ion2) {
            const cation = ion1.dataset.charge > 0 ? ion1 : ion2;
            const anion = ion1.dataset.charge < 0 ? ion1 : ion2;

            // Form a compound name with cation before anion
            const compoundName = `${cation.dataset.symbol}${anion.dataset.symbol}`;
            const fullName = `${cation.dataset.name} ${anion.dataset.name}`;
            const bondDiv = document.createElement('div');
            bondDiv.classList.add('compound');
            bondDiv.style.top = ion1.style.top;
            bondDiv.style.left = ion1.style.left;
            bondDiv.style.width = ion1.style.width;
            bondDiv.style.height = ion1.style.height;
            bondDiv.innerHTML = `${compoundName}<br>(${fullName})`;
            simulationArea.appendChild(bondDiv);
            simulationArea.removeChild(ion1);
            simulationArea.removeChild(ion2);
            animateIon(bondDiv);
        }
    </script>
</body>
</html>
