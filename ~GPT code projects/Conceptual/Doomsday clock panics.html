<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Doomsday Clock Plot</title>
  <!-- Include Chart.js from CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: sans-serif;
      margin: 20px;
    }
    #chartContainer {
      max-width: 800px;
      margin: auto;
    }
    button {
      margin-bottom: 20px;
      padding: 8px 16px;
      font-size: 1rem;
    }
  </style>
</head>
<body>
  <h1>Doomsday Clock: Seconds to Midnight Over Time</h1>
  <p>
    This chart plots the “Seconds to Midnight” value (from the Doomsday Clock data)
    versus the year. Click the button below to toggle between a linear and logarithmic y‑axis.
  </p>
  <button id="toggleScale">Switch to Logarithmic</button>
  <div id="chartContainer">
    <canvas id="myChart"></canvas>
  </div>

  <script>
    // Data extracted from your table:
    // Years and corresponding "Seconds" values.
    const years = [
      1947, 1949, 1953, 1960, 1963, 1968, 1969, 1972, 1974, 1980,
      1981, 1984, 1988, 1990, 1991, 1995, 1998, 2002, 2007, 2010,
      2012, 2015, 2017, 2018, 2020, 2022, 2023, 2024, 2025
    ];
    const seconds = [
      420, 180, 120, 420, 720, 420, 600, 720, 540, 420,
      240, 180, 360, 600, 1020, 840, 540, 420, 300, 360,
      300, 180, 150, 120, 160, 100, 90, 90, 89
    ];

    // Start with a linear y-axis.
    let currentScale = 'linear';

    // Set up the Chart.js configuration.
    const ctx = document.getElementById('myChart').getContext('2d');
    const chartConfig = {
      type: 'line',
      data: {
        labels: years,
        datasets: [{
          label: 'Seconds to Midnight',
          data: seconds,
          fill: false,
          borderColor: 'red',
          backgroundColor: 'red',
          tension: 0.1
        }]
      },
      options: {
        responsive: true,
        scales: {
          y: {
            type: currentScale, // "linear" or "logarithmic"
            beginAtZero: false,
            title: {
              display: true,
              text: 'Seconds to Midnight'
            },
            // When using a logarithmic scale, Chart.js requires a minimum > 0.
            min: (currentScale === 'logarithmic') ? 1 : undefined
          },
          x: {
            title: {
              display: true,
              text: 'Year'
            }
          }
        },
        plugins: {
          legend: {
            display: true
          }
        }
      }
    };

    // Create the chart.
    const myChart = new Chart(ctx, chartConfig);

    // Add a listener for the toggle button.
    document.getElementById('toggleScale').addEventListener('click', function() {
      // Toggle the scale type.
      currentScale = (currentScale === 'linear') ? 'logarithmic' : 'linear';
      myChart.options.scales.y.type = currentScale;

      // For a logarithmic scale, ensure the minimum value is set (Chart.js requires > 0).
      if (currentScale === 'logarithmic') {
        myChart.options.scales.y.min = 1;
        this.textContent = 'Switch to Linear';
      } else {
        // Remove the minimum when using linear scale.
        delete myChart.options.scales.y.min;
        this.textContent = 'Switch to Logarithmic';
      }
      myChart.update();
    });
  </script>
</body>
</html>
