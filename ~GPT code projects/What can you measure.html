<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
    <title>SI Base Units - Guessing Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #4a90e2;
            --success: #50c878;
            --warning: #ff6b6b;
            --bg: #1a1a2e;
            --surface: #16213e;
            --text: #eaeaea;
            --accent: #ffd700;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--bg) 0%, #0f3460 100%);
            color: var(--text);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
            touch-action: manipulation;
            transition: background 2s ease-in-out;
        }

        body.victory-mode {
            animation: backgroundPulse 4s ease-in-out infinite;
        }

        @keyframes backgroundPulse {
            0%, 100% { 
                background: linear-gradient(135deg, var(--bg) 0%, #0f3460 100%);
            }
            50% { 
                background: linear-gradient(135deg, #1a1a3e 0%, #0f4060 100%);
            }
        }

        /* Header */
        .header {
            text-align: center;
            padding: clamp(0.75rem, 2vw, 1.25rem);
            background: rgba(22, 33, 62, 0.8);
            backdrop-filter: blur(10px);
        }

        .header h1 {
            font-size: clamp(1.5rem, 5vw, 2.5rem);
            color: var(--accent);
            margin-bottom: 0.25rem;
        }

        .header p {
            font-size: clamp(0.9rem, 2.5vw, 1.1rem);
            opacity: 0.9;
        }

        /* Main Game Area */
        .game-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: clamp(0.5rem, 2vw, 1rem);
            gap: clamp(0.5rem, 1.5vw, 1rem);
            max-width: 1400px;
            width: 100%;
            margin: 0 auto;
        }

        /* Encouraging Phrase */
        .encouragement {
            text-align: center;
            min-height: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0.5rem;
        }

        .phrase {
            font-size: clamp(1rem, 3vw, 1.3rem);
            color: var(--accent);
            opacity: 0;
            animation: fadeInOut 30s ease-in-out;
            font-style: italic;
        }

        @keyframes fadeInOut {
            0% { opacity: 0; transform: translateY(10px); }
            5% { opacity: 1; transform: translateY(0); }
            95% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(10px); }
        }

        /* Input Section */
        .input-section {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            align-items: center;
        }

        .input-wrapper {
            display: flex;
            gap: 0.5rem;
            width: 100%;
            max-width: 600px;
        }

        #guessInput {
            flex: 1;
            padding: clamp(0.5rem, 1.5vw, 0.75rem);
            font-size: clamp(1rem, 3vw, 1.2rem);
            border: 3px solid var(--primary);
            border-radius: 8px;
            background: var(--surface);
            color: var(--text);
            transition: all 0.3s;
            min-height: 44px;
        }

        #guessInput:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
        }

        .button {
            padding: clamp(0.75rem, 2vw, 1rem) clamp(1.5rem, 3vw, 2rem);
            font-size: clamp(0.9rem, 2.5vw, 1.1rem);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            min-height: 44px;
            min-width: 44px;
            touch-action: manipulation;
        }

        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        .button:active {
            transform: translateY(0);
        }

        .button-primary {
            background: var(--primary);
            color: white;
        }

        .button-danger {
            background: var(--warning);
            color: white;
        }

        .button-secondary {
            background: var(--surface);
            color: var(--text);
            border: 2px solid var(--primary);
        }

        .controls {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Trophy Table */
        .trophy-section {
            background: rgba(22, 33, 62, 0.6);
            padding: clamp(0.5rem, 1.5vw, 1rem);
            border-radius: 12px;
            backdrop-filter: blur(10px);
        }

        .trophy-section h2 {
            color: var(--accent);
            margin-bottom: 1rem;
            font-size: clamp(1.2rem, 3vw, 1.5rem);
            text-align: center;
        }

        .trophy-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 0.5rem;
        }

        .trophy-item {
            background: transparent;
            padding: 0.5rem;
            border-radius: 8px;
            border: 2px solid transparent;
            transition: all 0.3s;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .trophy-item.found {
            border-color: var(--success);
            background: rgba(80, 200, 120, 0.2);
            animation: celebrate 0.6s ease-out;
        }

        .trophy-item .name {
            font-size: clamp(1rem, 2.5vw, 1.2rem);
            font-weight: bold;
            color: var(--success);
        }

        .trophy-item .placeholder {
            display: none;
        }

        @keyframes celebrate {
            0% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.2) rotate(5deg); }
            50% { transform: scale(1.1) rotate(-5deg); }
            75% { transform: scale(1.2) rotate(3deg); }
            100% { transform: scale(1) rotate(0deg); }
        }

        /* Wrong Guesses Pile */
        .wrong-pile {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 200px;
            pointer-events: none;
            overflow: hidden;
            z-index: 100;
        }

        .wrong-guess {
            position: absolute;
            background: #666666;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-size: clamp(0.8rem, 2vw, 1rem);
            animation: fall 1.5s ease-in forwards;
            box-shadow: 0 4px 8px rgba(0,0,0,0.5);
            white-space: nowrap;
        }

        @keyframes fall {
            0% {
                top: -800px;
                transform: rotate(0deg);
                opacity: 1;
            }
            100% {
                top: var(--final-y);
                transform: rotate(var(--rotate));
                opacity: 1;
            }
        }

        /* Status Bar */
        .status-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(22, 33, 62, 0.95);
            padding: 0.75rem;
            text-align: center;
            font-size: clamp(0.85rem, 2vw, 1rem);
            z-index: 50;
            transition: all 0.3s;
        }

        .status-bar.success {
            background: rgba(80, 200, 120, 0.95);
            color: white;
        }

        .status-bar.error {
            background: rgba(255, 107, 107, 0.95);
            color: white;
        }

        /* Confetti */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: var(--accent);
            pointer-events: none;
            z-index: 1000;
            animation: confetti-fall 3s ease-out forwards;
        }

        @keyframes confetti-fall {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        /* Victory Screen */
        /* Inline Victory Message */
        .victory-message {
            display: none;
            text-align: center;
            padding: clamp(1rem, 2vw, 1.5rem);
            background: rgba(22, 33, 62, 0.9);
            border-radius: 16px;
            margin: 0 auto;
            max-width: 600px;
            animation: gentlePulse 3s ease-in-out infinite;
        }

        .victory-message.show {
            display: block;
        }

        .victory-message h2 {
            font-size: clamp(1.5rem, 5vw, 2.5rem);
            color: var(--accent);
            margin-bottom: 0.5rem;
        }

        .victory-message p {
            font-size: clamp(1rem, 3vw, 1.2rem);
            margin-bottom: 1rem;
        }

        @keyframes gentlePulse {
            0%, 100% { 
                transform: scale(1);
                box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
            }
            50% { 
                transform: scale(1.02);
                box-shadow: 0 0 40px rgba(255, 215, 0, 0.5);
            }
        }

        /* Sparkles */
        .sparkle {
            position: fixed;
            width: 4px;
            height: 4px;
            background: var(--accent);
            border-radius: 50%;
            pointer-events: none;
            z-index: 1999;
            animation: sparkle-twinkle 2s ease-in-out infinite;
            box-shadow: 0 0 8px var(--accent);
        }

        @keyframes sparkle-twinkle {
            0%, 100% { opacity: 0; transform: scale(0); }
            50% { opacity: 1; transform: scale(1); }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Undo/Redo buttons */
        /* EASTER EGG: Secret animation when typing "physics" */
        @keyframes secret-pulse {
            0%, 100% { 
                box-shadow: 0 0 0 0 rgba(74, 144, 226, 0.7);
            }
            50% { 
                box-shadow: 0 0 20px 10px rgba(74, 144, 226, 0);
            }
        }

        .secret-active {
            animation: secret-pulse 2s ease-in-out infinite;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .trophy-grid {
                grid-template-columns: 1fr;
            }
            
            .input-wrapper {
                flex-direction: column;
            }
        }

        /* Tooltips */
        [data-tooltip] {
            position: relative;
        }

        [data-tooltip]:hover::before {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 120%;
            left: 50%;
            transform: translateX(-50%);
            padding: 0.5rem;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            border-radius: 4px;
            font-size: 0.85rem;
            white-space: nowrap;
            z-index: 1000;
            animation: fadeIn 0.3s;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>What can you actually measure</h1>
        <p>...not calculate, measure</p>
    </div>

    <div class="game-container">
        <div class="encouragement">
            <div class="phrase" id="phrase"></div>
        </div>

        <div class="input-section">
            <div class="input-wrapper">
                <input 
                    type="text" 
                    id="guessInput" 
                    placeholder="What can you measure"
                    autocomplete="off"
                    spellcheck="false"
                >
            </div>
            <div class="controls">
                <button class="button button-danger" id="concedeBtn" data-tooltip="Give up and see the answers">
                    Concede
                </button>
                <button class="button button-secondary" id="resetBtn" data-tooltip="Start fresh">
                    Reset Game
                </button>
            </div>
        </div>

        <div class="victory-message" id="victoryMessage">
            <h2>Congratulations</h2>
            <p>You have discovered all seven fundamental measurements</p>
            <button class="button button-primary" onclick="resetGame()">
                Play Again
            </button>
        </div>

        <div class="trophy-section">
            <div class="trophy-grid" id="trophyGrid"></div>
        </div>
    </div>

    <div class="wrong-pile" id="wrongPile"></div>

    <div class="status-bar" id="statusBar">
        Think about the fundamental ways we measure our physical universe
    </div>

    <script>
        // SI Base Units - the seven fundamental measurements
        const SI_BASE_UNITS = [
            {
                canonical: 'meter',
                aliases: ['meter', 'metre', 'meters', 'metres', 'length', 'distance', 'm'],
                display: 'Meter (Length)'
            },
            {
                canonical: 'kilogram',
                aliases: ['kilogram', 'kilograms', 'kg', 'mass', 'weight'],
                display: 'Kilogram (Mass)'
            },
            {
                canonical: 'second',
                aliases: ['second', 'seconds', 's', 'time', 'duration'],
                display: 'Second (Time)'
            },
            {
                canonical: 'ampere',
                aliases: ['ampere', 'amperes', 'amp', 'amps', 'a', 'current', 'electric current', 'electricity'],
                display: 'Ampere (Electric Current)'
            },
            {
                canonical: 'kelvin',
                aliases: ['kelvin', 'k', 'temperature', 'temp', 'heat'],
                display: 'Kelvin (Temperature)'
            },
            {
                canonical: 'mole',
                aliases: ['mole', 'mol', 'moles', 'amount', 'substance', 'amount of substance'],
                display: 'Mole (Amount of Substance)'
            },
            {
                canonical: 'candela',
                aliases: ['candela', 'candelas', 'cd', 'luminous intensity', 'light', 'brightness', 'luminosity'],
                display: 'Candela (Luminous Intensity)'
            }
        ];

        // 30 encouraging phrases (no exclamation marks)
        const PHRASES = [
            "think about what makes the universe tick",
            "what are the building blocks of measurement",
            "every scientist starts here",
            "you're on the right track",
            "the answer is simpler than you think",
            "nature speaks in seven languages",
            "what would a physicist measure first",
            "consider the fundamentals",
            "you're closer than you realize",
            "trust your scientific intuition",
            "every measurement starts somewhere",
            "what can you count, what can you weigh",
            "think about the basic properties of matter",
            "energy, motion, matter... what else",
            "brilliant minds have asked this before you",
            "the universe reveals itself through measurement",
            "seven pillars hold up all of science",
            "you're doing great, keep thinking",
            "what makes a clock tick, a light shine",
            "consider the periodic table, consider waves",
            "temperature, distance... what else matters",
            "your curiosity will guide you",
            "every 'how much' needs a 'what'",
            "science is measurement, measurement is science",
            "the most fundamental things are often overlooked",
            "think small, think basic, think universal",
            "you're exploring the foundations of reality",
            "what qualities define all things",
            "from atoms to galaxies, what stays constant",
            "keep going, you're on a scientific journey",
            "思考宇宙如何运转",
            "测量的基石是什么",
            "每个科学家都从这里开始",
            "你走在正确的道路上",
            "答案比你想象的更简单",
            "大自然用七种语言说话",
            "物理学家会先测量什么",
            "考虑基本原理",
            "你比你意识到的更接近了",
            "相信你的科学直觉"
        ];

        // Game state
        let gameState = {
            foundUnits: new Set(),
            wrongGuesses: [],
            allGuesses: []
        };

        // Elements
        const guessInput = document.getElementById('guessInput');
        const phraseEl = document.getElementById('phrase');
        const trophyGrid = document.getElementById('trophyGrid');
        const statusBar = document.getElementById('statusBar');
        const wrongPile = document.getElementById('wrongPile');
        const victoryMessage = document.getElementById('victoryMessage');
        const concedeBtn = document.getElementById('concedeBtn');
        const resetBtn = document.getElementById('resetBtn');

        // EASTER EGG: Secret animation when typing "physics"
        let secretTyped = '';
        guessInput.addEventListener('input', () => {
            secretTyped += guessInput.value.slice(-1).toLowerCase();
            if (secretTyped.includes('physics')) {
                guessInput.classList.add('secret-active');
                setTimeout(() => guessInput.classList.remove('secret-active'), 2000);
                secretTyped = '';
            }
            if (secretTyped.length > 20) secretTyped = secretTyped.slice(-20);
        });

        // Initialize
        function init() {
            loadState();
            renderTrophies();
            startPhraseRotation();
            guessInput.focus();
        }

        // Phrase rotation
        let phraseInterval;
        function startPhraseRotation() {
            let index = 0;
            function showPhrase() {
                phraseEl.textContent = PHRASES[index];
                phraseEl.style.animation = 'none';
                setTimeout(() => {
                    phraseEl.style.animation = 'fadeInOut 30s ease-in-out';
                }, 10);
                index = (index + 1) % PHRASES.length;
                
                // Schedule next phrase with random delay between 30-70 seconds
                // (30s animation + 0-40s delay)
                const nextDelay = 30000 + Math.random() * 40000;
                setTimeout(showPhrase, nextDelay);
            }
            showPhrase();
        }

        // Render trophies
        function renderTrophies() {
            trophyGrid.innerHTML = '';
            SI_BASE_UNITS.forEach(unit => {
                const div = document.createElement('div');
                div.className = 'trophy-item';
                if (gameState.foundUnits.has(unit.canonical)) {
                    div.classList.add('found');
                    div.innerHTML = `<span class="name">${unit.display}</span>`;
                } else {
                    div.innerHTML = `<span class="placeholder">???</span>`;
                }
                trophyGrid.appendChild(div);
            });
        }

        // Normalize input
        function normalize(str) {
            return str.toLowerCase().trim().replace(/[^a-z\s]/g, '');
        }

        // Check guess
        function checkGuess(input) {
            const normalized = normalize(input);
            if (!normalized) return;

            // Check if already guessed
            if (gameState.allGuesses.includes(normalized)) {
                showStatus('You already tried that', 'error');
                return;
            }

            gameState.allGuesses.push(normalized);

            // Check against SI units
            for (const unit of SI_BASE_UNITS) {
                if (unit.aliases.includes(normalized)) {
                    if (gameState.foundUnits.has(unit.canonical)) {
                        showStatus('You already found that one', 'error');
                        return;
                    }
                    
                    // Correct guess
                    gameState.foundUnits.add(unit.canonical);
                    renderTrophies();
                    celebrate();
                    showStatus(`Yes, ${unit.display} is a fundamental measurement`, 'success');
                    saveState();
                    
                    if (gameState.foundUnits.size === 7) {
                        setTimeout(() => showVictory(), 1000);
                    }
                    return;
                }
            }

            // Wrong guess
            gameState.wrongGuesses.push(input);
            addWrongGuess(input);
            showStatus('Not a fundamental SI base unit, but keep trying', 'error');
            saveState();
        }

        // Add wrong guess to pile
        function addWrongGuess(text) {
            const guess = document.createElement('div');
            guess.className = 'wrong-guess';
            guess.textContent = text;
            
            // Random horizontal position
            guess.style.left = Math.random() * (window.innerWidth - 150) + 'px';
            
            // Random final vertical position within wrong-pile container (0-140px from top of container)
            // This keeps blocks visible above the status bar
            const finalY = Math.random() * 140;
            guess.style.setProperty('--final-y', finalY + 'px');
            
            // Random rotation
            guess.style.setProperty('--rotate', `${Math.random() * 360 - 180}deg`);
            
            wrongPile.appendChild(guess);
            
            // Blocks stay permanently (no removal)
        }

        // Celebration animation
        function celebrate() {
            // Confetti
            for (let i = 0; i < 30; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * window.innerWidth + 'px';
                    confetti.style.top = '0px';
                    confetti.style.background = `hsl(${Math.random() * 360}, 70%, 60%)`;
                    document.body.appendChild(confetti);
                    setTimeout(() => confetti.remove(), 3000);
                }, i * 50);
            }
        }

        // Show status
        function showStatus(message, type = '') {
            statusBar.textContent = message;
            statusBar.className = 'status-bar ' + type;
            setTimeout(() => {
                statusBar.className = 'status-bar';
            }, 3000);
        }

        // Victory
        function showVictory() {
            victoryMessage.classList.add('show');
            document.body.classList.add('victory-mode');
            celebrate();
            startContinuousSparkles();
        }

        // Continuous gentle sparkles
        let sparkleInterval;
        function startContinuousSparkles() {
            if (sparkleInterval) return;
            
            sparkleInterval = setInterval(() => {
                const sparkle = document.createElement('div');
                sparkle.className = 'sparkle';
                sparkle.style.left = Math.random() * window.innerWidth + 'px';
                sparkle.style.top = Math.random() * window.innerHeight + 'px';
                sparkle.style.animationDelay = Math.random() * 2 + 's';
                document.body.appendChild(sparkle);
                
                setTimeout(() => sparkle.remove(), 2000);
            }, 300);
        }

        function stopContinuousSparkles() {
            if (sparkleInterval) {
                clearInterval(sparkleInterval);
                sparkleInterval = null;
            }
            // Remove any existing sparkles
            document.querySelectorAll('.sparkle').forEach(s => s.remove());
        }

        // Concede
        function concede() {
            SI_BASE_UNITS.forEach(unit => {
                gameState.foundUnits.add(unit.canonical);
            });
            renderTrophies();
            showStatus('All SI base units revealed', 'success');
            saveState();
            setTimeout(() => showVictory(), 500);
        }

        // Reset game
        function resetGame() {
            stopContinuousSparkles();
            document.body.classList.remove('victory-mode');
            gameState = {
                foundUnits: new Set(),
                wrongGuesses: [],
                allGuesses: []
            };
            renderTrophies();
            wrongPile.innerHTML = '';
            victoryMessage.classList.remove('show');
            showStatus('Fresh start - find those fundamental units', '');
            guessInput.value = '';
            guessInput.focus();
            saveState();
        }

        // LocalStorage
        function saveState() {
            localStorage.setItem('siGameState', JSON.stringify({
                foundUnits: Array.from(gameState.foundUnits),
                wrongGuesses: gameState.wrongGuesses,
                allGuesses: gameState.allGuesses
            }));
        }

        function loadState() {
            const saved = localStorage.getItem('siGameState');
            if (saved) {
                try {
                    const state = JSON.parse(saved);
                    gameState.foundUnits = new Set(state.foundUnits);
                    gameState.wrongGuesses = state.wrongGuesses || [];
                    gameState.allGuesses = state.allGuesses || [];
                } catch (e) {
                    console.error('Failed to load state:', e);
                }
            }
        }

        // Event listeners
        guessInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault();
                const guess = guessInput.value.trim();
                if (guess) {
                    checkGuess(guess);
                    guessInput.value = '';
                }
            } else if (e.key === 'Escape') {
                guessInput.value = '';
            }
        });

        concedeBtn.addEventListener('click', concede);
        resetBtn.addEventListener('click', resetGame);

        // Auto-save
        window.addEventListener('beforeunload', saveState);
        document.addEventListener('visibilitychange', () => {
            if (document.hidden) saveState();
        });

        // Touch support
        let touchStartX = 0;
        let touchStartY = 0;

        document.addEventListener('touchstart', (e) => {
            touchStartX = e.touches[0].clientX;
            touchStartY = e.touches[0].clientY;
        }, { passive: true });

        document.addEventListener('touchend', (e) => {
            const touchEndX = e.changedTouches[0].clientX;
            const touchEndY = e.changedTouches[0].clientY;
            const deltaX = touchEndX - touchStartX;
            const deltaY = touchEndY - touchStartY;

            // Swipe detection (optional future feature)
            if (Math.abs(deltaX) > 100 && Math.abs(deltaY) < 50) {
                // Horizontal swipe
            }
        }, { passive: true });

        // Initialize game
        init();
    </script>
</body>
</html>