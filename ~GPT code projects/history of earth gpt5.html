<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Quick Overview of Earth's History — Interactive Timeline</title>
  <style>
    :root{
      --bg:#0b1020;          /* deep space */
      --panel:#101830;
      --ink:#e8f0ff;
      --muted:#9fb2d7;
      --accent:#6dd3ff;      /* cyan */
      --accent2:#ffd36d;     /* golden */
      --link:#7de8c6;
      --card:#121b36cc;
      --tick:#7893c6;
      --shadow:0 10px 30px rgba(0,0,0,.25);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: system-ui, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--ink); background: radial-gradient(1200px 800px at 70% -10%, #1a2452 0%, #0b1020 45%),
                        radial-gradient(800px 600px at 20% 120%, #152142 0%, #0b1020 60%);
      line-height:1.55;
    }
    header{
      position:sticky; top:0; z-index:50; backdrop-filter: blur(8px);
      background: linear-gradient(#0b1020cc,#0b1020cc);
      border-bottom:1px solid #ffffff12;
    }
    .bar{display:flex; align-items:center; gap:16px; padding:14px 20px; max-width:1200px; margin:0 auto}
    h1{font-size: clamp(20px, 3vw, 32px); margin:0; letter-spacing:.3px}
    .small{font-size:.95rem; color:var(--muted)}

    main{max-width:1200px; margin:0 auto; display:grid; grid-template-columns: 1fr 220px; gap:24px; padding: 24px 20px 64px}

    /* RIGHT-SIDE TIME SCALE */
    .scaleWrap{position:sticky; top:72px; height: calc(100vh - 96px)}
    .scale{
      position:relative; height:100%; width:100%; display:flex; align-items:center; justify-content:center;
      background: linear-gradient(180deg, #101634 0%, #0f1633 100%);
      border:1px solid #ffffff14; border-radius:16px; box-shadow: var(--shadow);
      padding:10px 0; overflow:hidden;
    }
    .axis{position:absolute; left:50%; transform:translateX(-50%); width:6px; height:86%; background:linear-gradient(180deg,#243056,#172043); border-radius:6px}
    .tick{position:absolute; left:calc(50% + 10px); width:100px; height:1px; background:var(--tick)}
    .tick label{position:absolute; left:8px; top:-9px; font-size:12px; color:var(--muted)}
    .pin{position:absolute; left:50%; transform:translate(-50%,-50%); width:16px; height:16px; border-radius:50%; background:var(--accent);
         box-shadow:0 0 0 6px #6dd3ff22, 0 6px 20px #6dd3ff66; transition: top .5s ease}
    .legend{position:absolute; bottom:8px; left:0; right:0; text-align:center; font-size:12px; color:var(--muted)}

    /* TIMELINE CONTENT */
    .timeline{position:relative}
    .gap{height:var(--h, 24px)}
    .event{background:var(--card); border:1px solid #ffffff14; border-radius:16px; padding:18px 18px; box-shadow: var(--shadow);
           display:grid; grid-template-columns: 120px 1fr; gap:16px; align-items:flex-start}
    .event + .event{margin-top:18px}
    .era{font-weight:600; color:var(--accent2); font-size:14px}
    .ga{font-variant-numeric: tabular-nums; color:var(--muted)}
    .title{margin:6px 0 6px; font-weight:700; font-size: clamp(18px, 2.4vw, 22px)}
    .desc{color:#dae5ff; font-size:15px}
    .media{grid-column: 1 / -1; margin-top:6px}
    figure{margin:12px 0 4px}
    figure img{width:100%; border-radius:12px; border:1px solid #ffffff12}
    figcaption{font-size:12px; color:var(--muted); margin-top:6px}
    a{color:var(--link); text-decoration:none}
    a:hover{text-decoration:underline}

    /* mini nav */
    .toc{display:flex; gap:8px; flex-wrap:wrap; margin-left:auto}
    .chip{border:1px solid #ffffff22; color:var(--ink); background:#0f1836; padding:6px 10px; border-radius:999px; font-size:12px; cursor:pointer}

    /* footer */
    footer{margin-top:48px; color:var(--muted)}

    /* small screens */
    @media (max-width: 840px){
      main{grid-template-columns: 1fr;}
      .scaleWrap{display:none}
      .event{grid-template-columns: 1fr}
      .bar{flex-wrap:wrap}
    }
  </style>
</head>
<body>
  <header>
    <div class="bar">
      <h1>Quick Overview of Earth’s History — Interactive Timeline</h1>
      <div class="toc" id="toc"></div>
      <div class="small">Scroll; click chips to jump. Images are inline, many link out.</div>
    </div>
  </header>

  <main>
    <section class="timeline" id="timeline"></section>

    <aside class="scaleWrap">
      <div class="scale" id="scale">
        <div class="axis" aria-hidden="true"></div>
        <!-- tick marks will be injected here -->
        <div class="pin" id="pin" title="Current section age"></div>
        <div class="legend">
          <div><strong>Relative Time Scale</strong></div>
          <div style="margin-top:4px">Left: content · Right: 4.6 Ga → Present</div>
          <div style="margin-top:6px" id="nowLabel">—</div>
        </div>
      </div>
    </aside>
  </main>

  <script>
    // === Data ===
    // Ages are in billions of years ago (Ga) except where noted in Myr (million years).
    const events = [
      {
        id:"formation",
        era:"Hadean",
        ga:4.54,
        title:"Formation of Earth",
        bullets:[
          "Accretion from the solar nebula; early Earth a molten ball bombarded by planetesimals.",
          "Likely giant impact leads to <a href='https://en.wikipedia.org/wiki/Giant-impact_hypothesis' target='_blank' rel='noopener'>Moon’s formation</a>.",
        ],
        media:[
          {
            src:"https://commons.wikimedia.org/wiki/Special:FilePath/Early%20earth%20(artist%27s%20concept).jpg",
            alt:"Artistic impression of early Hadean Earth with magma oceans",
            cap:"Hadean Earth — artist’s concept (Wikimedia Commons)."
          },
          {src:"https://upload.wikimedia.org/wikipedia/commons/1/1f/Moon_-_Giant_Impact_Hypothesis_-_Simple_model.png", alt:"Simple diagram of the giant-impact hypothesis for Moon formation", cap:"Giant-impact hypothesis — static diagram (Wikimedia Commons)."}
        ],
        links:[
          {text:"Britannica: Geologic history — development of atmosphere & oceans", href:"https://www.britannica.com/science/geologic-history-of-Earth/Development-of-the-atmosphere-and-oceans"}
        ]
      },
      {
        id:"early-earth",
        era:"Hadean → Eoarchean",
        ga:4.3,
        title:"Early Earth stabilises",
        bullets:[
          "Volcanic outgassing creates a secondary atmosphere; oceans condense; oxygen is negligible.",
          "Conditions may have supported the first prebiotic chemistry."
        ],
        media:[],
        links:[
          {text:"Britannica: Life — origin & early Earth", href:"https://www.britannica.com/science/life/The-origin-of-life"}
        ]
      },
      {
        id:"first-life",
        era:"Archean",
        ga:3.7,
        title:"Earliest clear evidence of life",
        bullets:[
          "Isotopic signatures and stromatolite fossils (~3.7 Ga).",
          "Early life is microbial (Bacteria & Archaea)."
        ],
        media:[
          {
            src:"https://commons.wikimedia.org/wiki/Special:FilePath/Stromatolites%20in%20Sharkbay.jpg",
            alt:"Stromatolites in Shark Bay, Western Australia",
            cap:"Stromatolites (Shark Bay, WA) — living analogues of ancient biofilms."
          }
        ],
        links:[
          {text:"Wikipedia: Earliest known life forms", href:"https://en.wikipedia.org/wiki/Earliest_known_life_forms"},
          {text:"Smithsonian: History of Life on Earth", href:"https://naturalhistory.si.edu/education/teaching-resources/life-science/history-life-earth"}
        ]
      },
      {
        id:"goe",
        era:"Paleoproterozoic",
        ga:2.4,
        title:"Great Oxidation Event (GOE)",
        bullets:[
          "Cyanobacteria evolve oxygenic photosynthesis, releasing O₂ and reshaping surface chemistry.",
          "Anaerobic lineages decline; sets stage for complex life."
        ],
        media:[
          {
            src:"https://commons.wikimedia.org/wiki/Special:FilePath/Filamentous%20cyanobacteria%20structure%20of%20Oscillatoria%20lutea.jpg",
            alt:"Micrograph of filamentous cyanobacteria",
            cap:"Filamentous cyanobacteria (Oscillatoria) under the microscope."
          }
        ],
        links:[
          {text:"Britannica: Geologic history — pregeologic & early eons", href:"https://www.britannica.com/science/geologic-history-of-Earth"}
        ]
      },
      {
        id:"eukaryotes",
        era:"Proterozoic",
        ga:1.85,
        title:"Rise of eukaryotes (complex cells)",
        bullets:[
          "Endosymbiosis (mitochondria) enables larger, more complex cells.",
          "Precursor to multicellularity."
        ],
        media:[
          {src:"https://upload.wikimedia.org/wikipedia/commons/b/b1/Animal_cell_diagram.png", alt:"Diagram of an animal (eukaryotic) cell with labelled organelles", cap:"Animal cell (eukaryote) organelles — PNG (Wikimedia Commons)."}
        ],
        links:[
          {text:"Smithsonian: Timeline — early eukaryotes", href:"https://naturalhistory.si.edu/education/teaching-resources/life-science/history-life-earth"}
        ]
      },
      {
        id:"ediacaran",
        era:"Ediacaran Period",
        ga:0.58,
        title:"Strange multicellular life",
        bullets:[
          "Soft-bodied organisms (e.g., Dickinsonia) appear before animal skeletons are common."
        ],
        media:[],
        links:[
          {text:"Wikipedia: Ediacaran biota", href:"https://en.wikipedia.org/wiki/Ediacaran_biota"}
        ]
      },
      {
        id:"cambrian",
        era:"Cambrian",
        ga:0.541,
        title:"Cambrian Explosion",
        bullets:[
          "Rapid diversification; most major animal body plans (phyla) appear in the fossil record."
        ],
        media:[
          {src:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2e/HallucigeniaSparsa-ROM-June11-10.jpg/1024px-HallucigeniaSparsa-ROM-June11-10.jpg", alt:"Fossil of Hallucigenia from the Burgess Shale (ROM)", cap:"Hallucigenia sparsa fossil, Royal Ontario Museum — CC BY-SA 3.0 (Captmondo)."}
        ],
        links:[
          {text:"Britannica: Life — evolution & the Cambrian", href:"https://www.britannica.com/science/life/Life-on-Earth"}
        ]
      },
      {
        id:"paleozoic",
        era:"Paleozoic",
        ga:0.47,
        title:"Life comes ashore (plants → arthropods → vertebrates)",
        bullets:[
          "Early land plants like <em>Cooksonia</em> pioneer terrestrial ecosystems.",
          "Vast coal forests follow; ends with the Permian mass extinction."
        ],
        media:[
          {src:"https://commons.wikimedia.org/wiki/Special:FilePath/Cooksonia_paranensis.jpg",
           alt:"Cooksonia fossil reconstruction",
           cap:"Early vascular plant Cooksonia (Wikimedia Commons)."},
          {src:"https://commons.wikimedia.org/wiki/Special:FilePath/Extinction_intensity.svg",
           alt:"Graph of extinction intensity through the Phanerozoic highlighting the Permian event",
           cap:"Extinction intensity over time — note the end-Permian spike."
          }
        ],
        links:[
          {text:"Overview: Sepkoski diversity & mass extinctions (Univ. Arizona)", href:"https://www.geo.arizona.edu/Antevs/ecol438/phanerdiv.html"}
        ]
      },
      {
        id:"mesozoic",
        era:"Mesozoic (Age of Dinosaurs)",
        ga:0.252,
        title:"Dinosaurs dominate; birds & mammals originate; flowering plants evolve",
        bullets:[
          "Birds branch from theropod dinosaurs (e.g., Archaeopteryx).",
          "Angiosperms (flowering plants) diversify and reshape landscapes."
        ],
        media:[
          {src:"https://commons.wikimedia.org/wiki/Special:FilePath/Berlin_Archaeopteryx.jpg",
           alt:"Berlin specimen of Archaeopteryx fossil",
           cap:"Transitional fossil Archaeopteryx (Wikimedia Commons)."},
          {src:"https://commons.wikimedia.org/wiki/Special:FilePath/Diagram%20of%20angiosperm%20floral%20parts%20svg.svg",
           alt:"Diagram of angiosperm (flowering plant) parts",
           cap:"Flowering plant structure — angiosperms rise in the Mesozoic."
          }
        ],
        links:[
          {text:"Archaeopteryx (Museum für Naturkunde feature)", href:"https://artsandculture.google.com/story/archaeopteryx-lithographica-%E2%80%93-the-berlin-specimen-museum-fuer-naturkunde-berlin/1AVxj85ySOZ4JQ"}
        ]
      },
      {
        id:"kpg",
        era:"End-Cretaceous (K–Pg)",
        ga:0.066,
        title:"Asteroid impact & mass extinction",
        bullets:[
          "Chicxulub impact ends non‑avian dinosaurs; ecosystems reset."
        ],
        media:[
          {src:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/70/Chicxulub_schematic_section.png/1024px-Chicxulub_schematic_section.png", alt:"Schematic cross-section of the Chicxulub impact structure", cap:"Chicxulub crater cross-section (Mikenorton, CC BY-SA 4.0, Wikimedia Commons)."}
        ],
        links:[
          {text:"K–Pg boundary event (Wikipedia)", href:"https://en.wikipedia.org/wiki/Cretaceous%E2%80%93Paleogene_extinction_event"}
        ]
      },
      {
        id:"cenozoic",
        era:"Cenozoic (Age of Mammals)",
        ga:0.05,
        title:"Mammals diversify; grasses transform habitats",
        bullets:[
          "Expansion of grasslands drives new herbivores & predators.",
          "Multiple climate swings; ice ages in the Quaternary."
        ],
        media:[
          {src:"https://commons.wikimedia.org/wiki/Special:FilePath/Smilodon_fatalis_skeleton_(white_background).jpg",
           alt:"Smilodon fatalis skeleton",
           cap:"Iconic Cenozoic predator: Smilodon (Wikimedia Commons)."}
        ],
        links:[
          {text:"Angiosperms & grasslands (Wikipedia)", href:"https://en.wikipedia.org/wiki/Grassland"}
        ]
      },
      {
        id:"hominins",
        era:"Miocene → Pleistocene → Holocene",
        ga:0.007,
        title:"Human lineage & modern humans",
        bullets:[
          "Early hominins arise ~7 Ma; <em>Homo sapiens</em> ~300 ka.",
          "Our slice of time is a tiny sliver of the geologic record."
        ],
        media:[
          {src:"https://commons.wikimedia.org/wiki/Special:FilePath/Reconstruction%20of%20the%20fossil%20skeleton%20of%20%22Lucy%22%20the%20Australopithecus%20afarensis.jpg",
           alt:"Reconstruction of the Australopithecus afarensis skeleton known as Lucy",
           cap:"Australopithecus afarensis (\"Lucy\") — early hominin (Wikimedia Commons)."}
        ],
        links:[
          {text:"Laetoli footprints (Wikipedia)", href:"https://en.wikipedia.org/wiki/Laetoli"}
        ]
      },
      {
        id:"key-points",
        era:"Key Points",
        ga:0.0001,
        title:"Key things to remember",
        bullets:[
          "~99% of all species that ever lived are extinct.",
          "Earth has seen multiple mass extinctions and dramatic climate swings.",
          "Life is remarkably resilient."
        ],
        media:[],
        links:[
          {text:"Britannica: Life — broad overview", href:"https://www.britannica.com/science/life/Life-on-Earth"}
        ]
      }
    ];

    // === Build timeline with proportional gaps ===
    const pxPerMyr = 1; // 1 px per million years (≈ 4600 px core scale, plus card heights)
    const timeline = document.getElementById('timeline');
    const toc = document.getElementById('toc');

    // Add a top spacer from 4.6 to first event age
    const topAge = 4.6;
    let prevAge = topAge;

    events.forEach((ev, i) => {
      const gapH = Math.max(8, (prevAge - ev.ga) * 1000 * pxPerMyr / 1000); // keep numbers neat
      const gap = document.createElement('div');
      gap.className = 'gap'; gap.style.setProperty('--h', gapH + 'px');
      timeline.appendChild(gap);

      // insert event card
      const card = document.createElement('article');
      card.className = 'event'; card.id = ev.id; card.dataset.ga = ev.ga;
      card.innerHTML = `
        <div>
          <div class="era">${ev.era}</div>
          <div class="ga">${formatAge(ev.ga)}</div>
        </div>
        <div>
          <div class="title">${ev.title}</div>
          <div class="desc">${toList(ev.bullets)}</div>
          ${renderMedia(ev.media)}
          ${renderLinks(ev.links)}
        </div>
      `;
      timeline.appendChild(card);

      // TOC chip
      const chip = document.createElement('button');
      chip.className = 'chip'; chip.textContent = labelChip(ev);
      chip.title = `${ev.title} — ${formatAge(ev.ga)}`;
      chip.onclick = () => document.getElementById(ev.id).scrollIntoView({behavior:'smooth', block:'start'});
      toc.appendChild(chip);

      prevAge = ev.ga;
    });

    function toList(items){
      if(!items || !items.length) return '';
      return `<ul>${items.map(x=>`<li>${x}</li>`).join('')}</ul>`
    }
    function renderMedia(arr){
      if(!arr || !arr.length) return '';
      return `
        <div class="media">
          ${arr.map(m => `
            <figure>
              <img loading="lazy" decoding="async" src="${m.src}" alt="${m.alt||''}">
              <figcaption>${m.cap||''}</figcaption>
            </figure>
          `).join('')}
        </div>`;
    }
    function renderLinks(arr){
      if(!arr || !arr.length) return '';
      return `<div class="small" style="margin-top:8px">Further reading: ${arr.map(l=>`<a href="${l.href}" target="_blank" rel="noopener">${l.text}</a>`).join(' · ')}</div>`
    }
    function labelChip(ev){
      const t = ev.title.replace(/\(.+?\)/g,'').trim();
      return (t.length>24? t.slice(0,24)+'…' : t);
    }
    function formatAge(ga){
      if(ga >= 0.1) return `${ga.toFixed(3).replace(/\.0+$/,'')} Ga`; // billions
      // for recent items, show Ma (million years)
      const Ma = Math.round(ga * 1000);
      return Ma>0 ? `${Ma.toLocaleString()} Ma` : 'Present';
    }

    // === Right-side scale ===
    const scaleEl = document.getElementById('scale');
    const pin = document.getElementById('pin');
    const nowLabel = document.getElementById('nowLabel');

    // ticks at key ages (Ga)
    const tickAges = [4.6, 4.0, 3.5, 3.0, 2.4, 2.0, 1.5, 1.0, 0.6, 0.541, 0.3, 0.1, 0.066, 0.01, 0];
    tickAges.forEach(age => addTick(age));

    function addTick(age){
      const t = document.createElement('div'); t.className='tick';
      const pct = ageToPct(age); // 0 (top) → 100 (bottom)
      t.style.top = pct + '%';
      const lab = document.createElement('label'); lab.textContent = (age===0 ? 'Present' : formatAge(age));
      t.appendChild(lab); scaleEl.appendChild(t);
    }
    function ageToPct(ga){ return ( (ga/4.6) * 86 ) + 7; }
    // maps 0–4.6 Ga onto axis height (86% of the card), with 7% top/bot padding

    // Observe event cards to update the pin
    const obs = new IntersectionObserver(entries =>{
      entries.forEach(en=>{
        if(en.isIntersecting){ updatePin(parseFloat(en.target.dataset.ga), en.target.querySelector('.title')?.textContent || ''); }
      });
    }, {rootMargin: '-20% 0px -60% 0px', threshold: 0});
    document.querySelectorAll('.event').forEach(el=>obs.observe(el));

    function updatePin(ga, title){
      const pct = ageToPct(ga);
      pin.style.top = pct + '%';
      nowLabel.innerHTML = `${formatAge(ga)} · ${title}`;
    }

    // Start at the top pin (4.6 Ga)
    updatePin(4.6, 'Formation of Earth');

    // Keyboard nav: [ and ] jump to prev/next event
    window.addEventListener('keydown', e=>{
      if(e.key==='[' || e.key===']'){
        e.preventDefault();
        const ids = events.map(e=>e.id);
        const i = ids.findIndex(id => isOnScreen(document.getElementById(id)));
        const targetId = (e.key===']') ? ids[Math.min(i+1, ids.length-1)] : ids[Math.max(i-1, 0)];
        document.getElementById(targetId).scrollIntoView({behavior:'smooth', block:'start'});
      }
    });
    function isOnScreen(el){
      const r = el.getBoundingClientRect();
      return r.top >= 0 && r.top < window.innerHeight * 0.6;
    }

    // Optional: autoplay scroll button (hold to glide)
    const glideBtn = document.createElement('button');
    glideBtn.textContent = '▶︎ Auto‑scroll';
    glideBtn.className = 'chip';
    glideBtn.style.marginLeft = '8px';
    let glideTimer = null;
    glideBtn.onmousedown = () => { glideTimer = setInterval(()=> window.scrollBy({top:2,behavior:'smooth'}), 16); };
    glideBtn.onmouseup = glideBtn.onmouseleave = () => { clearInterval(glideTimer); };
    document.querySelector('.toc').appendChild(glideBtn);
  </script>

  <footer>
    <div class="bar" style="justify-content:space-between; gap:12px">
      <div>
        <strong>Online resources</strong> · 
        <a href="https://www.bgs.ac.uk/discovering-geology/fossils-and-geological-time/geological-timechart/" target="_blank" rel="noopener">British Geological Survey timechart</a> · 
        <a href="https://naturalhistory.si.edu/education/teaching-resources/life-science/history-life-earth" target="_blank" rel="noopener">Smithsonian: History of Life on Earth</a> · 
        <a href="https://www.nps.gov/subjects/geology/time.htm" target="_blank" rel="noopener">US National Park Service: Geologic Time</a>
      </div>
      <div class="small">Hold “▶︎ Auto‑scroll” to glide · Press [ or ] to jump between sections.</div>
    </div>
  </footer>
</body>
</html>
