<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VCE Physics Summary Sheet ‚Äî Units 3 & 4</title>
<style>
  :root {
    --trap-bg: #fff3cd;
    --trap-border: #d4a017;
    --explain-bg: #d1ecf1;
    --explain-border: #0c7c8a;
    --heading-bg: #2c3e50;
    --subheading-bg: #34495e;
    --page-bg: #ffffff;
    --text: #1a1a1a;
    --muted: #555;
    /* AOS colours */
    --aos1-color: #1b4f72;
    --aos2-color: #1e6e3e;
    --aos3-color: #5b2c6f;
    --aos4-color: #922b21;
    --aos5-color: #1a5276;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Arial Narrow', 'Helvetica Neue Condensed', 'Roboto Condensed', 'Liberation Sans Narrow', sans-serif;
    font-size: 8.5pt;
    line-height: 1.18;
    color: var(--text);
    background: #e8e8e8;
  }

  /* ===== CONTROLS BAR ===== */
  .controls {
    position: sticky;
    top: 0;
    z-index: 1000;
    background: var(--heading-bg);
    color: #fff;
    padding: 10px 20px;
    display: flex;
    align-items: center;
    gap: 24px;
    flex-wrap: wrap;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
  }
  .controls h1 {
    font-size: 14pt;
    font-weight: 700;
    margin-right: auto;
  }
  .controls label {
    display: flex;
    align-items: center;
    gap: 6px;
    cursor: pointer;
    font-size: 10pt;
    user-select: none;
  }
  .controls input[type="checkbox"] {
    width: 18px;
    height: 18px;
    accent-color: #e67e22;
    cursor: pointer;
  }
  .controls button {
    background: rgba(255,255,255,0.15);
    color: #fff;
    border: 1px solid rgba(255,255,255,0.3);
    padding: 4px 12px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 9pt;
    transition: background 0.2s;
  }
  .controls button:hover { background: rgba(255,255,255,0.3); }
  .legend {
    display: flex;
    gap: 12px;
    font-size: 8pt;
  }
  .legend span {
    display: flex;
    align-items: center;
    gap: 4px;
  }
  .legend .swatch {
    display: inline-block;
    width: 14px;
    height: 14px;
    border-radius: 3px;
  }

  /* ===== PAGE LAYOUT ===== */
  .page {
    width: 210mm;
    min-height: 297mm;
    background: var(--page-bg);
    margin: 10px auto;
    padding: 6mm;
    box-shadow: 0 1px 6px rgba(0,0,0,0.15);
    column-count: 3;
    column-gap: 4mm;
    column-rule: 1px solid #ddd;
  }

  /* ===== A3 MODE (screen preview) ===== */
  .a3-sheet {
    display: none;
  }
  body.a3-mode .page {
    /* Hide standalone pages in A3 mode */
    display: none;
  }
  body.a3-mode .a3-sheet {
    display: flex;
    width: 420mm;
    min-height: 297mm;
    margin: 10px auto;
    background: var(--page-bg);
    box-shadow: 0 1px 6px rgba(0,0,0,0.15);
    gap: 0;
  }
  body.a3-mode .a3-sheet .a3-half {
    width: 210mm;
    min-height: 297mm;
    padding: 6mm;
    column-count: 3;
    column-gap: 4mm;
    column-rule: 1px solid #ddd;
    border-right: 1px dashed #bbb;
    overflow: hidden;
  }
  body.a3-mode .a3-sheet .a3-half:last-child {
    border-right: none;
  }
  body.a3-mode .a3-sheet .a3-half .page-title {
    column-span: all;
  }

  /* ===== HEADINGS ===== */
  .page-title {
    column-span: all;
    background: var(--heading-bg);
    color: #fff;
    padding: 4px 12px;
    font-size: 11pt;
    font-weight: 700;
    margin-bottom: 3px;
    border-radius: 3px;
    text-align: center;
  }

  h2 {
    background: var(--subheading-bg);
    color: #fff;
    padding: 2px 6px;
    font-size: 8.5pt;
    font-weight: 600;
    margin: 4px 0 2px;
    border-radius: 2px;
    break-after: avoid;
  }

  h3 {
    font-size: 8pt;
    font-weight: 700;
    color: var(--heading-bg);
    margin: 3px 0 1px;
    border-bottom: 1px solid #ccc;
    padding-bottom: 0;
    break-after: avoid;
  }

  /* ===== AOS HEADING COLOURS ===== */
  h2[data-aos="1"] { background: var(--aos1-color); }
  h2[data-aos="2"] { background: var(--aos2-color); }
  h2[data-aos="3"] { background: var(--aos3-color); }
  h2[data-aos="4"] { background: var(--aos4-color); }
  h2[data-aos="5"] { background: var(--aos5-color); }
  /* A3 clones inherit the same */
  .a3-half h2[data-aos="1"] { background: var(--aos1-color); }
  .a3-half h2[data-aos="2"] { background: var(--aos2-color); }
  .a3-half h2[data-aos="3"] { background: var(--aos3-color); }
  .a3-half h2[data-aos="4"] { background: var(--aos4-color); }
  .a3-half h2[data-aos="5"] { background: var(--aos5-color); }

  /* Page title bars per AOS */
  .page-title[data-aos="1"] { background: var(--aos1-color); }
  .page-title[data-aos="2"], .page-title[data-aos="23"] { background: var(--aos2-color); }
  .page-title[data-aos="4"] { background: var(--aos4-color); }
  .page-title[data-aos="5"] { background: var(--aos5-color); }

  /* ===== ITALIC TOGGLES ===== */
  body.italic-traps .exam-trap {
    font-style: italic;
  }
  body.italic-explains .explain-template {
    font-style: italic;
  }

  /* ===== CONTENT BLOCKS ===== */
  .section {
    break-inside: avoid;
    margin-bottom: 2px;
  }

  p, li { margin-bottom: 1px; }
  ul { padding-left: 12px; margin-bottom: 1px; }
  li { list-style: disc;
  }

  .formula {
    font-family: 'Cambria Math', 'Times New Roman', serif;
    font-weight: 600;
    color: #1a3a5c;
  }

  /* ===== EXAM TRAP ===== */
  .exam-trap {
    background: var(--trap-bg);
    border-left: 3px solid var(--trap-border);
    padding: 2px 5px;
    margin: 2px 0;
    border-radius: 2px;
    break-inside: avoid;
    transition: none;
  }
  .exam-trap::before {
    content: "‚ö† EXAM TRAP: ";
    font-weight: 700;
    color: #8b6914;
    font-size: 7.5pt;
  }

  /* ===== EXPLAIN TEMPLATE ===== */
  .explain-template {
    background: var(--explain-bg);
    border-left: 3px solid var(--explain-border);
    padding: 2px 5px;
    margin: 2px 0;
    border-radius: 2px;
    break-inside: avoid;
    transition: none;
  }
  .explain-template::before {
    content: "üìù EXPLAIN TEMPLATE: ";
    font-weight: 700;
    color: #0c5460;
    font-size: 7.5pt;
  }

  /* ===== TABLES ===== */
  table {
    width: 100%;
    border-collapse: collapse;
    margin: 2px 0;
    font-size: 7.5pt;
    break-inside: avoid;
  }
  th {
    background: #ecf0f1;
    font-weight: 600;
    text-align: left;
    padding: 1px 3px;
    border: 1px solid #ccc;
  }
  td {
    padding: 1px 3px;
    border: 1px solid #ccc;
    vertical-align: top;
  }

  /* ===== SECOND-TIER CONTENT ===== */
  .second-tier {
    border-left: 3px solid #b0a090;
    background: #faf8f5;
    padding: 2px 5px;
    margin: 2px 0;
    border-radius: 2px;
  }
  /* Whole-section second-tier styling */
  div.section.second-tier { padding: 3px 4px; }
  div.section.second-tier h2::after {
    content: " \2461";
    font-size: 7pt;
    opacity: 0.7;
  }

  /* ===== LAYOUT MODE ===== */
  body.layout-mode .page p,
  body.layout-mode .page li,
  body.layout-mode .page .exam-trap,
  body.layout-mode .page .explain-template,
  body.layout-mode .page .vcaa-formula {
    cursor: text;
  }
  body.layout-mode .page p:hover,
  body.layout-mode .page li:hover,
  body.layout-mode .page .exam-trap:hover,
  body.layout-mode .page .explain-template:hover,
  body.layout-mode .page .vcaa-formula:hover {
    outline: 1px dashed #e67e22;
    outline-offset: 1px;
  }
  .user-break-marker {
    display: inline;
    color: #e67e22;
    font-size: 6pt;
    vertical-align: super;
    cursor: pointer;
    user-select: none;
  }
  body:not(.layout-mode) .user-break-marker { display: none; }
  @media print { .user-break-marker { display: none !important; } }
  /* I-beam caret for layout mode */
  .layout-ibeam {
    display: inline;
    position: relative;
    width: 0;
    font-size: inherit;
    user-select: none;
    pointer-events: none;
  }
  .layout-ibeam::after {
    content: '';
    position: absolute;
    top: -1px;
    left: -1px;
    width: 1.5px;
    height: 1.15em;
    background: #e67e22;
    animation: ibeam-blink 0.8s step-end infinite;
    z-index: 10;
  }
  @keyframes ibeam-blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0; }
  }
  .layout-ibeam-hint {
    position: fixed;
    bottom: 12px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(44,62,80,0.92);
    color: #fff;
    padding: 6px 16px;
    border-radius: 6px;
    font-size: 9pt;
    z-index: 2000;
    pointer-events: none;
    white-space: nowrap;
  }
  @media print { .layout-ibeam, .layout-ibeam-hint { display: none !important; } }

  /* ===== VCAA FORMULA SHEET OVERLAY (provided in exam ‚Äî subtle) ===== */
  .vcaa-formula {
    background: #ebf5fb;
    padding: 2px 5px;
    margin: 2px 0;
    border-radius: 2px;
    font-size: 8pt;
  }

  /* ===== NOT-ON-SHEET FORMULAS (derived ‚Äî standout) ===== */
  .not-on-sheet {
    /* no styling by default ‚Äî highlighted only when toggle is on */
  }
  body.show-memorise .not-on-sheet {
    background: #fef5e7;
    padding: 2px 5px;
    margin: 2px 0;
    border-radius: 2px;
  }

  /* ===== TOGGLE STATES ===== */
  body.hide-traps .exam-trap {
    display: none;
  }
  body.hide-explains .explain-template {
    display: none;
  }
  body.hide-second-tier .second-tier {
    display: none;
  }
  body.hide-vcaa .vcaa-formula {
    display: none;
  }

  /* ===== PRINT STYLES ===== */
  @media print {
    body { background: white; }
    .controls { display: none !important; }
    .print-dialog-overlay { display: none !important; }

    /* --- A4 print mode (default) --- */
    .page {
      box-shadow: none;
      margin: 0;
      padding: 6mm;
      width: 100%;
      page-break-after: always;
      page-break-inside: avoid;
    }
    .page:last-child { page-break-after: auto; }

    .a3-sheet { display: none !important; }

    /* --- A3 print mode --- */
    body.a3-mode .page {
      display: none !important;
    }
    body.a3-mode .a3-sheet {
      display: flex !important;
      width: 100%;
      min-height: auto;
      box-shadow: none;
      margin: 0;
      page-break-after: always;
      page-break-inside: avoid;
    }
    body.a3-mode .a3-sheet:last-child {
      page-break-after: auto;
    }
    body.a3-mode .a3-sheet .a3-half {
      width: 50%;
      min-height: 297mm;
      padding: 5mm;
      column-count: 3;
      column-gap: 3mm;
      border-right: 1px solid #ccc;
      font-size: 7.5pt;
    }
    body.a3-mode .a3-sheet .a3-half:last-child {
      border-right: none;
    }

    body.hide-traps .exam-trap {
      display: none;
    }
    body.hide-explains .explain-template {
      display: none;
    }
    body.hide-second-tier .second-tier {
      display: none;
    }
    body.hide-vcaa .vcaa-formula {
      display: none;
    }
    body.show-memorise .not-on-sheet {
      background: #fef5e7;
      padding: 2px 5px;
      margin: 2px 0;
      border-radius: 2px;
    }
  }

  /* Default page size ‚Äî overridden dynamically by JS for A3 */
  @page {
    size: A4 portrait;
    margin: 5mm;
  }

  .derived-table td:first-child {
    font-family: 'Cambria Math', 'Times New Roman', serif;
    font-weight: 600;
    white-space: nowrap;
  }

  /* ===== PRINT DIALOG OVERLAY ===== */
  .print-dialog-overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.6);
    z-index: 2000;
    justify-content: center;
    align-items: center;
  }
  .print-dialog-overlay.open {
    display: flex;
  }
  .print-dialog {
    background: #fff;
    color: #1a1a1a;
    border-radius: 12px;
    padding: 28px 32px;
    min-width: 380px;
    max-width: 440px;
    box-shadow: 0 8px 32px rgba(0,0,0,0.3);
  }
  .print-dialog h2 {
    background: none;
    color: var(--heading-bg);
    font-size: 14pt;
    padding: 0;
    margin: 0 0 16px;
    border-radius: 0;
  }
  .print-dialog .option-group {
    margin-bottom: 18px;
  }
  .print-dialog .option-group label {
    font-size: 10pt;
    color: #333;
  }
  .print-dialog .option-group .option-title {
    font-weight: 600;
    font-size: 10pt;
    margin-bottom: 8px;
    color: #555;
  }
  .print-dialog .radio-row {
    display: flex;
    gap: 8px;
    margin-bottom: 6px;
  }
  .print-dialog .radio-btn {
    flex: 1;
    padding: 10px 14px;
    border: 2px solid #ddd;
    border-radius: 8px;
    cursor: pointer;
    text-align: center;
    transition: all 0.15s;
    background: #fafafa;
  }
  .print-dialog .radio-btn:hover {
    border-color: #aaa;
  }
  .print-dialog .radio-btn.selected {
    border-color: #2c3e50;
    background: #eaf0f6;
    font-weight: 600;
  }
  .print-dialog .radio-btn .size-label {
    font-size: 11pt;
    display: block;
  }
  .print-dialog .radio-btn .size-desc {
    font-size: 8pt;
    color: #777;
    margin-top: 2px;
    display: block;
    font-weight: 400;
  }
  .print-dialog .btn-row {
    display: flex;
    gap: 10px;
    justify-content: flex-end;
    margin-top: 20px;
  }
  .print-dialog .btn-cancel {
    padding: 8px 20px;
    border: 1px solid #ccc;
    border-radius: 6px;
    background: #f5f5f5;
    color: #555;
    cursor: pointer;
    font-size: 10pt;
  }
  .print-dialog .btn-cancel:hover { background: #eee; }
  .print-dialog .btn-print {
    padding: 8px 24px;
    border: none;
    border-radius: 6px;
    background: #27ae60;
    color: #fff;
    cursor: pointer;
    font-size: 10pt;
    font-weight: 600;
  }
  .print-dialog .btn-print:hover { background: #219a52; }

  /* Dynamic page size style tag placeholder */
  #dynamic-page-size { }

  /* ===== AOS COLOUR PICKER SWATCHES ===== */
  .aos-pick {
    position: relative;
    cursor: pointer;
    display: inline-block;
  }
  .aos-pick input[type="color"] {
    position: absolute;
    opacity: 0;
    width: 0;
    height: 0;
    pointer-events: none;
  }
  .aos-swatch {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 24px;
    height: 24px;
    border-radius: 4px;
    color: #fff;
    font-size: 8pt;
    font-weight: 700;
    border: 2px solid rgba(255,255,255,0.4);
    cursor: pointer;
    transition: border-color 0.15s, transform 0.1s;
  }
  .aos-swatch:hover {
    border-color: #fff;
    transform: scale(1.15);
  }
  .aos-pick input[type="color"]:focus + .aos-swatch {
    border-color: #e67e22;
    box-shadow: 0 0 0 2px #e67e22;
  }

  /* ===== ONBOARDING DIALOG ===== */
  .onboarding-overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.55);
    z-index: 3000;
    justify-content: center;
    align-items: center;
  }
  .onboarding-overlay.open { display: flex; }
  .onboarding-box {
    background: #fff;
    color: #1a1a1a;
    border-radius: 14px;
    padding: 28px 34px;
    max-width: 560px;
    width: 90vw;
    box-shadow: 0 12px 48px rgba(0,0,0,0.35);
    max-height: 85vh;
    overflow-y: auto;
    line-height: 1.5;
    font-size: 10pt;
  }
  .onboarding-box h2 {
    background: none;
    color: var(--heading-bg);
    font-size: 16pt;
    padding: 0;
    margin: 0 0 4px;
    border-radius: 0;
  }
  .onboarding-box .ob-subtitle {
    font-size: 9pt;
    color: #888;
    margin-bottom: 16px;
  }
  .onboarding-box h3 {
    font-size: 10pt;
    font-weight: 700;
    color: var(--heading-bg);
    margin: 14px 0 4px;
    border-bottom: 1px solid #e0e0e0;
    padding-bottom: 2px;
  }
  .onboarding-box p { margin-bottom: 6px; }
  .onboarding-box ul {
    padding-left: 18px;
    margin-bottom: 8px;
  }
  .onboarding-box li { margin-bottom: 4px; }
  .onboarding-box .ob-swatch {
    display: inline-block;
    width: 12px;
    height: 12px;
    border-radius: 2px;
    vertical-align: middle;
    margin-right: 3px;
  }
  .onboarding-box .ob-key {
    display: inline-block;
    background: #eee;
    border: 1px solid #ccc;
    border-radius: 4px;
    padding: 1px 7px;
    font-family: monospace;
    font-size: 9pt;
  }
  .onboarding-box .btn-close-ob {
    display: block;
    margin: 18px auto 0;
    padding: 8px 32px;
    border: none;
    border-radius: 8px;
    background: var(--heading-bg);
    color: #fff;
    font-size: 10pt;
    font-weight: 600;
    cursor: pointer;
    transition: background 0.15s;
  }
  .onboarding-box .btn-close-ob:hover { background: #1a252f; }
  .onboarding-box .ob-footer {
    text-align: center;
    font-size: 8pt;
    color: #aaa;
    margin-top: 12px;
  }
</style>
</head>
<body>

<!-- ===== CONTROLS BAR ===== -->
<div class="controls" id="controls">
  <h1>VCE Physics Summary ‚Äî Units 3 & 4</h1>

  <div class="legend">
    <span><span class="swatch" style="background:var(--trap-bg);border:1px solid var(--trap-border)"></span> Exam Trap</span>
    <span><span class="swatch" style="background:var(--explain-bg);border:1px solid var(--explain-border)"></span> Explain Template</span>
    <span><span class="swatch" style="background:#faf8f5;border:1px solid #b0a090"></span> 2nd Tier</span>
    <span><span class="swatch" style="background:#ebf5fb;border:1px solid #85c1e9"></span> VCAA Sheet</span>
    <span><span class="swatch" style="background:#fef5e7;border:1px solid #e67e22"></span> Derived</span>
  </div>

  <label><input type="checkbox" id="toggleTraps" checked> Show Traps</label>
  <label><input type="checkbox" id="toggleExplains" checked> Show Templates</label>
  <label><input type="checkbox" id="toggleSecondTier" checked> Show 2nd Tier</label>
  <label><input type="checkbox" id="toggleVcaa"> Show VCAA Formulas</label>
  <label><input type="checkbox" id="toggleMemorise"> Highlight Derived Equations</label>
  <label><input type="checkbox" id="italicTraps"> <i>Italic</i> Traps</label>
  <label><input type="checkbox" id="italicExplains"> <i>Italic</i> Templates</label>

  <!-- AOS colour pickers -->
  <div class="aos-pickers" style="display:flex;gap:6px;align-items:center;">
    <span style="font-size:8pt;opacity:0.7;">AOS colours:</span>
    <label class="aos-pick" title="U3 AOS1 ‚Äî Motion & Energy">
      <input type="color" id="aosColor1" value="#1b4f72" onchange="updateAosColor(1,this.value)">
      <span class="aos-swatch" id="aosSwatch1" style="background:var(--aos1-color)"><span class="aos-num">1</span></span>
    </label>
    <label class="aos-pick" title="U3 AOS2 ‚Äî Fields">
      <input type="color" id="aosColor2" value="#1e6e3e" onchange="updateAosColor(2,this.value)">
      <span class="aos-swatch" id="aosSwatch2" style="background:var(--aos2-color)"><span class="aos-num">2</span></span>
    </label>
    <label class="aos-pick" title="U3 AOS3 ‚Äî Electricity">
      <input type="color" id="aosColor3" value="#5b2c6f" onchange="updateAosColor(3,this.value)">
      <span class="aos-swatch" id="aosSwatch3" style="background:var(--aos3-color)"><span class="aos-num">3</span></span>
    </label>
    <label class="aos-pick" title="U4 AOS1 ‚Äî Light, Matter & Relativity">
      <input type="color" id="aosColor4" value="#922b21" onchange="updateAosColor(4,this.value)">
      <span class="aos-swatch" id="aosSwatch4" style="background:var(--aos4-color)"><span class="aos-num">4</span></span>
    </label>
    <label class="aos-pick" title="Experimental Design & Exam Skills">
      <input type="color" id="aosColor5" value="#1a5276" onchange="updateAosColor(5,this.value)">
      <span class="aos-swatch" id="aosSwatch5" style="background:var(--aos5-color)"><span class="aos-num">5</span></span>
    </label>
  </div>

  <button id="layoutModeBtn" onclick="toggleLayoutMode()" title="Click text to add/remove line breaks">‚úÇ Layout Mode</button>
  <button onclick="openPrintDialog()" style="background:#27ae60;border-color:#27ae60">üñ® Print / PDF</button>
  <button onclick="openOnboarding()" title="Help (or press ?)" style="width:28px;height:28px;border-radius:50%;padding:0;text-align:center;font-weight:700;font-size:12pt;line-height:28px">?</button>
</div>

<!-- ========================================================================= -->
<!-- PAGE 1 ‚Äî MOTION & ENERGY -->
<!-- ========================================================================= -->
<div class="page">
  <div class="page-title" data-aos="1">PAGE 1 ‚Äî MOTION & ENERGY (Unit 3 AOS 1)</div>

  <!-- Newton's Laws -->
  <div class="section">
    <h2 data-aos="1">Newton's Laws ‚Äî Key Points</h2>
    <div class="vcaa-formula"><span class="formula">v = Œîs/Œît</span> &nbsp; <span class="formula">a = Œîv/Œît</span> &nbsp; <span class="formula">F<sub>net</sub> = mv¬≤/r</span> &nbsp; <span class="formula">v = 2œÄr/T</span></div>
    <p><b>1st Law:</b> Object stays at rest or constant velocity unless acted on by a net force. Use for: explaining why things DON'T accelerate.</p>
    <p><b>2nd Law:</b> <span class="formula">F<sub>net</sub> = ma</span>. The NET force causes acceleration. Use for: all calculation questions, orbital motion explanations.</p>
    <p><b>3rd Law:</b> Forces exist in PAIRS: F<sub>on A by B</sub> = ‚àíF<sub>on B by A</sub>. Same type, same magnitude, opposite direction, on DIFFERENT objects. Use for: identifying force pairs only.</p>
    <div class="exam-trap">When asked "why does a satellite stay in orbit" ‚Äî use Newton's 2nd Law (gravity provides centripetal acceleration), NOT 1st or 3rd. (2025 Q8c: only 1/3 got full marks)</div>
  </div>

  <!-- Force Diagrams -->
  <div class="section">
    <h2 data-aos="1">Force Diagrams ‚Äî Step by Step</h2>
    <h3>Inclined Planes</h3>
    <ul>
      <li class="not-on-sheet">Resolve F<sub>g</sub> into components: <span class="formula">mg sin Œ∏</span> (parallel to slope, down), <span class="formula">mg cos Œ∏</span> (perpendicular to slope, into surface)</li>
      <li class="not-on-sheet">Normal force <span class="formula">F<sub>N</sub> = mg cos Œ∏</span> (perpendicular, away from surface)</li>
      <li>Friction acts parallel to surface opposing motion</li>
      <li class="not-on-sheet">Frictionless acceleration down slope: <span class="formula">a = g sin Œ∏</span></li>
      <li>If constant speed: F<sub>net</sub> = 0, so forces balance</li>
    </ul>
    <div class="exam-trap">Do NOT draw a separate "F<sub>net</sub>" arrow on a force diagram. F<sub>net</sub> is the resultant ‚Äî not an actual force acting on the object. (2025 Q3a)</div>
  </div>

  <!-- Conical Pendulums -->
  <div class="section">
    <h2 data-aos="1">Conical Pendulums</h2>
    <p>String at angle Œ∏ to vertical. Same logic as banked tracks:</p>
    <p class="not-on-sheet"><span class="formula">T sin Œ∏ = mv¬≤/r</span> (horizontal component provides centripetal force)</p>
    <p class="not-on-sheet"><span class="formula">T cos Œ∏ = mg</span> (vertical component balances gravity)</p>
    <p class="not-on-sheet"><span class="formula">tan Œ∏ = v¬≤/(rg)</span> where <span class="formula">r = L sin Œ∏</span> (L = string length)</p>
  </div>

  <!-- Banked Tracks -->
  <div class="section">
    <h2 data-aos="1">Banked Tracks (No Friction)</h2>
    <ul>
      <li>Only 2 forces: F<sub>g</sub> (down) and F<sub>N</sub> (perpendicular to banked surface)</li>
      <li>Horizontal component of F<sub>N</sub> provides centripetal force: <span class="formula">F<sub>N</sub> sin Œ∏ = mv¬≤/r</span></li>
      <li>Vertical component balances gravity: <span class="formula">F<sub>N</sub> cos Œ∏ = mg</span></li>
      <li class="not-on-sheet">Dividing: <span class="formula">tan Œ∏ = v¬≤/(rg)</span> ‚Üí <b>Design speed:</b> <span class="formula">v = ‚àö(rg tan Œ∏)</span></li>
    </ul>
    <p>The <b>design speed</b> is the speed at which no friction is needed. Above design speed the car slides outward; below it the car slides inward.</p>
    <div class="exam-trap">Use tan Œ∏ for banked tracks, sin Œ∏ for inclined planes. Students commonly swap these. (2025 Q3b, Q4b)</div>
  </div>

  <!-- Connected Bodies -->
  <div class="section">
    <h2 data-aos="1">Connected Bodies</h2>
    <p class="not-on-sheet"><b>Coupled system:</b> <span class="formula">Œ£F = F<sub>d</sub> + F<sub>f</sub> = (m‚ÇÅ + m‚ÇÇ)a</span> ‚Äî treat the whole system as one object to find acceleration.</p>
    <p><b>In tension (string/rope):</b> Tension is the same throughout an ideal string. Draw separate force diagrams for EACH object. Apply F<sub>net</sub> = ma to each, then solve simultaneously.</p>
    <p><b>In contact (pushing):</b> Contact force is internal. Apply F<sub>net</sub> = ma to the whole system to find acceleration, then to individual objects to find contact force.</p>
  </div>

  <!-- Normal Force in Accelerating Systems -->
  <div class="section">
    <h2 data-aos="1">F<sub>N</sub> in Lifts &amp; Accelerating Systems</h2>
    <p>Apply Newton's 2nd Law to the person (take up as positive):</p>
    <p class="not-on-sheet">Accelerating <b>up</b> (or decelerating down): <span class="formula">F<sub>N</sub> = m(g + a)</span> ‚Äî F<sub>N</sub> &gt; mg</p>
    <p class="not-on-sheet">Accelerating <b>down</b> (or decelerating up): <span class="formula">F<sub>N</sub> = m(g ‚àí a)</span> ‚Äî F<sub>N</sub> &lt; mg</p>
    <p class="not-on-sheet">Constant velocity: <span class="formula">F<sub>N</sub> = mg</span> &nbsp; Free fall (a = g): <span class="formula">F<sub>N</sub> = 0</span></p>
  </div>

  <!-- UVSAT -->
  <div class="section">
    <h2 data-aos="1">Which UVSAT Equation?</h2>
    <table>
      <tr><th>Equation</th><th>Variables</th><th>Missing</th></tr>
      <tr><td class="formula">v = u + at</td><td>u, v, a, t</td><td>s</td></tr>
      <tr><td class="formula">s = ut + ¬Ωat¬≤</td><td>u, s, a, t</td><td>v</td></tr>
      <tr><td class="formula">s = vt ‚àí ¬Ωat¬≤</td><td>v, s, a, t</td><td>u</td></tr>
      <tr><td class="formula">v¬≤ = u¬≤ + 2as</td><td>u, v, a, s</td><td>t</td></tr>
      <tr><td class="formula">s = ¬Ω(u + v)t</td><td>u, v, s, t</td><td>a</td></tr>
    </table>
  </div>

  <!-- Vertical Circular Motion -->
  <div class="section">
    <h2 data-aos="1">Vertical Circular Motion</h2>
    <p>At the TOP: Both F<sub>g</sub> and F<sub>N</sub> (or tension) point toward centre (downward).</p>
    <p><span class="formula">F<sub>net</sub> = F<sub>g</sub> + F<sub>N</sub> = mv¬≤/r</span> (both toward centre)</p>
    <p>At the BOTTOM: F<sub>N</sub> (or tension) toward centre (up), F<sub>g</sub> away from centre (down).</p>
    <p><span class="formula">F<sub>net</sub> = F<sub>N</sub> ‚àí F<sub>g</sub> = mv¬≤/r</span></p>
    <p class="not-on-sheet">Zero normal force (top): When F<sub>N</sub> = 0, gravity alone provides centripetal force: <span class="formula">mg = mv¬≤/r</span>, so <span class="formula">v<sub>min</sub> = ‚àö(rg)</span></p>
  </div>

  <!-- Projectile Motion -->
  <div class="section">
    <h2 data-aos="1">Projectile Motion</h2>
    <table>
      <tr><th></th><th>Horizontal</th><th>Vertical</th></tr>
      <tr><td>Acceleration</td><td>a = 0</td><td>a = g = 9.81 m s‚Åª¬≤ (down)</td></tr>
      <tr><td>Velocity</td><td>Constant: v<sub>x</sub> = u cos Œ∏</td><td>Changes: v<sub>y</sub> = u sin Œ∏ + gt</td></tr>
      <tr><td>Displacement</td><td>x = v<sub>x</sub>t</td><td>Use UVSAT equations</td></tr>
      <tr><td>Link</td><td colspan="2">TIME is the same for both components</td></tr>
    </table>
    <div class="exam-trap">Time of flight depends ONLY on vertical motion. A ball launched horizontally from a cliff takes the same time to fall as one dropped vertically. The parabolic path being "longer" does NOT increase fall time. (2025 Q1d)</div>
    <div class="exam-trap">Choose a sign convention and STICK TO IT. If up = positive, then a = ‚àí9.81 m s‚Åª¬≤ everywhere. Students lose marks for having gravity pointing upward mid-calculation. (2024 Q3a)</div>
    <p><b>Air resistance on projectiles:</b> Reduces BOTH range AND maximum height. Students often only mention reduced range ‚Äî you must state both. (2024 Q3c)</p>
  </div>

  <!-- Work Done from Graphs -->
  <div class="section">
    <h2 data-aos="1">Work Done from Graphs</h2>
    <p><b>KEY SKILL:</b> Area under a force-displacement graph = work done. For non-uniform forces, break into triangles + rectangles. Students must be able to read graphical data ‚Äî not just numeric. (2025 Q2c: >50% scored zero)</p>
  </div>

  <!-- Momentum & Impulse -->
  <div class="section">
    <h2 data-aos="1">Momentum & Impulse</h2>
    <div class="vcaa-formula">Momentum: <span class="formula">p = mv</span></div>
    <p>Impulse = change in momentum: <span class="formula">FŒît = mŒîv = Œîp</span></p>
    <p class="not-on-sheet">Conservation: <span class="formula">m‚ÇÅu‚ÇÅ + m‚ÇÇu‚ÇÇ = m‚ÇÅv‚ÇÅ + m‚ÇÇv‚ÇÇ</span> (isolated system, always conserved)</p>
    <p class="not-on-sheet"><b>Perfectly inelastic (stick together):</b> <span class="formula">m‚ÇÅu‚ÇÅ + m‚ÇÇu‚ÇÇ = (m‚ÇÅ + m‚ÇÇ)v</span></p>
    <p class="not-on-sheet"><b>Explosion (one ‚Üí two):</b> <span class="formula">(m‚ÇÅ + m‚ÇÇ)u = m‚ÇÅv‚ÇÅ + m‚ÇÇv‚ÇÇ</span> (often u = 0 for stationary start)</p>
    <h3>Collision Types</h3>
    <table>
      <tr><th>Type</th><th>Momentum</th><th>Kinetic Energy</th></tr>
      <tr><td>Elastic</td><td>Conserved</td><td>Conserved</td></tr>
      <tr><td>Inelastic</td><td>Conserved</td><td>NOT conserved (lost to heat, sound, deformation)</td></tr>
    </table>
    <div class="explain-template"><b>Airbags:</b> Airbags increase the TIME of collision (Œît ‚Üë). Since impulse FŒît = Œîp is the same (same Œîp), increasing Œît decreases F. Must reference BOTH collisions (with and without airbag).</div>
  </div>

  <!-- Work, Energy & Power -->
  <div class="section">
    <h2 data-aos="1">Work, Energy & Power</h2>
    <p class="not-on-sheet">Work done: <span class="formula">W = Fs cos Œ∏</span> (force √ó displacement √ó cos of angle between them)</p>
    <p class="not-on-sheet">Work done = area under F-s graph. Also <span class="formula">W = ŒîE</span> (work-energy theorem).</p>
    <p class="not-on-sheet"><b>Power:</b> <span class="formula">P = W/t = ŒîE/Œît</span> &nbsp; and &nbsp; <span class="formula">P = Fv</span> (constant force at velocity v)</p>
    <div class="vcaa-formula"><span class="formula">E<sub>k</sub> = ¬Ωmv¬≤</span> (kinetic energy) &nbsp; <span class="formula">E<sub>g</sub> = mgŒîh</span> (gravitational PE)</div>
    <p>Energy conservation: <span class="formula">E<sub>k</sub> + E<sub>g</sub> + E<sub>s</sub> = constant</span> (if no energy lost to environment)</p>
    <div class="exam-trap">When finding work done stopping on an incline, use W = Fs cos Œ∏ or energy methods. Do NOT use v¬≤ = u¬≤ + 2as with a = 9.81 ‚Äî the acceleration on a slope is g sin Œ∏, not g. (2025 Q3c: &lt;50% full marks)</div>
  </div>

  <!-- Springs -->
  <div class="section">
    <h2 data-aos="1">Springs (Hooke's Law)</h2>
    <p><span class="formula">F = ‚àíkx</span> (restoring force, negative sign shows opposite to displacement)</p>
    <p><span class="formula">E<sub>s</sub> = ¬Ωkx¬≤</span> (elastic PE = area under F-x graph for a spring)</p>
    <p>Vertical spring-mass: At equilibrium, spring extension x‚ÇÄ satisfies <span class="formula">kx‚ÇÄ = mg</span>. Oscillations occur about this equilibrium point.</p>
  </div>
</div>

<!-- ========================================================================= -->
<!-- PAGE 2 ‚Äî FIELDS & ELECTRICITY -->
<!-- ========================================================================= -->
<div class="page">
  <div class="page-title" data-aos="23">PAGE 2 ‚Äî FIELDS & ELECTRICITY (Unit 3 AOS 2 & 3)</div>

  <!-- Field Comparison -->
  <div class="section">
    <h2 data-aos="2">Field Comparison Table</h2>
    <table>
      <tr><th>Property</th><th>Gravitational</th><th>Electric</th><th>Magnetic</th></tr>
      <tr><td>Source</td><td>Mass</td><td>Charge</td><td>Moving charge / current</td></tr>
      <tr><td>Monopoles?</td><td>Yes (mass)</td><td>Yes (+/‚àí)</td><td>No (always dipoles)</td></tr>
      <tr><td>Attract/Repel</td><td>Attract only</td><td>Both</td><td>Both</td></tr>
      <tr><td>Field direction</td><td>Toward mass</td><td>Away from +, toward ‚àí</td><td>N to S (outside magnet)</td></tr>
      <tr><td>Inverse square?</td><td>Yes: g = GM/r¬≤</td><td>Yes: E = kQ/r¬≤</td><td>No (for simple cases)</td></tr>
    </table>
    <div class="exam-trap">Students are less familiar with electric fields than gravitational/magnetic. Practice drawing E-field lines around point charges and between parallel plates. The exam expects equal fluency across all three fields. (2025 Q6a)</div>
  </div>

  <!-- Gravitational Fields & Orbits -->
  <div class="section">
    <h2 data-aos="2">Gravitational Fields & Orbits</h2>
    <div class="vcaa-formula">Newton's law of gravitation: <span class="formula">F<sub>g</sub> = Gm‚ÇÅm‚ÇÇ/r¬≤</span></div>
    <p class="not-on-sheet">Orbital motion (not on formula sheet): <span class="formula">a = v¬≤/r = 4œÄ¬≤r/T¬≤</span></p>
    <p class="not-on-sheet">Setting gravitational force = centripetal force:</p>
    <p class="not-on-sheet"><span class="formula">GMm/r¬≤ = mv¬≤/r ‚Üí v = ‚àö(GM/r)</span></p>
    <p class="not-on-sheet"><b>Kepler's 3rd law:</b> <span class="formula">T¬≤ = 4œÄ¬≤r¬≥/(GM)</span> ‚Üí rearranged: <span class="formula">M = 4œÄ¬≤r¬≥/(GT¬≤)</span> (find mass of central body from orbit data)</p>
    <p><span class="formula">r = R<sub>Earth</sub> + altitude</span> (ALWAYS add altitude to Earth's radius!)</p>
    <div class="exam-trap">Altitude ‚â† orbital radius! You MUST convert altitude to metres and ADD it to R<sub>E</sub> = 6.37 √ó 10‚Å∂ m. This was the #1 error in satellite questions. (2025 Q8a, Q8b)</div>
    <div class="explain-template"><b>Why satellites orbit:</b> The gravitational force on the satellite provides the centripetal force required for circular motion (Newton's 2nd Law: F = ma). The satellite is in continuous free fall toward Earth, but its tangential velocity means it continually "misses" ‚Äî the curved path matches Earth's curvature.</div>
    <p>GPE in non-uniform fields: Work done = area under F-r graph OR area under g-r graph √ó mass. GPE is negative and increases (becomes less negative) as r increases.</p>
  </div>

  <!-- Electric Fields -->
  <div class="section">
    <h2 data-aos="2">Electric Fields</h2>
    <p>Uniform field (parallel plates): <span class="formula">E = V/d</span>, <span class="formula">F = qE</span>, <span class="formula">W = qV</span></p>
    <p>Point charge: <span class="formula">E = kQ/r¬≤</span>, <span class="formula">F = kq‚ÇÅq‚ÇÇ/r¬≤</span></p>
    <p>Energy gain by charge: <span class="formula">¬Ωmv¬≤ = qV</span> (KE gained = work done by field)</p>
    <div class="exam-trap">Increasing plate separation while maintaining the SAME voltage: E field decreases (E=V/d), force decreases, acceleration decreases, but the FINAL kinetic energy is UNCHANGED because W = qV and V is unchanged. Students who use the energy approach score better. (2025 Q6b)</div>
  </div>

  <!-- Magnetic Fields -->
  <div class="section">
    <h2 data-aos="2">Magnetic Fields & Forces</h2>
    <p>Force on moving charge: <span class="formula">F = qvB</span> (when v ‚ä• B). F = 0 when v ‚à• B.</p>
    <p>Force on wire: <span class="formula">F = nIlB</span> (when I ‚ä• B). F = 0 when I ‚à• B.</p>
    <p>Direction: Right-hand slap rule (fingers = B, thumb = v or I, palm = F on positive charge).</p>
    <div class="exam-trap">For ELECTRONS (negative charge), force is OPPOSITE to right-hand rule result. The most common error is forgetting the negative charge reversal. (2025 Q7a)</div>
    <p>Circular path in B field: <span class="formula">qvB = mv¬≤/r ‚Üí r = mv/(qB)</span></p>
  </div>

  <!-- Torque -->
  <div class="section">
    <h2 data-aos="2">Torque</h2>
    <p class="not-on-sheet"><span class="formula">œÑ = r‚ä•F</span> (torque = perpendicular distance from pivot √ó force)</p>
    <p>Equilibrium: For a system in rotational equilibrium, sum of clockwise torques = sum of anticlockwise torques.</p>
    <p>When analysing lever/balance problems: identify the pivot, measure perpendicular distances, and equate torques. (2025 Q19c: most students didn't frame as a lever problem)</p>
  </div>

  <!-- DC Motors -->
  <div class="section">
    <h2 data-aos="2">DC Motors</h2>
    <p>Current-carrying coil in magnetic field experiences torque ‚Üí rotates.</p>
    <p><b>Split-ring commutator:</b> Reverses current direction every half-turn to maintain rotation in the same direction. Without it, coil oscillates back and forth.</p>
    <p>Torque depends on: current, B field strength, number of loops, area of coil.</p>
  </div>

  <!-- Particle Accelerators -->
  <div class="section">
    <h2 data-aos="2">Particle Accelerators (Synchrotron)</h2>
    <p>Electric fields accelerate particles (increase speed/KE) in linear sections.</p>
    <p>Magnetic fields change direction (circular path) ‚Äî do NO work on particle (F ‚ä• v).</p>
    <p>Model as: linear acceleration + uniform circular motion segments.</p>
  </div>

  <!-- Electromagnetic Induction -->
  <div class="section">
    <h2 data-aos="3">Electromagnetic Induction</h2>
    <p>Magnetic flux: <span class="formula">Œ¶<sub>B</sub> = B‚ä•A</span> (when B perpendicular to area)</p>
    <p>Faraday's Law: <span class="formula">Œµ = ‚àíNŒîŒ¶<sub>B</sub>/Œît</span></p>
    <p>EMF is induced when there is a CHANGE in magnetic flux through a loop.</p>
    <p><b>Lenz's Law:</b> Induced current opposes the CHANGE in flux that caused it (the negative sign in Faraday's law).</p>
    <div class="exam-trap">When explaining induction, you MUST reference the specific apparatus (e.g. "the falling magnet causes a change in flux through the solenoid"). Generic Lenz's law definitions without specific reference score zero. (2025 Q10a: >25% scored zero)</div>
    <div class="explain-template"><b>Magnet falling through solenoid:</b> As the magnet approaches, flux through the solenoid INCREASES ‚Üí EMF induced ‚Üí current flows to oppose increasing flux (Lenz's law). As magnet exits, flux DECREASES ‚Üí current reverses to oppose decreasing flux. The second peak has opposite polarity. Amplitude differs because the magnet accelerates (faster flux change at exit).</div>
  </div>

  <!-- Generators -->
  <div class="section">
    <h2 data-aos="3">Generators & Alternators</h2>
    <table>
      <tr><th></th><th>AC Generator (Alternator)</th><th>DC Generator</th></tr>
      <tr><td>Uses</td><td>Slip rings</td><td>Split-ring commutator</td></tr>
      <tr><td>Output</td><td>Sinusoidal AC</td><td>Pulsed DC</td></tr>
      <tr><td>Commutator role</td><td>N/A</td><td>Reverses connections each ¬Ω turn ‚Üí output always same polarity</td></tr>
    </table>
    <div class="exam-trap">Name the device correctly ‚Äî "split-ring commutator" not just "commutator". Also: do NOT describe its function in terms of a motor when the question asks about a generator. (2025 Q12d)</div>
  </div>

  <!-- Power Transmission -->
  <div class="section">
    <h2 data-aos="3">Power Transmission ‚Äî Multi-Step Strategy</h2>
    <p style="color:#c0392b;font-weight:700;">CRITICAL ‚Äî 80% scored zero on this in 2025 (Q11b):</p>
    <p><b>Step 1:</b> Find voltage drop across lines: <span class="formula">V<sub>drop</sub> = V<sub>source</sub> ‚àí V<sub>load end</sub></span></p>
    <p><b>Step 2:</b> Find line current: <span class="formula">I<sub>line</sub> = V<sub>drop</sub>/R<sub>line</sub></span></p>
    <p><b>Step 3:</b> Find voltage at load: <span class="formula">V<sub>load</sub> = V<sub>source end</sub> ‚àí V<sub>drop</sub></span></p>
    <p><b>Step 4:</b> Find power at load: <span class="formula">P<sub>load</sub> = V<sub>load</sub> √ó I<sub>line</sub></span></p>
    <p><b>Step 5:</b> Power loss: <span class="formula">P<sub>loss</sub> = I¬≤<sub>line</sub>R<sub>line</sub></span> or <span class="formula">P<sub>loss</sub> = V<sub>drop</sub> √ó I<sub>line</sub></span></p>
    <p><b>Why step-up:</b> P = VI, so increasing V decreases I. Since P<sub>loss</sub> = I¬≤R, halving I reduces losses by factor of 4.</p>
    <p><b>Why step-down at load:</b> Returns voltage to safe/usable level for appliances. NOT "to reduce current to a safe level" ‚Äî current in the load is actually HIGHER than in the lines.</p>
    <div class="vcaa-formula">Voltage drop: <span class="formula">V<sub>drop</sub> = I<sub>line</sub> √ó R<sub>line</sub></span></div>
    <div class="vcaa-formula">Transformer ratio: <span class="formula">N‚ÇÅ/N‚ÇÇ = V‚ÇÅ/V‚ÇÇ = I‚ÇÇ/I‚ÇÅ</span></div>
    <p class="not-on-sheet"><b>Efficiency:</b> <span class="formula">Œ∑ = P<sub>out</sub>/P<sub>in</sub> √ó 100%</span> = <span class="formula">(P<sub>in</sub> ‚àí P<sub>loss</sub>)/P<sub>in</sub> √ó 100%</span></p>
  </div>

  <!-- AC Quantities -->
  <div class="section">
    <h2 data-aos="3">AC Quantities (not on formula sheet context)</h2>
    <p><span class="formula">V<sub>RMS</sub> = V<sub>peak</sub>/‚àö2</span> &nbsp; <span class="formula">I<sub>RMS</sub> = I<sub>peak</sub>/‚àö2</span></p>
    <p><span class="formula">V<sub>p-p</sub> = 2 √ó V<sub>peak</sub></span></p>
    <p>RMS values give equivalent DC power: <span class="formula">P = V<sub>RMS</sub> √ó I<sub>RMS</sub></span></p>
  </div>

  <!-- AC Generator Waveform -->
  <div class="section">
    <h2 data-aos="3">AC Generator Waveform</h2>
    <p>EMF is maximum when coil is parallel to field (flux changing fastest). EMF is zero when coil is perpendicular to field (flux is max but not changing). Think: Œµ depends on RATE of flux change, not flux itself.</p>
  </div>

  <!-- Circuit Fundamentals -->
  <div class="section second-tier">
    <h2 data-aos="3">Circuit Fundamentals (from Units 1&2)</h2>
    <div class="vcaa-formula"><span class="formula">I = V/R</span> (Ohm's law) &nbsp; <span class="formula">P = VI</span></div>
    <p><b>Series:</b> Same current through all components. Voltages add: <span class="formula">V<sub>T</sub> = V‚ÇÅ + V‚ÇÇ</span></p>
    <div class="vcaa-formula">Series resistance: <span class="formula">R<sub>T</sub> = R‚ÇÅ + R‚ÇÇ + ‚Ä¶</span></div>
    <p><b>Parallel:</b> Same voltage across all branches. Currents add: <span class="formula">I<sub>T</sub> = I‚ÇÅ + I‚ÇÇ</span></p>
    <div class="vcaa-formula">Parallel resistance: <span class="formula">1/R<sub>T</sub> = 1/R‚ÇÅ + 1/R‚ÇÇ + ‚Ä¶</span></div>
    <div class="exam-trap">In parallel, voltage is the SAME across each branch ‚Äî do NOT multiply voltage by number of branches. (2024 Q12c: students multiplied both V and I by 5)</div>
  </div>

  <!-- Photovoltaic Cells -->
  <div class="section second-tier">
    <h2 data-aos="3">Photovoltaic Cells</h2>
    <p>Convert light ‚Üí DC electricity. Need an inverter to convert DC ‚Üí AC for home use. Details of semiconductor action NOT required.</p>
  </div>
</div>

<!-- ========================================================================= -->
<!-- PAGE 3 ‚Äî LIGHT & MATTER -->
<!-- ========================================================================= -->
<div class="page">
  <div class="page-title" data-aos="4">PAGE 3 ‚Äî LIGHT & MATTER (Unit 4 AOS 1)</div>

  <!-- Waves Recap -->
  <div class="section second-tier">
    <h2 data-aos="4">Waves Recap</h2>
    <p>Light = transverse EM wave, produced by accelerating charges. All EM waves travel at <span class="formula">c = 3.00 √ó 10‚Å∏ m s‚Åª¬π</span> in vacuum.</p>
    <p><span class="formula">v = fŒª</span> &nbsp; <span class="formula">T = 1/f</span></p>
  </div>

  <!-- Standing Waves -->
  <div class="section">
    <h2 data-aos="4">Standing Waves</h2>
    <p>Formed by superposition of a travelling wave and its reflection. Nodes (zero displacement) and antinodes (maximum displacement).</p>
    <h3>Two fixed ends (required):</h3>
    <ul>
      <li class="not-on-sheet">Fundamental (1st harmonic): L = Œª/2 ‚Üí <span class="formula">Œª‚ÇÅ = 2L</span></li>
      <li class="not-on-sheet">2nd harmonic: L = Œª ‚Üí <span class="formula">Œª‚ÇÇ = L</span></li>
      <li class="not-on-sheet">nth harmonic: L = nŒª/2 ‚Üí <span class="formula">Œª<sub>n</sub> = 2L/n</span></li>
    </ul>
    <p class="not-on-sheet">Key relationships: <span class="formula">f<sub>n</sub> = nf‚ÇÅ = nv/(2L)</span> (harmonics are integer multiples of fundamental frequency). Number of nodes = n + 1. Number of antinodes = n.</p>
  </div>

  <!-- Diffraction -->
  <div class="section">
    <h2 data-aos="4">Diffraction</h2>
    <p>Spreading of waves passing through a gap or around an obstacle.</p>
    <p>Key factor: Œª/w ratio. Maximum diffraction when Œª ‚âà w (gap width). Larger Œª/w ‚Üí more spreading. Smaller Œª/w ‚Üí less spreading (more shadow).</p>
    <p>Limits resolution in imaging: can't resolve details smaller than Œª.</p>
    <div class="exam-trap">Diffraction STILL OCCURS when Œª &lt; w ‚Äî it's just less pronounced. Do NOT say "diffraction won't occur". It begins to be clearly observable when Œª/w ‚âà 1 and continues at smaller ratios. (2024 Q15b)</div>
  </div>

  <!-- Young's Double Slit -->
  <div class="section">
    <h2 data-aos="4">Young's Double Slit Experiment</h2>
    <p><b>What it shows:</b> Light produces an interference pattern (alternating bright and dark fringes) ‚Üí evidence for WAVE nature of light. Particles cannot cancel to produce zero intensity.</p>
    <h3>Path Difference Logic</h3>
    <table>
      <tr><th>Fringe type</th><th>Path difference</th><th>Condition</th></tr>
      <tr><td>Bright (constructive)</td><td>nŒª</td><td>Waves arrive in phase</td></tr>
      <tr><td>Dark (destructive)</td><td>(n + ¬Ω)Œª</td><td>Waves arrive out of phase</td></tr>
    </table>
    <p><span class="formula">Œîx = ŒªL/d</span> (fringe spacing, when L >> d)</p>
    <p>Effect of changes: Œª increases ‚Üí Œîx increases (wider spacing); L increases ‚Üí Œîx increases; d increases ‚Üí Œîx decreases.</p>
    <div class="exam-trap">Diffraction and interference are NOT the same phenomenon. Diffraction = spreading through a gap. Interference = superposition of waves from two sources. Don't confuse slit separation (d) with gap width (w). (2025 Q15b)</div>
    <div class="exam-trap">Each part of a question is marked independently. Even if your calculation in part (a) supports part (b), you must explicitly restate the reasoning in (b). (2025 Q15b)</div>
  </div>

  <!-- Photoelectric Effect -->
  <div class="section">
    <h2 data-aos="4">Photoelectric Effect</h2>
    <p><span class="formula">E<sub>k max</sub> = hf ‚àí œÜ</span> (on formula sheet)</p>
    <p>œÜ = work function = minimum energy to eject electron</p>
    <p class="not-on-sheet">f‚ÇÄ = threshold frequency: <span class="formula">hf‚ÇÄ = œÜ ‚Üí f‚ÇÄ = œÜ/h</span></p>
    <p class="not-on-sheet">Stopping voltage: <span class="formula">eV<sub>stop</sub> = E<sub>k max</sub> = hf ‚àí œÜ</span></p>
  </div>

  <!-- Wave vs Particle predictions -->
  <div class="section">
    <h2 data-aos="4">Wave Model Predicts vs What Actually Happens</h2>
    <table>
      <tr><th>Wave model predicts</th><th>Actual result (particle model)</th></tr>
      <tr><td>Any f should eject e‚Åª if bright enough</td><td>Below f‚ÇÄ, NO emission regardless of intensity</td></tr>
      <tr><td>Time delay at low intensity (energy builds up)</td><td>Instant emission above f‚ÇÄ</td></tr>
      <tr><td>Brighter light ‚Üí higher E<sub>k max</sub></td><td>E<sub>k</sub> depends on f, not intensity</td></tr>
      <tr><td>Higher intensity ‚Üí higher E<sub>k</sub></td><td>Higher intensity ‚Üí more electrons, same E<sub>k max</sub></td></tr>
    </table>
    <div class="exam-trap">You must explain BOTH what the wave model predicts AND what actually happens. Students who only describe the findings without contrasting the wave model prediction lose marks. (2024 Q16h: &lt;30% addressed both)</div>
  </div>

  <!-- Key Graphs -->
  <div class="section">
    <h2 data-aos="4">Key Graphs</h2>
    <table>
      <tr><th>Graph</th><th>What it shows</th></tr>
      <tr><td>I vs V (photocurrent vs electrode potential)</td><td>Saturation current at high +V; stops at ‚àíV<sub>stop</sub></td></tr>
      <tr><td>E<sub>k</sub> vs f</td><td>Linear; gradient = h; x-intercept = f‚ÇÄ; y-intercept = ‚àíœÜ</td></tr>
    </table>
    <div class="exam-trap">When finding gradient from a graph: use points ON THE LINE, not data points from a table (they may not sit on the line). Show your method clearly with Œîy/Œîx using two well-separated points. (2025 Q16a: 1/3 failed to show gradient method, 1/4 used wrong points)</div>
    <p><b>Changing intensity (same f):</b> More photons ‚Üí more electrons ‚Üí higher photocurrent. Same E<sub>k max</sub>, same V<sub>stop</sub>.</p>
    <p><b>Changing frequency (same intensity):</b> Higher f ‚Üí higher E<sub>k max</sub> ‚Üí higher V<sub>stop</sub>. Fewer photons (each has more energy) ‚Üí lower photocurrent.</p>
  </div>

  <!-- Matter as Waves -->
  <div class="section">
    <h2 data-aos="4">Matter as Waves</h2>
    <p><span class="formula">Œª = h/p = h/(mv)</span> (de Broglie wavelength)</p>
    <div class="vcaa-formula">Equivalently: <span class="formula">p = h/Œª</span> (momentum of photon or particle from wavelength)</div>
    <p>Evidence: Electron diffraction patterns through crystal lattice ‚Äî concentric rings identical to wave diffraction patterns. This proves matter has wave properties.</p>
    <p><b>Photons vs electrons in double slit:</b> Both produce interference patterns one particle at a time ‚Üí evidence for wave-particle duality of BOTH light and matter.</p>
  </div>

  <!-- Quantisation & Electron Standing Waves -->
  <div class="section">
    <h2 data-aos="4">Quantisation & Electron Standing Waves</h2>
    <p>Electrons in atoms behave as standing waves ‚Äî only certain wavelengths (and thus energies) are allowed. This explains why energy levels are discrete/quantised. The idea of quantisation was crucial to developing knowledge about light AND atoms.</p>
  </div>

  <!-- Atomic Spectra -->
  <div class="section">
    <h2 data-aos="4">Atomic Spectra</h2>
    <p>Electrons occupy discrete (quantised) energy levels in atoms.</p>
    <p><span class="formula">E = hf = hc/Œª</span> (energy of absorbed or emitted photon)</p>
    <p class="not-on-sheet"><span class="formula">ŒîE = E<sub>higher</sub> ‚àí E<sub>lower</sub> = hf</span> (photon energy must EXACTLY match the gap)</p>
    <table>
      <tr><th></th><th>Emission</th><th>Absorption</th></tr>
      <tr><td>Transition</td><td>High ‚Üí Low energy level</td><td>Low ‚Üí High energy level</td></tr>
      <tr><td>Arrow direction</td><td>DOWN ‚Üì</td><td>UP ‚Üë</td></tr>
      <tr><td>Spectrum</td><td>Bright lines on dark</td><td>Dark lines on continuous</td></tr>
      <tr><td>Photon</td><td>Released</td><td>Absorbed</td></tr>
    </table>
    <div class="exam-trap">Draw arrows with correct direction: DOWN for emission (photon released), UP for absorption (photon absorbed). A line with no arrowhead scores zero. (2025 Q18b)</div>
  </div>

  <!-- Michelson-Morley -->
  <div class="section">
    <h2 data-aos="4">Michelson-Morley Experiment</h2>
    <div class="explain-template"><b>(4 steps ‚Äî all required):</b><br>
    1. <b>Purpose:</b> To detect Earth's motion through the hypothetical "luminiferous aether" by measuring speed of light in two PERPENDICULAR directions.<br>
    2. <b>Expected:</b> If aether existed, light speed should differ depending on direction relative to Earth's motion through aether.<br>
    3. <b>Result:</b> NULL result ‚Äî no difference in speed of light between the two perpendicular paths.<br>
    4. <b>Significance:</b> Supports Einstein's 2nd postulate: the speed of light is constant FOR ALL OBSERVERS regardless of their motion or the motion of the source.</div>
    <div class="exam-trap">Einstein's postulate is NOT just "the speed of light is constant". It must include "for all observers regardless of their relative motion". (2025 Q14)</div>
  </div>
</div>

<!-- ========================================================================= -->
<!-- PAGE 4 ‚Äî RELATIVITY + EXPERIMENTAL DESIGN + EXAM SKILLS -->
<!-- ========================================================================= -->
<div class="page">
  <div class="page-title" data-aos="5">PAGE 4 ‚Äî RELATIVITY + EXPERIMENTAL DESIGN + EXAM SKILLS</div>

  <!-- Special Relativity -->
  <div class="section">
    <h2 data-aos="4">Special Relativity</h2>
    <p><b>Postulate 1:</b> Laws of physics are the same in all inertial frames of reference.</p>
    <p><b>Postulate 2:</b> Speed of light is constant for all observers regardless of their motion or the motion of the source.</p>
    <div class="vcaa-formula">Lorentz factor: <span class="formula">Œ≥ = 1/‚àö(1 ‚àí v¬≤/c¬≤)</span></div>
    <h3>Key Definitions</h3>
    <p><b>Proper time (t‚ÇÄ):</b> Time interval measured by observer for whom both events occur at the SAME PLACE. Always the shortest time.</p>
    <p><b>Proper length (L‚ÇÄ):</b> Length measured in the frame where the object is at REST. Always the longest length.</p>
    <h3>Who Measures What</h3>
    <table>
      <tr><th>Scenario</th><th>Proper time</th><th>Proper length</th></tr>
      <tr><td>Muon's frame</td><td>Muon measures t‚ÇÄ (decay happens "here")</td><td>Earth observer has L‚ÇÄ (atmosphere at rest relative to Earth)</td></tr>
      <tr><td>Earth's frame</td><td>Earth sees dilated time t = Œ≥t‚ÇÄ</td><td>Muon sees contracted length L = L‚ÇÄ/Œ≥</td></tr>
    </table>
    <div class="exam-trap">Œ≥ must ALWAYS be ‚â• 1. If your calculation gives Œ≥ &lt; 1, you've made an error (likely swapped v and c, or a sign error under the square root). (2025 Q17)</div>
    <div class="explain-template"><b>Muon detection:</b> Muons created in upper atmosphere have short half-lives. Classically, they should decay before reaching Earth's surface. Relativity explains their detection two ways: (1) Earth frame: muon's clock runs slow (time dilation), so more survive; (2) Muon frame: atmosphere is length-contracted, so distance is shorter.</div>
    <div class="exam-trap">NEVER say "the muon experiences time dilation". From the muon's frame, its own clock runs normally ‚Äî it's the EARTH observer who measures the dilated (longer) time. Pick ONE frame and explain consistently ‚Äî don't mix time dilation and length contraction arguments. (2024 Q13e)</div>
  </div>

  <!-- Mass-Energy Equivalence -->
  <div class="section">
    <h2 data-aos="4">Mass-Energy Equivalence</h2>
    <p><span class="formula">E‚ÇÄ = mc¬≤</span> (rest energy ‚Äî mass IS energy)</p>
    <p><span class="formula">E<sub>total</sub> = Œ≥mc¬≤ = E<sub>k</sub> + E‚ÇÄ</span></p>
    <p><span class="formula">E<sub>k</sub> = (Œ≥ ‚àí 1)mc¬≤</span></p>
    <p>Applications: mass conversion in Sun, positron-electron annihilation, nuclear transformations in accelerators.</p>
    <p><b>Annihilation:</b> e‚Åª + e‚Å∫ ‚Üí 2Œ≥. Use mass of BOTH particles (2 √ó m<sub>e</sub>). Gamma rays travel in opposite directions to conserve MOMENTUM ‚Äî not because of opposite charges. (2024 Q14a, Q14b)</p>
    <div class="exam-trap">Do NOT use E = mc¬≤ with c for the speed of an electron. Electrons don't travel at c. Use actual electron velocity with Œ≥ to find kinetic energy, or use ¬Ωmv¬≤ = qV for non-relativistic cases. (2025 Q13: nearly half scored zero)</div>
  </div>

  <!-- Unit Conversions -->
  <div class="section second-tier">
    <h2 data-aos="5">Unit Conversions ‚Äî Common Errors</h2>
    <table>
      <tr><th>From</th><th>To metres</th><th>Operation</th></tr>
      <tr><td>km</td><td>m</td><td>√ó 10¬≥</td></tr>
      <tr><td>cm</td><td>m</td><td>√ó 10‚Åª¬≤</td></tr>
      <tr><td>mm</td><td>m</td><td>√ó 10‚Åª¬≥</td></tr>
      <tr><td>Œºm</td><td>m</td><td>√ó 10‚Åª‚Å∂</td></tr>
      <tr><td>nm</td><td>m</td><td>√ó 10‚Åª‚Åπ</td></tr>
    </table>
    <div class="exam-trap">cm¬≤ ‚Üí m¬≤: multiply by 10‚Åª‚Å¥ (NOT 10‚Åª¬≤). Each dimension converts separately, so (10‚Åª¬≤)¬≤ = 10‚Åª‚Å¥. Similarly mm¬≤ ‚Üí m¬≤ = √ó10‚Åª‚Å∂, and km¬≤ ‚Üí m¬≤ = √ó10‚Å∂.</div>
    <div class="exam-trap">Orbital radius = R<sub>Earth</sub> + altitude. Convert altitude to metres FIRST. Forgetting to square distances in inverse square law is also common. (2025 Q5a, Q8a, Q8b, Q15a, Q18a)</div>
    <p><span class="formula">1 eV = 1.60 √ó 10‚Åª¬π‚Åπ J</span> &nbsp; <span class="formula">1 kW h = 3.6 √ó 10‚Å∂ J</span></p>
    <div class="vcaa-formula"><span class="formula">1 tonne = 10¬≥ kg</span></div>
    <div class="vcaa-formula">
      <b>VCAA Data Sheet Constants:</b>
      <table>
        <tr><td>m<sub>e</sub> = 9.11 √ó 10‚Åª¬≥¬π kg</td><td>q<sub>e</sub> = 1.60 √ó 10‚Åª¬π‚Åπ C</td></tr>
        <tr><td>h = 6.63 √ó 10‚Åª¬≥‚Å¥ J s</td><td>h = 4.14 √ó 10‚Åª¬π‚Åµ eV s</td></tr>
        <tr><td>G = 6.67 √ó 10‚Åª¬π¬π N m¬≤ kg‚Åª¬≤</td><td>k = 8.99 √ó 10‚Åπ N m¬≤ C‚Åª¬≤</td></tr>
        <tr><td>M<sub>E</sub> = 5.97 √ó 10¬≤‚Å¥ kg</td><td></td></tr>
      </table>
    </div>
  </div>

  <!-- Experimental Design -->
  <div class="section">
    <h2 data-aos="5">Experimental Design</h2>
    <h3>Variables</h3>
    <table>
      <tr><th>Type</th><th>Definition</th><th>Example</th></tr>
      <tr><td>Independent (IV)</td><td>What you deliberately change</td><td>Voltage across plates</td></tr>
      <tr><td>Dependent (DV)</td><td>What you measure in response</td><td>Deflection of beam</td></tr>
      <tr><td>Controlled (CV)</td><td>What you keep constant</td><td>Plate separation, beam current</td></tr>
    </table>
    <div class="exam-trap">Only ONE IV and ONE DV per experiment. Do NOT list multiple variables in each box. Equipment (solenoid, beam) are NOT variables. Variables must be measurable quantities. (2025 Q19a: &lt;10% correct)</div>
  </div>

  <!-- Data Quality -->
  <div class="section">
    <h2 data-aos="5">Data Quality Terms</h2>
    <table>
      <tr><th>Term</th><th>Meaning</th></tr>
      <tr><td>Accuracy</td><td>How close to the TRUE value (qualitative ‚Äî "more/less accurate")</td></tr>
      <tr><td>Precision</td><td>How close REPEATED measurements are to EACH OTHER (spread)</td></tr>
      <tr><td>Repeatability</td><td>Same results under SAME conditions (same person, equipment, method)</td></tr>
      <tr><td>Reproducibility</td><td>Same results under CHANGED conditions (different person, equipment, location)</td></tr>
      <tr><td>Resolution</td><td>Smallest detectable change on instrument (e.g. ruler = 1 mm)</td></tr>
      <tr><td>Validity</td><td>Does the experiment actually test what it claims to test?</td></tr>
    </table>
  </div>

  <!-- Errors -->
  <div class="section">
    <h2 data-aos="5">Errors</h2>
    <table>
      <tr><th>Type</th><th>Effect</th><th>Fix</th></tr>
      <tr><td>Random</td><td>Spread in readings (affects precision)</td><td>Repeat measurements & average</td></tr>
      <tr><td>Systematic</td><td>Consistent offset from true value (affects accuracy)</td><td>Recalibrate, fix method</td></tr>
    </table>
    <p><b>Uncertainty:</b> Expressed as mean ¬± uncertainty. On graphs: uncertainty bars. Students must be able to read and draw these.</p>
    <p><b>Outliers:</b> Investigate, don't automatically discard. May indicate a mistake ‚Äî repeat to check.</p>
  </div>

  <!-- Graphing Rules -->
  <div class="section second-tier">
    <h2 data-aos="5">Graphing Rules</h2>
    <ul>
      <li><b>Scale:</b> Use ALL available graph space. Excessive unused space ‚Üí lose marks.</li>
      <li><b>Axes:</b> IV on x-axis, DV on y-axis (unless convention overrides). Include units.</li>
      <li><b>Data points:</b> Space proportionally (NOT equally spaced along axis).</li>
      <li><b>Line of best fit:</b> Must consider ALL data points ‚Äî do NOT just rule through the first and last points. (Persistent error: 2024 Q16b, 2025 Q19e)</li>
      <li><b>Gradient:</b> Use two points ON THE LINE (not from the data table). Show method: Œîy/Œîx. Use well-separated points to minimise reading errors.</li>
      <li>Don't use (0,0) unless it's genuinely on the line.</li>
    </ul>
    <div class="exam-trap">When a question says "use the gradient from part (f)", you MUST use that gradient ‚Äî not data from the table. (2025 Q19f, Q19g)</div>
  </div>

  <!-- Significant Figures -->
  <div class="section second-tier">
    <h2 data-aos="5">Significant Figures</h2>
    <ul>
      <li>All digits in scientific notation are significant: 4.320 √ó 10‚Åª‚Å∂ = 4 sig figs</li>
      <li>Leading zeros are NOT significant: 0.0043 = 2 sig figs</li>
      <li>Trailing zeros after decimal ARE significant: 42.00 = 4 sig figs</li>
      <li>Whole numbers: 400 = 3 sig figs (VCE convention)</li>
      <li>Final answer should match the least precise input data</li>
    </ul>
  </div>

  <!-- Showing Working -->
  <div class="section second-tier">
    <h2 data-aos="5">Showing Working ‚Äî Examiner Advice</h2>
    <ul>
      <li>Write the formula</li>
      <li>Show FULL substitution with units</li>
      <li>Show the answer with correct units and sig figs</li>
      <li>For "demonstrate" or "show that" questions: show EVERY step ‚Äî you cannot skip algebra</li>
      <li>For multi-step problems: show intermediate values clearly</li>
    </ul>
    <p><b>MULTI-STEP PROBLEMS:</b> The exam increasingly tests application over substitution. Practice chaining 2-3 formulas together. If you get stuck after step 1, write down what you know and what the question asks ‚Äî often the connection becomes clear. Formulate a STRATEGY before writing. (2024 Q6, 2025 Q11b, Q13)</p>
    <div class="exam-trap">Do NOT copy blocks of text verbatim from this sheet without adapting to the specific question. Assessors can tell ‚Äî disjointed, generic facts don't earn marks. Every response must address the SPECIFIC scenario asked about. (2024 Q16g, Q16h)</div>
  </div>

  <!-- Force on Wire -->
  <div class="section">
    <h2 data-aos="5">Force on Wire at 0¬∞ and 90¬∞</h2>
    <p><span class="formula">F = nIlB sin Œ∏</span>. When current is parallel to B field (Œ∏ = 0¬∞): F = 0. When current is perpendicular to B (Œ∏ = 90¬∞): <span class="formula">F = nIlB</span> (maximum).</p>
    <div class="exam-trap">If a wire segment is parallel to the magnetic field, there is NO force on it. Students often forget this when analysing complex apparatus. (2025 Q19b)</div>
  </div>
</div>

<!-- ===== PRINT DIALOG ===== -->
<div class="print-dialog-overlay" id="printOverlay">
  <div class="print-dialog">
    <h2>Print Settings</h2>
    <div class="option-group">
      <div class="option-title">Paper Size</div>
      <div class="radio-row">
        <div class="radio-btn selected" data-size="a4" onclick="selectPaperSize('a4')">
          <span class="size-label">A4</span>
          <span class="size-desc">4 sheets, 1 page each</span>
        </div>
        <div class="radio-btn" data-size="a3" onclick="selectPaperSize('a3')">
          <span class="size-label">A3</span>
          <span class="size-desc">2 sheets, 2 pages each</span>
        </div>
      </div>
    </div>
    <div class="option-group" id="bookletOption" style="display:none">
      <div class="option-title">Page Order</div>
      <label style="font-size:9pt;cursor:pointer;display:flex;align-items:center;gap:6px">
        <input type="checkbox" id="bookletFold">
        Booklet fold (Page 1 as front cover)
      </label>
      <div style="font-size:8pt;color:#999;margin-top:3px">Reorders pages so Page 1 is the front cover when the A3 sheet is folded in half.</div>
    </div>
    <div class="option-group">
      <div class="option-title">Content Shown</div>
      <div style="font-size:9pt;color:#666;line-height:1.4">
        Currently: <b id="contentModeLabel">Full (all content)</b><br>
        <span style="color:#999">Use the toggles in the toolbar to change this before printing.</span>
      </div>
    </div>
    <div class="btn-row">
      <button class="btn-cancel" onclick="closePrintDialog()">Cancel</button>
      <button class="btn-print" onclick="confirmPrint()">üñ® Print</button>
    </div>
  </div>
</div>

<!-- ===== A3 SHEET CONTAINERS (populated by JS) ===== -->
<div class="a3-sheet" id="a3sheet1"></div>
<div class="a3-sheet" id="a3sheet2"></div>

<!-- Dynamic page size override -->
<style id="dynamicPageStyle"></style>

<!-- ===== ONBOARDING DIALOG ===== -->
<div class="onboarding-overlay" id="onboardingOverlay">
  <div class="onboarding-box">
    <h2>VCE Physics Summary Sheet</h2>
    <p class="ob-subtitle">Units 3 & 4 ‚Äî VCAA Study Design 2024&ndash;2027</p>

    <p>This interactive summary sheet covers the full VCE Physics Units 3 & 4 course across 4 printable pages. Content is drawn from the VCAA study design, examiner reports (2024 &ndash; 2025), and textbook references. It is designed as a revision and exam-preparation tool.</p>

    <h3>Content Toggles</h3>
    <ul>
      <li><span class="ob-swatch" style="background:#fff3cd;border:1px solid #d4a017"></span> <b>Exam Traps</b> &mdash; common student mistakes flagged by examiners, with exam question references. Toggle off to focus on core content.</li>
      <li><span class="ob-swatch" style="background:#d1ecf1;border:1px solid #0c7c8a"></span> <b>Explain Templates</b> &mdash; model multi-step explanations for common extended-response questions.</li>
      <li><span class="ob-swatch" style="background:#faf8f5;border:1px solid #b0a090"></span> <b>2nd Tier</b> &mdash; prerequisite knowledge, exam technique, and cross-reference material. Useful for study but not essential on exam day.</li>
      <li><span class="ob-swatch" style="background:#ebf5fb;border:1px solid #85c1e9"></span> <b>VCAA Formulas</b> &mdash; equations and constants from the official VCAA formula/data sheet. Toggle on for a complete reference; toggle off since you'll have them in the exam.</li>
      <li><span class="ob-swatch" style="background:#fef5e7;border:1px solid #e67e22"></span> <b>Highlight Derived Equations</b> &mdash; highlights equations NOT on the VCAA formula sheet. These are derived from first principles and must be memorised before the exam.</li>
    </ul>
    <p>Each toggle collapses the hidden content so remaining material reflows to fill the space, producing a more compact printed sheet.</p>

    <h3>Italic Mode</h3>
    <p>Traps and templates can each be independently italicised, so they remain visible but visually distinct from core content.</p>

    <h3>Layout Mode</h3>
    <p>Click <b>‚úÇ Layout Mode</b> to enter break-editing mode. Click on any text to place a blinking I-beam cursor, then use <b>‚Üê ‚Üí</b> arrow keys to move character-by-character. Press <b>Enter</b> to insert a line break at the cursor, or <b>Esc</b> to cancel. Click the <span style="color:#e67e22">‚Üµ</span> marker to remove an existing break. Breaks are saved automatically and persist across sessions.</p>

    <h3>AOS Colour Coding</h3>
    <p>All section headings are colour-coded by Area of Study. Click any numbered swatch in the toolbar to customise colours:</p>
    <ul>
      <li><span class="ob-swatch" style="background:#1b4f72"></span> <b>1</b> &mdash; U3 AOS1: Motion & Energy</li>
      <li><span class="ob-swatch" style="background:#1e6e3e"></span> <b>2</b> &mdash; U3 AOS2: Fields</li>
      <li><span class="ob-swatch" style="background:#5b2c6f"></span> <b>3</b> &mdash; U3 AOS3: Electricity</li>
      <li><span class="ob-swatch" style="background:#922b21"></span> <b>4</b> &mdash; U4 AOS1: Light, Matter & Relativity</li>
      <li><span class="ob-swatch" style="background:#1a5276"></span> <b>5</b> &mdash; Experimental Design & Exam Skills</li>
    </ul>

    <h3>Printing</h3>
    <p>Click <b>Print / PDF</b> to choose between <b>A4</b> (4 portrait pages) or <b>A3</b> (2 landscape sheets with two pages side-by-side). In A3 mode, enable <b>Booklet fold</b> to reorder pages so Page 1 is the front cover when the sheet is folded in half. Set your toggles before printing &mdash; hidden content won't appear in the printout.</p>

    <h3>Keyboard Shortcut</h3>
    <p>Press <span class="ob-key">?</span> at any time to reopen this guide.</p>

    <button class="btn-close-ob" onclick="closeOnboarding()">Got it</button>
    <div class="ob-footer">VCAA Study Design &mdash; Units 3 & 4: 2024&ndash;2027 (expires 31 Dec 2027) &bull; Exam data: 2024&ndash;2025</div>
  </div>
</div>

<!-- ===== JAVASCRIPT ===== -->
<script>
(function() {
  'use strict';

  const toggleTraps = document.getElementById('toggleTraps');
  const toggleExplains = document.getElementById('toggleExplains');
  const toggleSecondTier = document.getElementById('toggleSecondTier');
  const toggleVcaa = document.getElementById('toggleVcaa');
  const toggleMemorise = document.getElementById('toggleMemorise');
  const italicTraps = document.getElementById('italicTraps');
  const italicExplains = document.getElementById('italicExplains');
  const printOverlay = document.getElementById('printOverlay');
  const contentModeLabel = document.getElementById('contentModeLabel');
  const dynamicPageStyle = document.getElementById('dynamicPageStyle');

  let selectedPaperSize = 'a4';

  // ===== Content toggle logic =====
  function updateClasses() {
    document.body.classList.toggle('hide-traps', !toggleTraps.checked);
    document.body.classList.toggle('hide-explains', !toggleExplains.checked);
    document.body.classList.toggle('hide-second-tier', !toggleSecondTier.checked);
    document.body.classList.toggle('hide-vcaa', !toggleVcaa.checked);
    document.body.classList.toggle('show-memorise', toggleMemorise.checked);
    document.body.classList.toggle('italic-traps', italicTraps.checked);
    document.body.classList.toggle('italic-explains', italicExplains.checked);
  }

  toggleTraps.addEventListener('change', updateClasses);
  toggleExplains.addEventListener('change', updateClasses);
  toggleSecondTier.addEventListener('change', updateClasses);
  toggleVcaa.addEventListener('change', updateClasses);
  toggleMemorise.addEventListener('change', updateClasses);
  italicTraps.addEventListener('change', updateClasses);
  italicExplains.addEventListener('change', updateClasses);
  updateClasses();

  // ===== AOS colour picker =====
  window.updateAosColor = function(num, color) {
    document.documentElement.style.setProperty('--aos' + num + '-color', color);
    const swatch = document.getElementById('aosSwatch' + num);
    if (swatch) swatch.style.background = color;
  };

  // Click on swatch opens the hidden color input
  document.querySelectorAll('.aos-swatch').forEach(swatch => {
    swatch.addEventListener('click', function() {
      const input = this.previousElementSibling;
      if (input && input.type === 'color') input.click();
    });
  });

  // ===== A3 sheet population =====
  // Clone page content into the A3 sheet containers
  // booklet=true: imposition for folding ‚Äî Sheet 1 front [Page4|Page1], Sheet 2 (back) [Page2|Page3]
  function populateA3Sheets(booklet) {
    const pages = document.querySelectorAll('.page');
    const sheet1 = document.getElementById('a3sheet1');
    const sheet2 = document.getElementById('a3sheet2');

    sheet1.innerHTML = '';
    sheet2.innerHTML = '';

    if (pages.length < 4) return;

    function makeHalf(pageEl) {
      const div = document.createElement('div');
      div.className = 'a3-half';
      div.innerHTML = pageEl.innerHTML;
      return div;
    }

    if (booklet) {
      // Booklet imposition: front = [Page 4 | Page 1], back = [Page 2 | Page 3]
      sheet1.appendChild(makeHalf(pages[3])); // Page 4 (left)
      sheet1.appendChild(makeHalf(pages[0])); // Page 1 (right = front cover when folded)
      sheet2.appendChild(makeHalf(pages[1])); // Page 2 (left inside)
      sheet2.appendChild(makeHalf(pages[2])); // Page 3 (right inside)
    } else {
      // Standard order: Sheet 1 [Page1|Page2], Sheet 2 [Page3|Page4]
      sheet1.appendChild(makeHalf(pages[0]));
      sheet1.appendChild(makeHalf(pages[1]));
      sheet2.appendChild(makeHalf(pages[2]));
      sheet2.appendChild(makeHalf(pages[3]));
    }
  }

  // Build A3 sheets on load
  populateA3Sheets(false);

  // ===== Print dialog =====
  function getContentModeText() {
    const parts = [];
    if (!toggleTraps.checked) parts.push('Traps');
    if (!toggleExplains.checked) parts.push('Templates');
    if (!toggleSecondTier.checked) parts.push('2nd Tier');
    if (!toggleVcaa.checked) parts.push('VCAA Formulas');
    if (toggleMemorise.checked) parts.push('Derived highlighted');
    if (parts.length === 0) return 'Full (all content)';
    return parts.join(', ');
  }

  window.openPrintDialog = function() {
    contentModeLabel.textContent = getContentModeText();
    // Reset to last selection
    document.querySelectorAll('.print-dialog .radio-btn').forEach(btn => {
      btn.classList.toggle('selected', btn.dataset.size === selectedPaperSize);
    });
    // Show booklet option if A3 is selected
    document.getElementById('bookletOption').style.display = (selectedPaperSize === 'a3') ? '' : 'none';
    printOverlay.classList.add('open');
  };

  window.closePrintDialog = function() {
    printOverlay.classList.remove('open');
  };

  window.selectPaperSize = function(size) {
    selectedPaperSize = size;
    document.querySelectorAll('.print-dialog .radio-btn').forEach(btn => {
      btn.classList.toggle('selected', btn.dataset.size === size);
    });
    // Show booklet option only for A3
    document.getElementById('bookletOption').style.display = (size === 'a3') ? '' : 'none';
  };

  window.confirmPrint = function() {
    closePrintDialog();

    if (selectedPaperSize === 'a3') {
      // Refresh A3 content in case toggles changed
      const booklet = document.getElementById('bookletFold').checked;
      populateA3Sheets(booklet);
      document.body.classList.add('a3-mode');
      dynamicPageStyle.textContent = '@page { size: A3 landscape; margin: 4mm; }';
    } else {
      document.body.classList.remove('a3-mode');
      dynamicPageStyle.textContent = '@page { size: A4 portrait; margin: 5mm; }';
    }

    // Small delay to let styles apply before print
    requestAnimationFrame(() => {
      requestAnimationFrame(() => {
        window.print();
        // After printing, revert A3 mode for screen
        if (selectedPaperSize === 'a3') {
          document.body.classList.remove('a3-mode');
          dynamicPageStyle.textContent = '';
        }
      });
    });
  };

  // ===== Onboarding dialog =====
  const onboardingOverlay = document.getElementById('onboardingOverlay');

  window.openOnboarding = function() {
    onboardingOverlay.classList.add('open');
  };

  window.closeOnboarding = function() {
    onboardingOverlay.classList.remove('open');
    try { localStorage.setItem('vce-physics-onboarded', '1'); } catch(e) {}
  };

  // Show on first visit
  try {
    if (!localStorage.getItem('vce-physics-onboarded')) {
      onboardingOverlay.classList.add('open');
    }
  } catch(e) {
    // localStorage unavailable ‚Äî show anyway on first load
    onboardingOverlay.classList.add('open');
  }

  // Close dialogs on Escape, open onboarding on ?
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
      if (onboardingOverlay.classList.contains('open')) {
        closeOnboarding();
      } else if (printOverlay.classList.contains('open')) {
        closePrintDialog();
      }
    }
    if (e.key === '?' && !e.ctrlKey && !e.metaKey && !e.altKey) {
      // Don't trigger if user is typing in an input
      if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;
      if (!onboardingOverlay.classList.contains('open')) {
        openOnboarding();
      }
    }
  });

  // Close dialogs on overlay click
  printOverlay.addEventListener('click', function(e) {
    if (e.target === printOverlay) closePrintDialog();
  });
  onboardingOverlay.addEventListener('click', function(e) {
    if (e.target === onboardingOverlay) closeOnboarding();
  });

  // ===== Layout Mode ‚Äî click-to-break =====
  const layoutBtn = document.getElementById('layoutModeBtn');
  let layoutMode = false;
  const STORAGE_KEY = 'vce-physics-breaks';

  // Generate a path-based ID for an element relative to its .page ancestor
  function getElementPath(el) {
    const parts = [];
    let node = el;
    while (node && !node.classList.contains('page') && node.tagName !== 'BODY') {
      const parent = node.parentElement;
      if (!parent) break;
      const siblings = Array.from(parent.children);
      const idx = siblings.indexOf(node);
      parts.unshift(node.tagName.toLowerCase() + '[' + idx + ']');
      node = parent;
    }
    // Identify which page
    const pages = Array.from(document.querySelectorAll('.page'));
    const pageIdx = pages.indexOf(node);
    return 'page[' + pageIdx + ']/' + parts.join('/');
  }

  // Find element from a path string
  function getElementFromPath(path) {
    const match = path.match(/^page\[(\d+)\]\/(.+)$/);
    if (!match) return null;
    const pageIdx = parseInt(match[1]);
    const pages = document.querySelectorAll('.page');
    if (pageIdx >= pages.length) return null;
    let el = pages[pageIdx];
    const steps = match[2].split('/');
    for (const step of steps) {
      const m = step.match(/^(\w+)\[(\d+)\]$/);
      if (!m) return null;
      const children = Array.from(el.children);
      const idx = parseInt(m[2]);
      if (idx >= children.length) return null;
      el = children[idx];
    }
    return el;
  }

  // Save all user breaks to localStorage
  function saveBreaks() {
    const breaks = [];
    document.querySelectorAll('.user-break').forEach(br => {
      const parent = br.parentElement;
      if (!parent) return;
      const path = getElementPath(parent);
      // Find word index: count text words before this <br>
      let wordCount = 0;
      let node = parent.firstChild;
      while (node && node !== br) {
        if (node.nodeType === 3) { // text node
          const words = node.textContent.split(/\s+/).filter(w => w.length > 0);
          wordCount += words.length;
        } else if (node.nodeType === 1 && !node.classList.contains('user-break-marker')) {
          const words = node.textContent.split(/\s+/).filter(w => w.length > 0);
          wordCount += words.length;
        }
        node = node.nextSibling;
      }
      breaks.push({ path: path, wordIndex: wordCount });
    });
    try { localStorage.setItem(STORAGE_KEY, JSON.stringify(breaks)); } catch(e) {}
  }

  // Insert a <br> after the Nth word in an element
  function insertBreakAtWord(el, wordIndex) {
    let count = 0;
    const walker = document.createTreeWalker(el, NodeFilter.SHOW_TEXT, null);
    let textNode;
    while ((textNode = walker.nextNode())) {
      // Skip text inside markers
      if (textNode.parentElement.classList && textNode.parentElement.classList.contains('user-break-marker')) continue;
      const text = textNode.textContent;
      const parts = text.split(/(\s+)/);
      let localWords = 0;
      let charPos = 0;
      for (let i = 0; i < parts.length; i++) {
        if (parts[i].trim().length > 0) {
          localWords++;
          count++;
          if (count === wordIndex) {
            // Split text node here
            charPos += parts[i].length;
            // Include trailing whitespace if present
            if (i + 1 < parts.length && parts[i + 1].trim() === '') {
              charPos += parts[i + 1].length;
            }
            const after = textNode.splitText(charPos);
            const br = document.createElement('br');
            br.className = 'user-break';
            const marker = document.createElement('span');
            marker.className = 'user-break-marker';
            marker.textContent = '‚Üµ';
            marker.title = 'Click to remove this line break';
            after.parentNode.insertBefore(br, after);
            after.parentNode.insertBefore(marker, br);
            return true;
          }
        }
        charPos += parts[i].length;
      }
    }
    return false;
  }

  // Restore breaks from localStorage
  function restoreBreaks() {
    try {
      const data = localStorage.getItem(STORAGE_KEY);
      if (!data) return;
      const breaks = JSON.parse(data);
      breaks.forEach(b => {
        const el = getElementFromPath(b.path);
        if (el) insertBreakAtWord(el, b.wordIndex);
      });
    } catch(e) {}
  }

  // ===== I-beam caret state =====
  let ibeamNode = null;   // the text node the caret is in
  let ibeamOffset = 0;    // character offset within that text node
  let ibeamEl = null;     // the <span class="layout-ibeam"> element
  let ibeamHint = null;   // the hint bar at the bottom
  let ibeamParent = null; // the p/li element the caret lives in

  function removeIbeam() {
    if (ibeamEl) { ibeamEl.remove(); ibeamEl = null; }
    if (ibeamHint) { ibeamHint.remove(); ibeamHint = null; }
    // Re-merge text nodes that were split by I-beam placement
    if (ibeamParent) { ibeamParent.normalize(); }
    ibeamNode = null;
    ibeamOffset = 0;
    ibeamParent = null;
  }

  function placeIbeam(textNode, offset) {
    removeIbeam();
    if (!textNode || textNode.nodeType !== 3) return;
    const text = textNode.textContent;
    if (offset < 0) offset = 0;
    if (offset > text.length) offset = text.length;

    ibeamParent = textNode.parentElement.closest('p, li') || textNode.parentElement;

    // Split the text node at offset and insert I-beam span between
    if (offset === 0) {
      // Insert before the text node
      ibeamEl = document.createElement('span');
      ibeamEl.className = 'layout-ibeam';
      textNode.parentNode.insertBefore(ibeamEl, textNode);
      ibeamNode = textNode;
      ibeamOffset = 0;
    } else if (offset >= text.length) {
      // Insert after the text node
      ibeamEl = document.createElement('span');
      ibeamEl.className = 'layout-ibeam';
      textNode.parentNode.insertBefore(ibeamEl, textNode.nextSibling);
      ibeamNode = textNode;
      ibeamOffset = text.length;
    } else {
      // Split and insert between
      const afterNode = textNode.splitText(offset);
      ibeamEl = document.createElement('span');
      ibeamEl.className = 'layout-ibeam';
      afterNode.parentNode.insertBefore(ibeamEl, afterNode);
      ibeamNode = textNode;  // left part
      ibeamOffset = offset;
    }

    // Show hint bar
    if (!ibeamHint) {
      ibeamHint = document.createElement('div');
      ibeamHint.className = 'layout-ibeam-hint';
      ibeamHint.textContent = '‚Üê ‚Üí move  |  Enter = insert break  |  Esc = cancel';
      document.body.appendChild(ibeamHint);
    }
  }

  // Get all text nodes in order within a container, skipping markers
  function getTextNodes(container) {
    const nodes = [];
    const walker = document.createTreeWalker(container, NodeFilter.SHOW_TEXT, {
      acceptNode: function(node) {
        if (node.parentElement.classList.contains('user-break-marker')) return NodeFilter.FILTER_REJECT;
        if (node.parentElement.classList.contains('layout-ibeam')) return NodeFilter.FILTER_REJECT;
        return NodeFilter.FILTER_ACCEPT;
      }
    });
    let n;
    while ((n = walker.nextNode())) nodes.push(n);
    return nodes;
  }

  // Move I-beam by delta characters (-1 = left, +1 = right)
  function moveIbeam(delta) {
    if (!ibeamEl || !ibeamParent) return;

    // Remove ibeam element, normalize to get clean text, then reposition
    ibeamEl.remove();
    ibeamEl = null;
    ibeamParent.normalize();

    // Find all text nodes in this paragraph
    const textNodes = getTextNodes(ibeamParent);
    if (textNodes.length === 0) return;

    // Find which text node and offset we're at by counting characters
    // We stored ibeamOffset as position in the original text node,
    // but after normalize, nodes may have merged. Recalculate.
    let totalOffset = 0;
    let found = false;
    let currentNode = null;
    let currentLocalOffset = 0;

    // Calculate absolute offset (sum of all previous text + ibeamOffset)
    // Since we stored ibeamNode reference and it may be gone after normalize,
    // we need to use a running count based on the previous state.
    // Instead, store absolute offset before removing.
    // Actually, let's compute from the ibeam's former position in DOM:
    // After normalize, we need to find where offset chars into the paragraph text.
    // Compute the absolute char position by finding ibeamOffset in the full text.

    // Reconstruct: before the ibeam was the left text (ibeamNode with ibeamOffset chars),
    // preceded by other text nodes. Count chars up to ibeamNode.
    // After normalize this is tricky, so let's use a simpler approach:
    // store the absolute character offset in the paragraph.
    let absOffset = 0;
    for (const tn of textNodes) {
      if (absOffset + tn.textContent.length >= ibeamOffset && !found) {
        // This might be our node ‚Äî but ibeamOffset is local. We need absolute.
        break;
      }
      absOffset += tn.textContent.length;
    }
    // Fallback: use stored absolute position
    absOffset = ibeamAbsOffset + delta;

    // Clamp
    let totalChars = 0;
    for (const tn of textNodes) totalChars += tn.textContent.length;
    if (absOffset < 0) absOffset = 0;
    if (absOffset > totalChars) absOffset = totalChars;

    ibeamAbsOffset = absOffset;

    // Find the text node and local offset for this absolute position
    let charCount = 0;
    for (const tn of textNodes) {
      if (charCount + tn.textContent.length >= absOffset) {
        placeIbeamAbs(tn, absOffset - charCount);
        return;
      }
      charCount += tn.textContent.length;
    }
    // If we get here, place at end of last node
    const lastNode = textNodes[textNodes.length - 1];
    placeIbeamAbs(lastNode, lastNode.textContent.length);
  }

  let ibeamAbsOffset = 0; // absolute char offset within the paragraph

  // Place I-beam given a text node and local offset, without updating absOffset
  function placeIbeamAbs(textNode, localOffset) {
    if (ibeamEl) { ibeamEl.remove(); ibeamEl = null; }
    if (!textNode || textNode.nodeType !== 3) return;

    const text = textNode.textContent;
    if (localOffset < 0) localOffset = 0;
    if (localOffset > text.length) localOffset = text.length;

    ibeamParent = textNode.parentElement.closest('p, li') || textNode.parentElement;
    ibeamOffset = localOffset;

    if (localOffset === 0) {
      ibeamEl = document.createElement('span');
      ibeamEl.className = 'layout-ibeam';
      textNode.parentNode.insertBefore(ibeamEl, textNode);
      ibeamNode = textNode;
    } else if (localOffset >= text.length) {
      ibeamEl = document.createElement('span');
      ibeamEl.className = 'layout-ibeam';
      textNode.parentNode.insertBefore(ibeamEl, textNode.nextSibling);
      ibeamNode = textNode;
    } else {
      const afterNode = textNode.splitText(localOffset);
      ibeamEl = document.createElement('span');
      ibeamEl.className = 'layout-ibeam';
      afterNode.parentNode.insertBefore(ibeamEl, afterNode);
      ibeamNode = textNode;
    }
  }

  // Confirm break at current I-beam position
  function confirmIbeamBreak() {
    if (!ibeamEl || !ibeamParent) return;

    // The ibeam is already splitting the text at the right position.
    // Replace the ibeam span with a br + marker.
    const br = document.createElement('br');
    br.className = 'user-break';
    const marker = document.createElement('span');
    marker.className = 'user-break-marker';
    marker.textContent = '‚Üµ';
    marker.title = 'Click to remove this line break';

    ibeamEl.parentNode.insertBefore(marker, ibeamEl);
    ibeamEl.parentNode.insertBefore(br, ibeamEl.nextSibling);
    ibeamEl.remove();
    ibeamEl = null;
    if (ibeamHint) { ibeamHint.remove(); ibeamHint = null; }
    ibeamNode = null;
    ibeamParent = null;
    ibeamOffset = 0;

    saveBreaks();
  }

  // Handle click in layout mode
  function handleLayoutClick(e) {
    if (!layoutMode) return;

    // If clicking a break marker, remove that break
    if (e.target.classList.contains('user-break-marker')) {
      removeIbeam();
      const marker = e.target;
      const br = marker.nextSibling;
      if (br && br.classList && br.classList.contains('user-break')) {
        const parent = marker.parentElement;
        marker.remove();
        br.remove();
        parent.normalize();
        saveBreaks();
      }
      e.preventDefault();
      e.stopPropagation();
      return;
    }

    // Find the clicked p, li, or special box inside a .page
    const target = e.target.closest('.page p, .page li, .page .exam-trap, .page .explain-template, .page .vcaa-formula');
    if (!target) { removeIbeam(); return; }
    // Don't add breaks in headings, tables, or controls
    if (target.closest('h2, h3, th, td, .controls')) return;

    e.preventDefault();
    e.stopPropagation();

    // Remove previous I-beam and normalize
    removeIbeam();

    // Find character position at click using caretRangeFromPoint
    let range;
    if (document.caretRangeFromPoint) {
      range = document.caretRangeFromPoint(e.clientX, e.clientY);
    } else if (document.caretPositionFromPoint) {
      const pos = document.caretPositionFromPoint(e.clientX, e.clientY);
      range = document.createRange();
      range.setStart(pos.offsetNode, pos.offset);
    }
    if (!range) return;

    const textNode = range.startContainer;
    if (textNode.nodeType !== 3) return;
    const offset = range.startOffset;

    // Calculate absolute offset within the paragraph
    const textNodes = getTextNodes(target);
    let absOff = 0;
    for (const tn of textNodes) {
      if (tn === textNode) { absOff += offset; break; }
      absOff += tn.textContent.length;
    }
    ibeamAbsOffset = absOff;

    placeIbeam(textNode, offset);
  }

  // Keyboard handler for I-beam navigation
  function handleLayoutKeydown(e) {
    if (!layoutMode || !ibeamEl) return;

    if (e.key === 'ArrowLeft') {
      e.preventDefault();
      moveIbeam(-1);
    } else if (e.key === 'ArrowRight') {
      e.preventDefault();
      moveIbeam(1);
    } else if (e.key === 'Enter') {
      e.preventDefault();
      confirmIbeamBreak();
    } else if (e.key === 'Escape') {
      e.preventDefault();
      removeIbeam();
    }
  }

  window.toggleLayoutMode = function() {
    layoutMode = !layoutMode;
    document.body.classList.toggle('layout-mode', layoutMode);
    layoutBtn.style.background = layoutMode ? '#e67e22' : '';
    layoutBtn.style.borderColor = layoutMode ? '#e67e22' : '';
    if (!layoutMode) removeIbeam();
  };

  // Listen for clicks and keys in page content
  document.addEventListener('click', handleLayoutClick);
  document.addEventListener('keydown', handleLayoutKeydown);

  // Restore saved breaks on load
  restoreBreaks();

})();
</script>

</body>
</html>
