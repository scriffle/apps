<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VCE Physics Examiner's Advice</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --navy: #0a1628;
            --dark-blue: #1a2842;
            --medium-blue: #2d3e5f;
            --cyan: #00bcd4;
            --cyan-dark: #008ba3;
            --white: #ffffff;
            --light-gray: #e0e0e0;
            --success: #4caf50;
            --warning: #ff9800;
            --error: #f44336;
            --neutral: #607d8b;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: var(--navy);
            color: var(--white);
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem;
        }

        header {
            background: var(--dark-blue);
            padding: 1.5rem;
            border-bottom: 2px solid var(--cyan);
            margin-bottom: 1rem;
        }

        h1 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--cyan);
        }

        .student-info {
            display: flex;
            gap: 0.5rem;
            align-items: center;
            margin-top: 1rem;
        }

        .student-info label {
            font-size: 0.9rem;
            color: var(--light-gray);
        }

        .student-info input {
            flex: 1;
            max-width: 300px;
            padding: 0.5rem;
            background: var(--medium-blue);
            border: 1px solid var(--cyan-dark);
            color: var(--white);
            border-radius: 4px;
            font-size: 0.9rem;
        }

        .student-info input::placeholder {
            color: var(--neutral);
        }

        .tabs {
            display: flex;
            gap: 0.5rem;
            background: var(--dark-blue);
            padding: 0.5rem;
            border-radius: 4px;
            margin-bottom: 1rem;
        }

        .tab {
            flex: 1;
            padding: 0.75rem;
            background: var(--medium-blue);
            border: 1px solid transparent;
            color: var(--light-gray);
            cursor: pointer;
            text-align: center;
            border-radius: 4px;
            transition: all 0.3s;
            font-size: 0.9rem;
        }

        .tab:hover {
            background: var(--dark-blue);
            border-color: var(--cyan-dark);
        }

        .tab.active {
            background: var(--cyan-dark);
            color: var(--white);
            border-color: var(--cyan);
        }

        .tab-content {
            display: none;
            background: var(--dark-blue);
            padding: 1.5rem;
            border-radius: 4px;
            min-height: 500px;
        }

        .tab-content.active {
            display: block;
        }

        .category-select {
            margin-bottom: 1rem;
        }

        .category-select select {
            width: 100%;
            padding: 0.75rem;
            background: var(--medium-blue);
            border: 1px solid var(--cyan-dark);
            color: var(--white);
            border-radius: 4px;
            font-size: 0.9rem;
            cursor: pointer;
        }

        .progress-bar {
            background: var(--medium-blue);
            height: 24px;
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 1rem;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--cyan-dark), var(--cyan));
            transition: width 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .progress-text {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--white);
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
        }

        .question-card {
            background: var(--medium-blue);
            padding: 1.5rem;
            border-radius: 4px;
            border: 2px solid transparent;
            margin-bottom: 1rem;
            transition: all 0.3s;
        }

        .question-card.active {
            border-color: var(--cyan);
            box-shadow: 0 0 20px rgba(0, 188, 212, 0.3);
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            font-size: 0.85rem;
            color: var(--light-gray);
        }

        .question-text {
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 1.5rem;
            color: var(--white);
        }

        .answer-buttons {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .answer-btn {
            flex: 1;
            padding: 1rem;
            border: 2px solid var(--cyan-dark);
            background: var(--dark-blue);
            color: var(--white);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.3s;
        }

        .answer-btn:hover:not(:disabled) {
            background: var(--medium-blue);
            border-color: var(--cyan);
            transform: translateY(-2px);
        }

        .answer-btn:active {
            transform: translateY(0);
        }

        .answer-btn.selected {
            background: var(--cyan-dark);
            border-color: var(--cyan);
        }

        .answer-btn.correct {
            background: var(--success);
            border-color: var(--success);
        }

        .answer-btn.incorrect {
            background: var(--error);
            border-color: var(--error);
        }

        .answer-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .feedback {
            padding: 1rem;
            border-radius: 4px;
            margin-top: 1rem;
            display: none;
            font-size: 0.95rem;
            line-height: 1.6;
        }

        .feedback.show {
            display: block;
        }

        .feedback.correct {
            background: rgba(76, 175, 80, 0.2);
            border-left: 4px solid var(--success);
        }

        .feedback.incorrect {
            background: rgba(244, 67, 54, 0.2);
            border-left: 4px solid var(--error);
        }

        .feedback-header {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .status-indicator {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .status-unanswered {
            background: var(--medium-blue);
            color: var(--neutral);
        }

        .status-correct {
            background: rgba(76, 175, 80, 0.2);
            color: var(--success);
        }

        .status-incorrect {
            background: rgba(244, 67, 54, 0.2);
            color: var(--error);
        }

        .navigation {
            display: flex;
            gap: 0.5rem;
            margin-top: 1.5rem;
            flex-wrap: wrap;
        }

        .nav-btn {
            padding: 0.75rem 1.5rem;
            background: var(--medium-blue);
            border: 1px solid var(--cyan-dark);
            color: var(--white);
            cursor: pointer;
            border-radius: 4px;
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        .nav-btn:hover {
            background: var(--cyan-dark);
            border-color: var(--cyan);
        }

        .nav-btn.primary {
            background: var(--cyan-dark);
            border-color: var(--cyan);
        }

        .nav-btn.primary:hover {
            background: var(--cyan);
        }

        .category-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .category-card {
            background: var(--medium-blue);
            padding: 1rem;
            border-radius: 4px;
            border-left: 4px solid var(--cyan);
        }

        .category-card h3 {
            font-size: 0.95rem;
            margin-bottom: 0.5rem;
            color: var(--cyan);
        }

        .category-card .stats {
            font-size: 0.85rem;
            color: var(--light-gray);
        }

        .mastery-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .mastery-card {
            background: var(--medium-blue);
            padding: 1.5rem;
            border-radius: 4px;
            text-align: center;
        }

        .mastery-number {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .mastery-card.mastered .mastery-number {
            color: var(--success);
        }

        .mastery-card.partial .mastery-number {
            color: var(--warning);
        }

        .mastery-card.needs-work .mastery-number {
            color: var(--error);
        }

        .mastery-card.not-attempted .mastery-number {
            color: var(--neutral);
        }

        .mastery-label {
            font-size: 0.85rem;
            color: var(--light-gray);
        }

        .concept-list {
            margin-top: 1rem;
        }

        .concept-item {
            background: var(--medium-blue);
            padding: 1rem;
            border-radius: 4px;
            margin-bottom: 0.5rem;
            border-left: 4px solid var(--neutral);
        }

        .concept-item.mastered {
            border-left-color: var(--success);
        }

        .concept-item.partial {
            border-left-color: var(--warning);
        }

        .concept-item.needs-work {
            border-left-color: var(--error);
        }

        .concept-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .concept-title {
            font-weight: 600;
            font-size: 0.95rem;
        }

        .concept-details {
            font-size: 0.85rem;
            color: var(--light-gray);
            line-height: 1.6;
        }

        .filter-buttons {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 0.5rem 1rem;
            background: var(--medium-blue);
            border: 1px solid var(--cyan-dark);
            color: var(--white);
            cursor: pointer;
            border-radius: 4px;
            font-size: 0.85rem;
            transition: all 0.3s;
        }

        .filter-btn:hover {
            background: var(--dark-blue);
        }

        .filter-btn.active {
            background: var(--cyan-dark);
            border-color: var(--cyan);
        }

        .utility-section {
            background: var(--medium-blue);
            padding: 1.5rem;
            border-radius: 4px;
            margin-bottom: 1rem;
        }

        .utility-section h3 {
            font-size: 1.1rem;
            margin-bottom: 1rem;
            color: var(--cyan);
        }

        .utility-buttons {
            display: grid;
            gap: 0.75rem;
        }

        .utility-btn {
            padding: 1rem;
            background: var(--dark-blue);
            border: 1px solid var(--cyan-dark);
            color: var(--white);
            cursor: pointer;
            border-radius: 4px;
            text-align: left;
            transition: all 0.3s;
            font-size: 0.9rem;
        }

        .utility-btn:hover {
            background: var(--medium-blue);
            border-color: var(--cyan);
        }

        .utility-btn.warning {
            border-color: var(--error);
            color: var(--error);
        }

        .stat-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .stat-item {
            background: var(--dark-blue);
            padding: 1rem;
            border-radius: 4px;
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--light-gray);
            margin-bottom: 0.25rem;
        }

        .stat-value {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--cyan);
        }

        .keyboard-hint {
            text-align: center;
            font-size: 0.8rem;
            color: var(--neutral);
            margin-top: 1rem;
            padding: 0.5rem;
            background: var(--dark-blue);
            border-radius: 4px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 0.5rem;
            }

            header {
                padding: 1rem;
            }

            h1 {
                font-size: 1.2rem;
            }

            .question-text {
                font-size: 1rem;
            }

            .answer-buttons {
                flex-direction: column;
            }

            .navigation {
                justify-content: center;
            }

            .nav-btn {
                flex: 1;
                min-width: 120px;
            }

            .mastery-overview {
                grid-template-columns: 1fr 1fr;
            }
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(10, 22, 40, 0.95);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: var(--dark-blue);
            padding: 2rem;
            border-radius: 8px;
            max-width: 500px;
            width: 100%;
            border: 2px solid var(--cyan);
        }

        .modal-header {
            font-size: 1.2rem;
            margin-bottom: 1rem;
            color: var(--cyan);
        }

        .modal-body {
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .modal-buttons {
            display: flex;
            gap: 0.5rem;
            justify-content: flex-end;
        }

        .modal-btn {
            padding: 0.75rem 1.5rem;
            border: 1px solid var(--cyan-dark);
            background: var(--medium-blue);
            color: var(--white);
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.3s;
        }

        .modal-btn:hover {
            background: var(--cyan-dark);
        }

        .modal-btn.primary {
            background: var(--cyan-dark);
            border-color: var(--cyan);
        }
    </style>
</head>
<body>
    <header>
        <h1>VCE Physics Examiner's Advice</h1>
        <div class="student-info">
            <label for="studentName">Student Name:</label>
            <input type="text" id="studentName" placeholder="Enter your name">
        </div>
    </header>

    <div class="container">
        <div class="tabs">
            <div class="tab active" data-tab="questions">Questions</div>
            <div class="tab" data-tab="feedback">Feedback</div>
            <div class="tab" data-tab="utility">Utility</div>
        </div>

        <!-- Questions Tab -->
        <div class="tab-content active" id="questions-tab">
            <div class="category-select">
                <select id="categorySelect">
                    <option value="0">Exam Technique & Presentation</option>
                    <option value="1">Mathematical & Calculation Skills</option>
                    <option value="2">Graph & Data Analysis Skills</option>
                    <option value="3">Conceptual Understanding</option>
                    <option value="4">Common Misconceptions</option>
                    <option value="5">Problem-Solving Strategies</option>
                </select>
            </div>

            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
                <div class="progress-text" id="progressText">0/0 (0%)</div>
            </div>

            <div id="questionContainer"></div>

            <div class="navigation">
                <button class="nav-btn" id="prevBtn">← Previous</button>
                <button class="nav-btn" id="skipBtn">Skip</button>
                <button class="nav-btn" id="nextBtn">Next →</button>
            </div>

            <div class="keyboard-hint">
                Keyboard shortcuts: T (True) | F (False) | ← → (Navigate)
            </div>

            <div class="category-summary" id="categorySummary"></div>
        </div>

        <!-- Feedback Tab -->
        <div class="tab-content" id="feedback-tab">
            <div class="progress-bar">
                <div class="progress-fill" id="overallProgressFill"></div>
                <div class="progress-text" id="overallProgressText">0/150 (0%)</div>
            </div>

            <div class="mastery-overview">
                <div class="mastery-card mastered">
                    <div class="mastery-number" id="masteredCount">0</div>
                    <div class="mastery-label">Mastered (2/2)</div>
                </div>
                <div class="mastery-card partial">
                    <div class="mastery-number" id="partialCount">0</div>
                    <div class="mastery-label">Partial (1/2)</div>
                </div>
                <div class="mastery-card needs-work">
                    <div class="mastery-number" id="needsWorkCount">0</div>
                    <div class="mastery-label">Needs Work (0/2)</div>
                </div>
                <div class="mastery-card not-attempted">
                    <div class="mastery-number" id="notAttemptedCount">75</div>
                    <div class="mastery-label">Not Attempted</div>
                </div>
            </div>

            <div class="filter-buttons">
                <button class="filter-btn active" data-filter="all">All</button>
                <button class="filter-btn" data-filter="mastered">Mastered</button>
                <button class="filter-btn" data-filter="partial">Partial</button>
                <button class="filter-btn" data-filter="needs-work">Needs Work</button>
                <button class="filter-btn" data-filter="not-attempted">Not Attempted</button>
            </div>

            <div class="concept-list" id="conceptList"></div>
        </div>

        <!-- Utility Tab -->
        <div class="tab-content" id="utility-tab">
            <div class="utility-section">
                <h3>Session Management</h3>
                <div class="utility-buttons">
                    <button class="utility-btn" id="saveBtn">💾 Save Progress</button>
                    <button class="utility-btn" id="exportBtn">📊 Export Results</button>
                    <button class="utility-btn" id="emailBtn">📧 Email to Teacher</button>
                    <button class="utility-btn" id="randomizeBtn">🔀 Randomize Questions</button>
                    <button class="utility-btn warning" id="resetBtn">⚠️ Reset All Progress</button>
                </div>
            </div>

            <div class="utility-section">
                <h3>Statistics</h3>
                <div class="stat-grid">
                    <div class="stat-item">
                        <div class="stat-label">Questions Answered</div>
                        <div class="stat-value" id="statAnswered">0/150</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Accuracy Rate</div>
                        <div class="stat-value" id="statAccuracy">0%</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Current Category</div>
                        <div class="stat-value" id="statCategory">-</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Last Session</div>
                        <div class="stat-value" id="statLastSession">-</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal" id="modal">
        <div class="modal-content">
            <div class="modal-header" id="modalHeader">Confirm Action</div>
            <div class="modal-body" id="modalBody">Are you sure?</div>
            <div class="modal-buttons">
                <button class="modal-btn" id="modalCancel">Cancel</button>
                <button class="modal-btn primary" id="modalConfirm">Confirm</button>
            </div>
        </div>
    </div>

    <script>
        // Question Database - All 150 questions organized by category
        const questionDatabase = {
            categories: [
                {
                    name: "Exam Technique & Presentation",
                    concepts: [
                        {
                            id: 1,
                            title: "Use ink not pencil",
                            questions: [
                                {
                                    text: "Pencil is acceptable for Section B responses as long as you write clearly.",
                                    answer: false,
                                    explanation: "You must use ink pen for Section B. Pencil is too faint when papers are scanned, and assessors may misread your work."
                                },
                                {
                                    text: "Assessors view scanned images of your work, so ink pen is essential for Section B.",
                                    answer: true,
                                    explanation: "Correct. Papers are scanned, not viewed directly. Ink shows up clearly on scans, while pencil can be too faint to read accurately."
                                }
                            ]
                        },
                        {
                            id: 2,
                            title: "Show sufficient working",
                            questions: [
                                {
                                    text: "For questions worth more than 1 mark, showing your working is optional if your answer is correct.",
                                    answer: false,
                                    explanation: "Showing working is mandatory for multi-mark questions. Marks are awarded for demonstrating understanding through steps, not just final answers."
                                },
                                {
                                    text: "Marks are awarded for demonstration of understanding, identified by steps in the working.",
                                    answer: true,
                                    explanation: "Correct. The working shows your understanding of the physics concepts and problem-solving process, which is essential for full marks."
                                }
                            ]
                        },
                        {
                            id: 3,
                            title: "Explain your answer when asked",
                            questions: [
                                {
                                    text: "When a question asks you to explain your answer, writing the option letter alone is sufficient.",
                                    answer: false,
                                    explanation: "You must provide an explanation. Writing only an option without justification is considered a guess and receives no marks."
                                },
                                {
                                    text: "An attempted explanation is required to receive marks when questions ask you to justify your answer.",
                                    answer: true,
                                    explanation: "Correct. Even if only two options are provided, you must demonstrate understanding through explanation, not just selection."
                                }
                            ]
                        },
                        {
                            id: 4,
                            title: "Check your working",
                            questions: [
                                {
                                    text: "If your calculation steps do not support your final answer, you should adjust them to match the expected result.",
                                    answer: false,
                                    explanation: "Never fudge answers. If your working does not equal your stated answer, you need to find and fix the error, not pretend it matches."
                                },
                                {
                                    text: "Your calculation steps must logically lead to your stated final answer.",
                                    answer: true,
                                    explanation: "Correct. Assessors check that your working is consistent and mathematically sound. Mismatched calculations and answers lose marks."
                                }
                            ]
                        },
                        {
                            id: 5,
                            title: "Use diagrams when helpful",
                            questions: [
                                {
                                    text: "Diagrams are only acceptable when specifically requested in the question.",
                                    answer: false,
                                    explanation: "You are encouraged to use diagrams to clarify your understanding, especially for forces, projectile motion, or circuits, even when not explicitly asked."
                                },
                                {
                                    text: "Drawing diagrams can help communicate your understanding to assessors, particularly for mechanics problems.",
                                    answer: true,
                                    explanation: "Correct. Clear diagrams showing forces, motion, or circuit elements can make your reasoning clearer and may help you gain marks."
                                }
                            ]
                        },
                        {
                            id: 6,
                            title: "Plan before starting complex questions",
                            questions: [
                                {
                                    text: "For longer questions, you should immediately start calculating without planning your approach.",
                                    answer: false,
                                    explanation: "Take time to formulate a strategy first. Diving in without planning often leads to disorganized, incomplete work."
                                },
                                {
                                    text: "Taking a few moments to plan your strategy helps ensure organized and complete responses to complex questions.",
                                    answer: true,
                                    explanation: "Correct. Planning helps you identify what you need to calculate, in what order, and how to demonstrate your understanding clearly."
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Mathematical & Calculation Skills",
                    concepts: [
                        {
                            id: 7,
                            title: "Convert units correctly",
                            questions: [
                                {
                                    text: "To convert milliseconds to seconds, you should multiply by 1000.",
                                    answer: false,
                                    explanation: "To convert milliseconds to seconds, divide by 1000. (e.g., 240 ms = 0.240 s)"
                                },
                                {
                                    text: "Common unit conversion errors include forgetting to convert kilometers to meters or gigavolts to volts.",
                                    answer: true,
                                    explanation: "Correct. Always check units before calculating. km to m: multiply by 1000. GV to V: multiply by 10⁹."
                                }
                            ]
                        },
                        {
                            id: 8,
                            title: "Answer in the specified unit",
                            questions: [
                                {
                                    text: "If the answer box specifies kW, you can answer in any power unit as long as you label it correctly.",
                                    answer: false,
                                    explanation: "When a unit is specified in the answer box, you must answer in that exact unit. Answering in W or MW when kW is requested loses marks."
                                },
                                {
                                    text: "The unit provided in the answer box tells you exactly which unit your final answer must use.",
                                    answer: true,
                                    explanation: "Correct. If the box says kW, convert your answer to kW. This is a specific instruction you must follow."
                                }
                            ]
                        },
                        {
                            id: 9,
                            title: "Use correct significant figures",
                            questions: [
                                {
                                    text: "You should provide as many decimal places as your calculator displays to show accuracy.",
                                    answer: false,
                                    explanation: "Use appropriate significant figures, typically 2-3 as specified or appropriate for the given data. Excessive precision suggests poor understanding of measurement uncertainty."
                                },
                                {
                                    text: "Final answers should typically be given to 2-3 significant figures unless otherwise specified.",
                                    answer: true,
                                    explanation: "Correct. This reflects appropriate precision for physics measurements and calculations."
                                }
                            ]
                        },
                        {
                            id: 10,
                            title: "Calculate gradients properly",
                            questions: [
                                {
                                    text: "When calculating a gradient from your graph, you should use data points from the original table.",
                                    answer: false,
                                    explanation: "Use points clearly on your drawn line of best fit, not table values. The gradient represents your fitted line, not individual data points."
                                },
                                {
                                    text: "Gradient calculations must show the formula: (y₂ - y₁)/(x₂ - x₁) using points from your line of best fit.",
                                    answer: true,
                                    explanation: "Correct. Explicitly showing this calculation demonstrates you understand how to find gradient from a graph."
                                }
                            ]
                        },
                        {
                            id: 11,
                            title: "Show physical significance of gradients",
                            questions: [
                                {
                                    text: "For graph analysis questions, arriving at the correct numerical value is more important than showing how you found it.",
                                    answer: false,
                                    explanation: "These questions assess whether you understand the physical significance of the gradient. You must clearly demonstrate the calculation process, not just state a number."
                                },
                                {
                                    text: "Questions about finding constants from graphs assess your understanding of what the gradient represents physically.",
                                    answer: true,
                                    explanation: "Correct. You must show the gradient calculation clearly and explain how it relates to the physical constant (e.g., gradient = h for photoelectric effect)."
                                }
                            ]
                        },
                        {
                            id: 12,
                            title: "Maintain sign conventions",
                            questions: [
                                {
                                    text: "In projectile motion, acceleration due to gravity should be positive since it causes motion.",
                                    answer: false,
                                    explanation: "Acceleration due to gravity acts downwards and should be negative if you define upward as positive. Maintain consistent sign conventions throughout."
                                },
                                {
                                    text: "Strong sign conventions prevent errors in calculations involving vectors and directions.",
                                    answer: true,
                                    explanation: "Correct. Define positive directions at the start and stick to them consistently for all quantities (displacement, velocity, acceleration, force)."
                                }
                            ]
                        },
                        {
                            id: 13,
                            title: "Vector change calculations",
                            questions: [
                                {
                                    text: "Change in momentum magnitude is always the difference between final and initial speeds.",
                                    answer: false,
                                    explanation: "Change in momentum is a vector: Δp = p_final - p_initial. You must account for direction. A ball bouncing changes momentum by more than twice its speed."
                                },
                                {
                                    text: "The sign of change in a vector quantity indicates the direction of that change.",
                                    answer: true,
                                    explanation: "Correct. For example, if Δp is positive, the change is in the positive direction you defined."
                                }
                            ]
                        },
                        {
                            id: 14,
                            title: "State magnitude and direction for vectors",
                            questions: [
                                {
                                    text: "For vector quantities, stating the numerical value is sufficient without mentioning direction.",
                                    answer: false,
                                    explanation: "Vector answers require both magnitude and direction. Omitting direction loses marks."
                                },
                                {
                                    text: "Vector quantities like force, velocity, and momentum require both magnitude and direction in complete answers.",
                                    answer: true,
                                    explanation: "Correct. For example: '14 kg m s⁻¹ upward' not just '14 kg m s⁻¹'."
                                }
                            ]
                        },
                        {
                            id: 15,
                            title: "Calculate impulse as area under graph",
                            questions: [
                                {
                                    text: "Impulse can only be calculated using the formula I = FΔt with average force.",
                                    answer: false,
                                    explanation: "Impulse equals the area under a force-time graph. For triangular shapes, use ½bh. You can also count squares, though this is more laborious."
                                },
                                {
                                    text: "The area under a force-time graph represents impulse, which can be calculated geometrically.",
                                    answer: true,
                                    explanation: "Correct. For simple shapes, calculate area directly. For complex curves, count squares or use integration methods."
                                }
                            ]
                        },
                        {
                            id: 16,
                            title: "Avoid common formula errors",
                            questions: [
                                {
                                    text: "If you know the formula, you do not need to check whether it applies to the specific situation.",
                                    answer: false,
                                    explanation: "Many students use inappropriate formulas (e.g., range equation when heights differ, or sin vs cos). Always verify the formula matches the situation."
                                },
                                {
                                    text: "Common errors include confusing sine and cosine, or using formulas that do not apply to the given situation.",
                                    answer: true,
                                    explanation: "Correct. For example, projectile range formulas assume same initial and final height. Pre-derived formulas need careful application."
                                }
                            ]
                        },
                        {
                            id: 17,
                            title: "Account for all forces",
                            questions: [
                                {
                                    text: "In free body problems, you only need to include the forces that cause motion.",
                                    answer: false,
                                    explanation: "Include ALL forces acting on the object, including friction, air resistance, and normal forces, even if some appear to balance out."
                                },
                                {
                                    text: "Common calculation errors include forgetting friction forces or not using total mass when required.",
                                    answer: true,
                                    explanation: "Correct. Systematic force analysis prevents errors. Draw free body diagrams and list all forces before calculating."
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Graph & Data Analysis Skills",
                    concepts: [
                        {
                            id: 18,
                            title: "Lines of best fit must consider all points",
                            questions: [
                                {
                                    text: "The correct method for drawing a line of best fit is to connect the first and last data points.",
                                    answer: false,
                                    explanation: "This is wrong. Lines of best fit must consider ALL data points, distributing them evenly above and below the line."
                                },
                                {
                                    text: "A proper line of best fit has roughly equal numbers of data points above and below it.",
                                    answer: true,
                                    explanation: "Correct. The line represents the general trend, minimizing overall distance to all points, not just endpoints."
                                }
                            ]
                        },
                        {
                            id: 19,
                            title: "Use points on the line for gradient",
                            questions: [
                                {
                                    text: "When calculating gradient, you should always use the data points from your original measurements table.",
                                    answer: false,
                                    explanation: "Use points clearly on your drawn line of best fit, not original data. The gradient represents your fitted model, not individual measurements."
                                },
                                {
                                    text: "Select two points that lie clearly on your line of best fit, spaced well apart, to calculate gradient.",
                                    answer: true,
                                    explanation: "Correct. Points spaced far apart reduce percentage error. They must lie on your drawn line, not from the data table."
                                }
                            ]
                        },
                        {
                            id: 20,
                            title: "Do not force calculations",
                            questions: [
                                {
                                    text: "If your gradient calculation gives an unexpected value, you should adjust your selected points to get closer to the theoretical value.",
                                    answer: false,
                                    explanation: "Never manipulate calculations to match expected values. Calculate honestly from your graph. This tests your practical skills, not your ability to match textbook values."
                                },
                                {
                                    text: "Your calculated values from experimental data may differ slightly from theoretical values due to experimental uncertainty.",
                                    answer: true,
                                    explanation: "Correct. Real experiments have uncertainty. Show your honest calculation and, if asked, discuss sources of error that might explain discrepancies."
                                }
                            ]
                        },
                        {
                            id: 21,
                            title: "Demonstrate gradient-constant relationship",
                            questions: [
                                {
                                    text: "For questions finding physical constants from graphs, stating the constant value is sufficient.",
                                    answer: false,
                                    explanation: "You must explicitly show how the gradient relates to the constant. For example: gradient = k/2mg, therefore k = gradient × 2mg."
                                },
                                {
                                    text: "Questions about finding constants from graphs assess understanding of what the gradient physically represents.",
                                    answer: true,
                                    explanation: "Correct. The study design specifically requires understanding 'the physical significance of the gradient of linearized data'."
                                }
                            ]
                        },
                        {
                            id: 22,
                            title: "Linearize data appropriately",
                            questions: [
                                {
                                    text: "Plotting raw data is always preferred over linearizing because it shows the actual measurements.",
                                    answer: false,
                                    explanation: "Linearizing data (e.g., plotting x² vs h instead of x vs h) creates straight lines, making it easier to find constants from gradient."
                                },
                                {
                                    text: "Plotting x² versus y instead of x versus y can transform a curved relationship into a straight line.",
                                    answer: true,
                                    explanation: "Correct. If y = kx², plotting y vs x² gives a straight line with gradient k, making analysis simpler and more accurate."
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Conceptual Understanding",
                    concepts: [
                        {
                            id: 23,
                            title: "Projectile motion components",
                            questions: [
                                {
                                    text: "In projectile motion with no air resistance, both horizontal and vertical velocities change throughout the flight.",
                                    answer: false,
                                    explanation: "Horizontal velocity remains constant (no horizontal forces). Only vertical velocity changes due to gravity."
                                },
                                {
                                    text: "Horizontal velocity in projectile motion remains constant when air resistance is negligible.",
                                    answer: true,
                                    explanation: "Correct. With no horizontal forces, horizontal motion has constant velocity. Vertical motion has constant acceleration (g)."
                                }
                            ]
                        },
                        {
                            id: 24,
                            title: "Air resistance effects",
                            questions: [
                                {
                                    text: "Air resistance only affects the horizontal distance traveled by a projectile, not its maximum height.",
                                    answer: false,
                                    explanation: "Air resistance reduces both maximum height and horizontal distance. It removes kinetic energy throughout the flight path."
                                },
                                {
                                    text: "Air resistance reduces both the maximum height and the horizontal range of a projectile.",
                                    answer: true,
                                    explanation: "Correct. Air resistance opposes motion, removing energy. This reduces both vertical and horizontal components of the flight path."
                                }
                            ]
                        },
                        {
                            id: 25,
                            title: "Range equation applicability",
                            questions: [
                                {
                                    text: "The range equation for projectile motion can be used whenever you know the initial velocity and angle.",
                                    answer: false,
                                    explanation: "Range equations assume initial and final heights are equal. When heights differ, you must use component analysis with kinematic equations."
                                },
                                {
                                    text: "Standard range formulas only apply when the projectile lands at the same height it was launched from.",
                                    answer: true,
                                    explanation: "Correct. For different initial and final heights, you must solve vertical motion first to find time, then calculate horizontal distance."
                                }
                            ]
                        },
                        {
                            id: 26,
                            title: "Circular motion forces",
                            questions: [
                                {
                                    text: "A ball on a string in horizontal circular motion experiences three forces: weight, tension, and centripetal force.",
                                    answer: false,
                                    explanation: "There are only two forces: weight (downward) and tension (along string). Centripetal force is not an additional force but the net horizontal component of these forces."
                                },
                                {
                                    text: "For a ball on a string, the horizontal component of tension provides the centripetal force.",
                                    answer: true,
                                    explanation: "Correct. Centripetal force is not a new force but the result of existing forces. The horizontal component of tension points to the center."
                                }
                            ]
                        },
                        {
                            id: 27,
                            title: "Banked curves and normal force",
                            questions: [
                                {
                                    text: "On a banked curve, the normal force points directly toward the center of the turn.",
                                    answer: false,
                                    explanation: "Normal force is perpendicular to the surface. On a banked curve, its horizontal component provides centripetal force. The normal force itself points at an angle above the center."
                                },
                                {
                                    text: "On a banked curve, the normal force is perpendicular to the track surface, not pointing to the center.",
                                    answer: true,
                                    explanation: "Correct. The normal force points perpendicular to the surface. Its horizontal component provides the centripetal acceleration."
                                }
                            ]
                        },
                        {
                            id: 28,
                            title: "Kinetic energy is scalar",
                            questions: [
                                {
                                    text: "Kinetic energy has direction because it depends on velocity, which is a vector.",
                                    answer: false,
                                    explanation: "Kinetic energy is a scalar quantity (no direction). It depends on speed (v²), not velocity. Only the magnitude matters."
                                },
                                {
                                    text: "A projectile at constant speed has constant kinetic energy despite changing velocity direction.",
                                    answer: true,
                                    explanation: "Correct. KE = ½mv² depends only on speed, not direction. Momentum (a vector) changes as direction changes."
                                }
                            ]
                        },
                        {
                            id: 29,
                            title: "Momentum is vector",
                            questions: [
                                {
                                    text: "If an object moves at constant speed in a circle, its momentum is constant.",
                                    answer: false,
                                    explanation: "Momentum is a vector: p = mv. Even at constant speed, changing direction means changing momentum. This is why circular motion requires a net force."
                                },
                                {
                                    text: "Momentum varies as direction varies, even when speed remains constant.",
                                    answer: true,
                                    explanation: "Correct. Momentum has magnitude and direction. Circular motion at constant speed still has changing momentum due to changing direction."
                                }
                            ]
                        },
                        {
                            id: 30,
                            title: "Inelastic collision definition",
                            questions: [
                                {
                                    text: "A collision is inelastic if momentum is not conserved.",
                                    answer: false,
                                    explanation: "Momentum is conserved in all collisions (isolated systems). A collision is inelastic if kinetic energy is not conserved (some KE converts to other forms)."
                                },
                                {
                                    text: "An inelastic collision is one where final kinetic energy is less than initial kinetic energy.",
                                    answer: true,
                                    explanation: "Correct. Some KE converts to heat, sound, deformation. Momentum is always conserved; kinetic energy is not."
                                }
                            ]
                        },
                        {
                            id: 31,
                            title: "Specify kinetic energy",
                            questions: [
                                {
                                    text: "Saying energy is not conserved is sufficient when explaining inelastic collisions.",
                                    answer: false,
                                    explanation: "You must specify kinetic energy is not conserved. Total energy is always conserved. Being precise about the type of energy is essential."
                                },
                                {
                                    text: "When discussing collisions, you must distinguish between total energy and kinetic energy conservation.",
                                    answer: true,
                                    explanation: "Correct. Total energy is always conserved. In inelastic collisions, kinetic energy decreases as it converts to other forms."
                                }
                            ]
                        },
                        {
                            id: 32,
                            title: "Gravitational field decreases with altitude",
                            questions: [
                                {
                                    text: "The value of g can be assumed to be 9.8 N kg⁻¹ at any altitude above Earth's surface.",
                                    answer: false,
                                    explanation: "g decreases with altitude according to g = GM/r². At satellite altitudes, g is significantly less than 9.8 N kg⁻¹."
                                },
                                {
                                    text: "Gravitational field strength decreases with altitude according to an inverse square law.",
                                    answer: true,
                                    explanation: "Correct. g = GM/r² where r is distance from Earth's center. As altitude increases, r increases and g decreases."
                                }
                            ]
                        },
                        {
                            id: 33,
                            title: "Orbital velocity and radius relationship",
                            questions: [
                                {
                                    text: "If orbital velocity changes, the orbital radius must remain constant to maintain the orbit.",
                                    answer: false,
                                    explanation: "If velocity changes, radius must change: v = √(GM/r). The orbital radius is determined by velocity, not independent of it."
                                },
                                {
                                    text: "Orbital velocity depends on orbital radius according to v = √(GM/r).",
                                    answer: true,
                                    explanation: "Correct. Each orbital radius has one stable orbital velocity. Changing velocity requires changing to a different orbit."
                                }
                            ]
                        },
                        {
                            id: 34,
                            title: "Compare calculated and required values",
                            questions: [
                                {
                                    text: "When checking if an orbit is possible, calculating either the required force or the available force is sufficient.",
                                    answer: false,
                                    explanation: "You must calculate both and compare them. Calculate the gravitational force available and the centripetal force required, then determine if they match."
                                },
                                {
                                    text: "Orbit feasibility problems require comparing two calculated quantities, such as available force versus required force.",
                                    answer: true,
                                    explanation: "Correct. You might also compare calculated orbital velocity with given velocity, or calculated radius with given radius. The comparison is essential."
                                }
                            ]
                        },
                        {
                            id: 35,
                            title: "Magnetic force and current direction",
                            questions: [
                                {
                                    text: "Magnetic force on a current-carrying wire is maximum when the wire is parallel to the magnetic field.",
                                    answer: false,
                                    explanation: "Force is maximum when current is perpendicular to the field (F = BIl). When parallel, force is zero."
                                },
                                {
                                    text: "When a current-carrying wire is parallel to the magnetic field, the magnetic force on it is zero.",
                                    answer: true,
                                    explanation: "Correct. F = BIl sin θ where θ is angle between current and field. When parallel, θ = 0, sin 0 = 0, so F = 0."
                                }
                            ]
                        },
                        {
                            id: 36,
                            title: "Slip rings versus split ring commutators",
                            questions: [
                                {
                                    text: "Slip rings and split ring commutators serve the same function in motors and generators.",
                                    answer: false,
                                    explanation: "Slip rings maintain continuous contact for AC (generators). Split ring commutators reverse connections every half turn for DC (motors). Different functions."
                                },
                                {
                                    text: "Slip rings maintain continuous contact with a spinning coil to transfer generated current to external circuits.",
                                    answer: true,
                                    explanation: "Correct. Slip rings allow continuous electrical contact without reversing polarity, essential for AC generators."
                                }
                            ]
                        },
                        {
                            id: 37,
                            title: "Electromagnetic induction requires changing flux",
                            questions: [
                                {
                                    text: "A constant magnetic field through a coil will induce a constant current in the coil.",
                                    answer: false,
                                    explanation: "Constant flux induces no current. Only changing flux induces current (Faraday's law). Once flux stops changing, current returns to zero."
                                },
                                {
                                    text: "According to Faraday's law, only a changing magnetic flux induces an EMF in a coil.",
                                    answer: true,
                                    explanation: "Correct. EMF = -ΔΦ/Δt. If Φ is constant, ΔΦ = 0, so EMF = 0. Change is essential for induction."
                                }
                            ]
                        },
                        {
                            id: 38,
                            title: "Transformers require AC",
                            questions: [
                                {
                                    text: "Transformers work with DC input because they transfer energy through magnetic fields.",
                                    answer: false,
                                    explanation: "Transformers require AC input. DC creates constant flux in the primary, which induces no current in the secondary. Changing flux is necessary."
                                },
                                {
                                    text: "Transformers require AC input to create the changing flux necessary for induction in the secondary coil.",
                                    answer: true,
                                    explanation: "Correct. AC creates oscillating flux in primary, which induces AC in secondary. DC would create constant flux and no output."
                                }
                            ]
                        },
                        {
                            id: 39,
                            title: "Series circuits have constant current",
                            questions: [
                                {
                                    text: "In a series circuit, current varies through different components depending on their resistance.",
                                    answer: false,
                                    explanation: "Current is the same through all components in a series circuit. This is a fundamental property of series connections."
                                },
                                {
                                    text: "The current through each component in a series circuit is identical.",
                                    answer: true,
                                    explanation: "Correct. Series circuits have one path, so the same current flows through every component."
                                }
                            ]
                        },
                        {
                            id: 40,
                            title: "Parallel circuits have constant voltage",
                            questions: [
                                {
                                    text: "In a parallel circuit, the voltage across each branch depends on that branch's resistance.",
                                    answer: false,
                                    explanation: "Voltage across each branch in a parallel circuit is the same. Currents in branches vary according to resistance (I = V/R)."
                                },
                                {
                                    text: "All branches in a parallel circuit have the same voltage across them.",
                                    answer: true,
                                    explanation: "Correct. Parallel connections share the same two connection points, so voltage is identical across all branches."
                                }
                            ]
                        },
                        {
                            id: 41,
                            title: "Electric field direction",
                            questions: [
                                {
                                    text: "Electric field lines point toward positive charges and away from negative charges.",
                                    answer: false,
                                    explanation: "Field lines point away from positive charges and toward negative charges. The direction shows the force on a positive test charge."
                                },
                                {
                                    text: "Electric field lines show the direction a positive test charge would experience force.",
                                    answer: true,
                                    explanation: "Correct. Lines point from positive to negative, showing the direction of force on a positive charge placed in the field."
                                }
                            ]
                        },
                        {
                            id: 42,
                            title: "Like charges repel",
                            questions: [
                                {
                                    text: "Between two like charges, the net electric field is very strong because the fields add together.",
                                    answer: false,
                                    explanation: "Between like charges, field lines repel each other and the net field is effectively zero. Fields oppose, not add."
                                },
                                {
                                    text: "Gravitational forces always attract, while electric forces can attract or repel.",
                                    answer: true,
                                    explanation: "Correct. Gravity only attracts. Electric forces attract between unlike charges and repel between like charges."
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Common Misconceptions",
                    concepts: [
                        {
                            id: 43,
                            title: "Speed of light in media",
                            questions: [
                                {
                                    text: "The speed of light is constant in all transparent media, including glass and water.",
                                    answer: false,
                                    explanation: "Light speed is constant only in vacuum (c). In transparent media, light travels slower: v = c/n where n is refractive index (n > 1)."
                                },
                                {
                                    text: "Light travels slower in glass than in vacuum due to the refractive index being greater than 1.",
                                    answer: true,
                                    explanation: "Correct. Refractive index n = c/v_medium. Since n > 1 for glass, v_medium < c."
                                }
                            ]
                        },
                        {
                            id: 44,
                            title: "Total internal reflection conditions",
                            questions: [
                                {
                                    text: "Total internal reflection can occur when light travels from a less dense to a more dense medium.",
                                    answer: false,
                                    explanation: "Total internal reflection only occurs when light travels from high to low refractive index (e.g., glass to air) and exceeds the critical angle."
                                },
                                {
                                    text: "Total internal reflection requires light traveling from higher to lower refractive index at angles greater than critical angle.",
                                    answer: true,
                                    explanation: "Correct. The critical angle is sin θ_c = n₂/n₁ where n₁ > n₂. Light must be in the denser medium heading to the less dense medium."
                                }
                            ]
                        },
                        {
                            id: 45,
                            title: "Diffraction and gap width",
                            questions: [
                                {
                                    text: "Diffraction only occurs when the wavelength is smaller than the gap width.",
                                    answer: false,
                                    explanation: "Diffraction occurs for wavelengths both shorter and longer than the gap width. The extent of diffraction depends on wavelength, not whether it occurs."
                                },
                                {
                                    text: "The extent of diffraction is determined by the ratio of wavelength to gap width, not simply whether diffraction occurs.",
                                    answer: true,
                                    explanation: "Correct. Diffraction is most noticeable when λ/d ≈ 1, but occurs across a range of ratios. Larger wavelengths diffract more."
                                }
                            ]
                        },
                        {
                            id: 46,
                            title: "Pattern spacing indicates wavelength",
                            questions: [
                                {
                                    text: "Different diffraction pattern spacings always indicate different gap widths were used.",
                                    answer: false,
                                    explanation: "Pattern spacing depends on wavelength: Δx = λL/d. Different spacings indicate different wavelengths if geometry (L and d) is constant."
                                },
                                {
                                    text: "If two diffraction patterns have identical spacing, the wavelengths used were equal.",
                                    answer: true,
                                    explanation: "Correct. Since Δx = λL/d, identical spacing with same geometry means identical wavelength, regardless of the source type (photon or electron)."
                                }
                            ]
                        },
                        {
                            id: 47,
                            title: "Time dilation and frames of reference",
                            questions: [
                                {
                                    text: "A moving object experiences time dilation and therefore ages more slowly.",
                                    answer: false,
                                    explanation: "Objects do not experience time dilation in their own frame. Time passes normally for them. Time dilation is observed by other frames watching the moving object."
                                },
                                {
                                    text: "Time dilation describes how a stationary observer measures time intervals in a moving frame, not what moving observers experience.",
                                    answer: true,
                                    explanation: "Correct. A muon does not experience slowed time. Earth observers measure the muon's lifetime as dilated: t = γt₀."
                                }
                            ]
                        },
                        {
                            id: 48,
                            title: "Length contraction direction",
                            questions: [
                                {
                                    text: "Length contraction affects all dimensions of a moving object equally.",
                                    answer: false,
                                    explanation: "Length contraction only occurs in the direction of relative motion. Perpendicular dimensions are unaffected."
                                },
                                {
                                    text: "Only measurements parallel to the direction of motion are affected by length contraction.",
                                    answer: true,
                                    explanation: "Correct. A train moving horizontally appears shorter horizontally but its height is unchanged. L = L₀/γ applies only to parallel dimension."
                                }
                            ]
                        },
                        {
                            id: 49,
                            title: "Do not mix relativity arguments",
                            questions: [
                                {
                                    text: "The best explanations for relativity problems use both time dilation and length contraction together.",
                                    answer: false,
                                    explanation: "Use one approach consistently. Mixing time dilation and length contraction arguments often leads to contradictions and confusion."
                                },
                                {
                                    text: "Relativity problems should be solved using either time dilation or length contraction, but not both mixed together.",
                                    answer: true,
                                    explanation: "Correct. Choose one frame and one phenomenon. For example, use time dilation in Earth's frame, or length contraction in the particle's frame."
                                }
                            ]
                        },
                        {
                            id: 50,
                            title: "Threshold frequency exists",
                            questions: [
                                {
                                    text: "If you increase the intensity of light below the threshold frequency, you will eventually emit photoelectrons.",
                                    answer: false,
                                    explanation: "Below threshold frequency, no photoelectrons are emitted regardless of intensity. Each photon must have energy hf > W. More photons does not help if each has insufficient energy."
                                },
                                {
                                    text: "The existence of a threshold frequency supports the particle model of light and contradicts the wave model.",
                                    answer: true,
                                    explanation: "Correct. Wave model predicted any frequency should work if intensity is high enough. Particle model correctly predicts individual photon energy matters."
                                }
                            ]
                        },
                        {
                            id: 51,
                            title: "Photoelectrons not photons",
                            questions: [
                                {
                                    text: "The stopping voltage in the photoelectric effect measures the maximum kinetic energy of the photons.",
                                    answer: false,
                                    explanation: "Stopping voltage measures maximum kinetic energy of photoelectrons (the emitted electrons), not photons (the incoming light)."
                                },
                                {
                                    text: "When discussing the photoelectric effect, you must refer to photoelectrons, not photons, when describing ejected particles.",
                                    answer: true,
                                    explanation: "Correct. Photons come in. Photoelectrons come out. The stopping voltage and kinetic energy refer to the electrons."
                                }
                            ]
                        },
                        {
                            id: 52,
                            title: "Frequency affects electron energy, not intensity",
                            questions: [
                                {
                                    text: "Increasing light intensity increases the maximum kinetic energy of individual photoelectrons.",
                                    answer: false,
                                    explanation: "Intensity affects the number of photoelectrons (photocurrent) but not their individual energy. Maximum KE depends on frequency: KE_max = hf - W."
                                },
                                {
                                    text: "Maximum kinetic energy of photoelectrons increases with frequency, not intensity.",
                                    answer: true,
                                    explanation: "Correct. Each photon's energy is hf. Higher frequency means more energy per photon, giving electrons more KE after overcoming work function."
                                }
                            ]
                        },
                        {
                            id: 53,
                            title: "Intensity affects photocurrent",
                            questions: [
                                {
                                    text: "Photocurrent remains constant regardless of light intensity as long as frequency exceeds threshold.",
                                    answer: false,
                                    explanation: "Higher intensity means more photons per second, which produces more photoelectrons per second, increasing photocurrent."
                                },
                                {
                                    text: "At constant frequency above threshold, photocurrent is proportional to light intensity.",
                                    answer: true,
                                    explanation: "Correct. More photons → more photoelectrons → higher current. This relationship holds as long as f > f_threshold."
                                }
                            ]
                        },
                        {
                            id: 54,
                            title: "Changing metal changes work function",
                            questions: [
                                {
                                    text: "Using a different metal plate in the photoelectric effect changes the gradient of the stopping voltage versus frequency graph.",
                                    answer: false,
                                    explanation: "The gradient equals Planck's constant h, which is universal. Different metals have different work functions, changing intercepts but not gradient."
                                },
                                {
                                    text: "Planck's constant can be found from the gradient of a stopping voltage versus frequency graph for any metal.",
                                    answer: true,
                                    explanation: "Correct. The equation is V_s = (h/e)f - W/e, which has form y = mx + c where gradient m = h/e, independent of metal."
                                }
                            ]
                        },
                        {
                            id: 55,
                            title: "Wavelength depends on momentum, not energy",
                            questions: [
                                {
                                    text: "If an electron and a photon have the same energy, they will produce identical diffraction patterns.",
                                    answer: false,
                                    explanation: "Pattern spacing depends on wavelength. Wavelength depends on momentum (λ = h/p), not energy. Same energy does not mean same momentum for different particles."
                                },
                                {
                                    text: "De Broglie wavelength is determined by momentum, which is why particles with equal energy can have different wavelengths.",
                                    answer: true,
                                    explanation: "Correct. For photons: p = E/c. For particles: p = √(2mE). Different mass means different momentum at same energy, thus different wavelength."
                                }
                            ]
                        },
                        {
                            id: 56,
                            title: "Pair production momentum conservation",
                            questions: [
                                {
                                    text: "In electron-positron annihilation, the two gamma rays can travel in any direction as long as total energy is conserved.",
                                    answer: false,
                                    explanation: "The gamma rays must travel in opposite directions to conserve momentum. Initial momentum is essentially zero, so final momenta must cancel."
                                },
                                {
                                    text: "Gamma rays from pair annihilation travel in opposite directions due to conservation of momentum.",
                                    answer: true,
                                    explanation: "Correct. If the electron-positron pair has little net momentum initially, the two photons must have equal and opposite momenta to conserve momentum."
                                }
                            ]
                        },
                        {
                            id: 57,
                            title: "Use both electron masses for pair production",
                            questions: [
                                {
                                    text: "When calculating energy from electron-positron annihilation, use the mass of one electron since they cancel each other out.",
                                    answer: false,
                                    explanation: "Both particles convert to energy. Use the combined mass: E = (2m_e)c². Each electron contributes its mass-energy."
                                },
                                {
                                    text: "The energy released in pair annihilation equals the combined mass of both particles times c².",
                                    answer: true,
                                    explanation: "Correct. E = mc² where m is total mass. For electron-positron: E = 2m_e c² since both particles convert entirely to energy."
                                }
                            ]
                        }
                    ]
                },
                {
                    name: "Problem-Solving Strategies",
                    concepts: [
                        {
                            id: 58,
                            title: "Avoid tautologies",
                            questions: [
                                {
                                    text: "Restating the question in your answer demonstrates you understand what was asked.",
                                    answer: false,
                                    explanation: "Restating is not explaining. Example: 'When horizontal because it is horizontal' is circular reasoning (tautology). You must explain WHY."
                                },
                                {
                                    text: "An explanation must provide reasoning beyond simply restating the condition described in the question.",
                                    answer: true,
                                    explanation: "Correct. For example: 'When horizontal, the current is parallel to the field, therefore F = BIl sin 0 = 0.' This explains the mechanism."
                                }
                            ]
                        },
                        {
                            id: 59,
                            title: "Free body diagrams clarify thinking",
                            questions: [
                                {
                                    text: "Drawing free body diagrams takes too much time and is unnecessary if you can visualize the forces.",
                                    answer: false,
                                    explanation: "Free body diagrams prevent errors and make your reasoning clear to assessors. They help you systematically identify all forces."
                                },
                                {
                                    text: "Free body diagrams help communicate your understanding and prevent missing forces in calculations.",
                                    answer: true,
                                    explanation: "Correct. Assessors value clear diagrams. They show you have systematically considered all forces, reducing errors."
                                }
                            ]
                        },
                        {
                            id: 60,
                            title: "Do not copy formula sheets blindly",
                            questions: [
                                {
                                    text: "Having formulas on your reference sheet means you can copy them into your answer for any relevant question.",
                                    answer: false,
                                    explanation: "Blindly copying formulas without considering the specific question gets no marks. You must apply formulas appropriately to the situation."
                                },
                                {
                                    text: "Assessors can distinguish between considered responses and disjointed facts copied from reference sheets.",
                                    answer: true,
                                    explanation: "Correct. Random formula sheet material that does not address the question demonstrates lack of understanding and receives no credit."
                                }
                            ]
                        },
                        {
                            id: 61,
                            title: "State assumptions when relevant",
                            questions: [
                                {
                                    text: "Assumptions should never be mentioned because they suggest your answer might be wrong.",
                                    answer: false,
                                    explanation: "Stating assumptions shows sophisticated understanding. For example, noting you ignored air resistance or assumed constant acceleration demonstrates awareness of model limitations."
                                },
                                {
                                    text: "Explicitly stating assumptions when discussing experiments demonstrates understanding of model limitations.",
                                    answer: true,
                                    explanation: "Correct. Recognizing what you assumed (e.g., negligible friction, point mass, uniform field) shows depth of understanding."
                                }
                            ]
                        },
                        {
                            id: 62,
                            title: "Address the question purpose",
                            questions: [
                                {
                                    text: "As long as your calculations are correct, it does not matter if you explain what the question was asking for.",
                                    answer: false,
                                    explanation: "You must address the purpose. If asked to verify, compare, or determine feasibility, your answer must make that judgment explicit, not just calculate values."
                                },
                                {
                                    text: "When questions ask you to determine if something will work, you must calculate relevant values and then make an explicit comparison or judgment.",
                                    answer: true,
                                    explanation: "Correct. Calculate, then state the conclusion clearly: 'Since required force exceeds available force, the proposal will not work.'"
                                }
                            ]
                        },
                        {
                            id: 63,
                            title: "Break complex problems into steps",
                            questions: [
                                {
                                    text: "For projectile motion, you should analyze the entire path as a single calculation to avoid errors.",
                                    answer: false,
                                    explanation: "Breaking into too many phases causes errors, but you should separate horizontal and vertical components. Horizontal is constant velocity; vertical uses constant acceleration."
                                },
                                {
                                    text: "Analyzing horizontal and vertical components separately simplifies projectile motion problems.",
                                    answer: true,
                                    explanation: "Correct. Horizontal: constant velocity. Vertical: constant acceleration. Treat independently then combine. This systematic approach reduces errors."
                                }
                            ]
                        },
                        {
                            id: 64,
                            title: "Check final answers for reasonableness",
                            questions: [
                                {
                                    text: "Once you have completed a calculation, you should move on immediately to save time for other questions.",
                                    answer: false,
                                    explanation: "Briefly check if your answer makes physical sense. If you calculate a person weighs 7000 N or a speed exceeds light speed, something is wrong."
                                },
                                {
                                    text: "Checking whether your calculated result is physically reasonable helps catch errors before submitting.",
                                    answer: true,
                                    explanation: "Correct. Ask: Is the magnitude sensible? Are the units correct? Does the sign make sense? Quick checks catch many errors."
                                }
                            ]
                        },
                        {
                            id: 65,
                            title: "Use original phrasing between calculations",
                            questions: [
                                {
                                    text: "Using the same phrases repeatedly throughout your exam shows consistency and clarity.",
                                    answer: false,
                                    explanation: "Repetitive phrasing suggests you are copying without thinking. Vary your explanations naturally while maintaining accuracy."
                                },
                                {
                                    text: "Expressing concepts in your own words demonstrates genuine understanding rather than memorization.",
                                    answer: true,
                                    explanation: "Correct. If you truly understand, you can explain the same concept different ways. Exact repetition suggests rote learning."
                                }
                            ]
                        },
                        {
                            id: 66,
                            title: "Distinguish between similar concepts",
                            questions: [
                                {
                                    text: "Motors and generators both involve coils in magnetic fields, so the same explanations apply to both.",
                                    answer: false,
                                    explanation: "Motors convert electrical to kinetic energy. Generators convert kinetic to electrical. Similar components but opposite functions. Be precise about which you are discussing."
                                },
                                {
                                    text: "Confusing motors with generators, or slip rings with commutators, loses marks due to lack of precision.",
                                    answer: true,
                                    explanation: "Correct. These appear in nearly every exam. Know the specific function of each device and do not conflate them."
                                }
                            ]
                        },
                        {
                            id: 67,
                            title: "Read examination reports",
                            questions: [
                                {
                                    text: "Past examination reports mainly just show what the answers were and are not useful for improving.",
                                    answer: false,
                                    explanation: "Reports show common errors, model answers, and what assessors look for. They are invaluable study resources showing exactly where students lose marks."
                                },
                                {
                                    text: "Examination reports provide insight into common student errors and what assessors expect in complete answers.",
                                    answer: true,
                                    explanation: "Correct. Reports explicitly state common mistakes and show the minimum working required. Reading them helps you avoid predictable errors."
                                }
                            ]
                        },
                        {
                            id: 68,
                            title: "Master prerequisite concepts",
                            questions: [
                                {
                                    text: "Units 3 and 4 Physics content is independent from Units 1 and 2, so earlier material does not matter.",
                                    answer: false,
                                    explanation: "Units 3 and 4 build on Units 1 and 2. Weak understanding of circuits, forces, or energy from earlier units will cause problems in advanced topics."
                                },
                                {
                                    text: "Students must master underpinning concepts from Units 1 and 2 before successfully tackling Units 3 and 4 material.",
                                    answer: true,
                                    explanation: "Correct. For example, not understanding series versus parallel circuits from Unit 1 will cause errors in transformer and power transmission questions."
                                }
                            ]
                        },
                        {
                            id: 69,
                            title: "Organize your approach to long questions",
                            questions: [
                                {
                                    text: "For complex questions, starting calculations immediately shows confidence and saves time.",
                                    answer: false,
                                    explanation: "Planning your approach first leads to organized, complete solutions. Students who dive in often produce disorganized work with missing steps."
                                },
                                {
                                    text: "Taking time to formulate a strategy before beginning complex calculations results in more organized solutions.",
                                    answer: true,
                                    explanation: "Correct. Ask yourself: What am I trying to find? What do I need to calculate first? What will I compare it to? Then execute systematically."
                                }
                            ]
                        },
                        {
                            id: 70,
                            title: "Answer with appropriate detail",
                            questions: [
                                {
                                    text: "More detail is always better, so you should write everything you know about a topic to ensure full marks.",
                                    answer: false,
                                    explanation: "Answer what is asked, no more or less. Irrelevant information wastes time and suggests you do not understand what is required."
                                },
                                {
                                    text: "Answers should address exactly what the question asks, with sufficient detail for the marks allocated.",
                                    answer: true,
                                    explanation: "Correct. A 1-mark question needs a brief answer. A 3-mark question needs calculation, comparison, and conclusion. Match detail to marks."
                                }
                            ]
                        },
                        {
                            id: 71,
                            title: "Be specific with physics terminology",
                            questions: [
                                {
                                    text: "Using general terms like 'energy' instead of 'kinetic energy' is acceptable since the meaning is usually clear from context.",
                                    answer: false,
                                    explanation: "Be specific. Say 'kinetic energy,' not 'energy.' Say 'gravitational field strength,' not 'gravity.' Precision in terminology is essential."
                                },
                                {
                                    text: "Physics requires precise terminology to distinguish between related but different concepts like total energy and kinetic energy.",
                                    answer: true,
                                    explanation: "Correct. Vague language loses marks. Different forms of energy, types of forces, and related concepts must be clearly distinguished."
                                }
                            ]
                        },
                        {
                            id: 72,
                            title: "Variables must be defined",
                            questions: [
                                {
                                    text: "In practical investigations, it is obvious which variables are independent and dependent from the context.",
                                    answer: false,
                                    explanation: "Explicitly identify variables. Independent: what you change. Dependent: what you measure. Controlled: what you keep constant. Do not assume it is obvious."
                                },
                                {
                                    text: "Correctly identifying independent, dependent, and controlled variables demonstrates understanding of experimental design.",
                                    answer: true,
                                    explanation: "Correct. These distinctions are fundamental. Reversing independent and dependent variables indicates misunderstanding of the experiment."
                                }
                            ]
                        },
                        {
                            id: 73,
                            title: "Explain mechanisms, not just outcomes",
                            questions: [
                                {
                                    text: "Stating that something happens is sufficient explanation for why it happens.",
                                    answer: false,
                                    explanation: "You must explain the mechanism. Example: Do not just say transformers need AC. Explain that AC creates changing flux, which induces current by Faraday's law."
                                },
                                {
                                    text: "Complete physics explanations describe the causal mechanism connecting cause to effect.",
                                    answer: true,
                                    explanation: "Correct. Show the chain of reasoning: A causes B because of principle C, which results in D. Link concepts together."
                                }
                            ]
                        },
                        {
                            id: 74,
                            title: "Pick one phenomenon for relativity problems",
                            questions: [
                                {
                                    text: "The strongest relativity explanations use both time dilation and length contraction to provide multiple perspectives.",
                                    answer: false,
                                    explanation: "Pick one approach and one frame. Either time dilation in the Earth frame or length contraction in the particle frame. Mixing them creates confusion."
                                },
                                {
                                    text: "Consistent use of a single frame of reference and phenomenon prevents contradictions in relativity problems.",
                                    answer: true,
                                    explanation: "Correct. Commit to one approach: Earth observes time dilation of the muon, or the muon observes length contraction of the distance. Not both mixed."
                                }
                            ]
                        },
                        {
                            id: 75,
                            title: "Wave model predictions versus experimental results",
                            questions: [
                                {
                                    text: "For photoelectric effect questions, describing any one of the three key findings is sufficient for full marks.",
                                    answer: false,
                                    explanation: "Pick one finding and explain it completely: What did wave model predict? What did experiment show? How does particle model explain it? Partial descriptions of multiple findings receive fewer marks."
                                },
                                {
                                    text: "Complete photoelectric effect explanations contrast wave model predictions with experimental observations and particle model explanations.",
                                    answer: true,
                                    explanation: "Correct. For threshold frequency, time delay, or frequency dependence: state all three parts. Amalgamating findings without depth demonstrates incomplete understanding."
                                }
                            ]
                        }
                    ]
                }
            ]
        };

        // ============================================================
        // APPLICATION CODE - DO NOT MODIFY BELOW THIS LINE
        // ============================================================

        let appState = {
            studentName: '',
            currentCategory: 0,
            currentQuestionIndex: 0,
            responses: {},
            filter: 'all',
            lastSaved: null
        };

        function init() {
            loadState();
            setupEventListeners();
            updateAllDisplays();
        }

        function updateAllDisplays() {
            renderCurrentQuestion();
            updateProgress();
            renderCategorySummary();
            updateFeedbackTab();
            updateUtilityStats();
        }

        function loadState() {
            const saved = localStorage.getItem('vcePhysicsState');
            if (saved) {
                try {
                    const parsed = JSON.parse(saved);
                    appState = { ...appState, ...parsed };
                    document.getElementById('studentName').value = appState.studentName || '';
                    document.getElementById('categorySelect').value = appState.currentCategory;
                } catch (e) {
                    console.error('Error loading state:', e);
                }
            }
        }

        function saveState() {
            appState.lastSaved = new Date().toISOString();
            localStorage.setItem('vcePhysicsState', JSON.stringify(appState));
        }

        function setupEventListeners() {
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    switchTab(tab.dataset.tab);
                });
            });

            document.getElementById('categorySelect').addEventListener('change', (e) => {
                appState.currentCategory = parseInt(e.target.value);
                appState.currentQuestionIndex = 0;
                updateAllDisplays();
                saveState();
            });

            document.getElementById('studentName').addEventListener('change', (e) => {
                appState.studentName = e.target.value;
                saveState();
            });

            document.getElementById('prevBtn').addEventListener('click', () => navigateQuestion(-1));
            document.getElementById('nextBtn').addEventListener('click', () => navigateQuestion(1));
            document.getElementById('skipBtn').addEventListener('click', () => navigateQuestion(1));

            document.addEventListener('keydown', (e) => {
                if (e.target.tagName === 'INPUT') return;
                
                switch(e.key.toLowerCase()) {
                    case 't':
                        answerQuestion(true);
                        break;
                    case 'f':
                        answerQuestion(false);
                        break;
                    case 'arrowleft':
                        navigateQuestion(-1);
                        break;
                    case 'arrowright':
                        navigateQuestion(1);
                        break;
                }
            });

            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    appState.filter = btn.dataset.filter;
                    updateFeedbackTab();
                });
            });

            document.getElementById('saveBtn').addEventListener('click', () => {
                saveState();
                showModal('Progress Saved', 'Your progress has been saved successfully.');
            });

            document.getElementById('exportBtn').addEventListener('click', exportResults);
            document.getElementById('emailBtn').addEventListener('click', emailResults);
            document.getElementById('randomizeBtn').addEventListener('click', () => {
                showModal('Randomize Questions', 'Questions are automatically randomized within each category.');
            });
            document.getElementById('resetBtn').addEventListener('click', () => {
                showModal('Reset All Progress', 'This will delete all your responses. Are you sure?', true, resetProgress);
            });

            document.getElementById('modalCancel').addEventListener('click', hideModal);
        }

        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(tc => tc.classList.remove('active'));
            
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
            document.getElementById(`${tabName}-tab`).classList.add('active');

            if (tabName === 'feedback') {
                updateFeedbackTab();
            } else if (tabName === 'utility') {
                updateUtilityStats();
            }
        }

        function getCategoryQuestions() {
            if (!questionDatabase.categories || questionDatabase.categories.length === 0) {
                return [];
            }
            const category = questionDatabase.categories[appState.currentCategory];
            if (!category || !category.concepts) return [];
            
            const questions = [];
            category.concepts.forEach((concept) => {
                if (concept.questions) {
                    concept.questions.forEach((question, qIndex) => {
                        questions.push({
                            conceptId: concept.id,
                            questionIndex: qIndex,
                            question: question,
                            concept: concept
                        });
                    });
                }
            });
            return questions;
        }

        function renderCurrentQuestion() {
            const questions = getCategoryQuestions();
            if (questions.length === 0) {
                document.getElementById('questionContainer').innerHTML = '<p style="text-align: center; color: var(--neutral); padding: 2rem;">No questions available. Please add your question database.</p>';
                return;
            }

            const currentQ = questions[appState.currentQuestionIndex];
            const responseKey = `${appState.currentCategory}-${currentQ.conceptId}-${currentQ.questionIndex}`;
            const response = appState.responses[responseKey];

            const html = `
                <div class="question-card active">
                    <div class="question-header">
                        <span>Question ${appState.currentQuestionIndex + 1}/${questions.length}</span>
                        <span class="status-indicator ${response ? (response.correct ? 'status-correct' : 'status-incorrect') : 'status-unanswered'}">
                            ${response ? (response.correct ? 'Correct' : 'Incorrect') : 'Unanswered'}
                        </span>
                    </div>
                    <div class="question-text">${currentQ.question.text}</div>
                    <div class="answer-buttons">
                        <button class="answer-btn ${response && response.answer === true ? (response.correct ? 'correct' : 'incorrect') : ''}" 
                                onclick="answerQuestion(true)" ${response ? 'disabled' : ''}>
                            TRUE
                        </button>
                        <button class="answer-btn ${response && response.answer === false ? (response.correct ? 'correct' : 'incorrect') : ''}" 
                                onclick="answerQuestion(false)" ${response ? 'disabled' : ''}>
                            FALSE
                        </button>
                    </div>
                    ${response ? `
                        <div class="feedback show ${response.correct ? 'correct' : 'incorrect'}">
                            <div class="feedback-header">${response.correct ? 'Correct' : 'Incorrect'}</div>
                            <div>${currentQ.question.explanation}</div>
                        </div>
                    ` : ''}
                </div>
            `;

            document.getElementById('questionContainer').innerHTML = html;
        }

        function answerQuestion(answer) {
            const questions = getCategoryQuestions();
            if (questions.length === 0) return;
            
            const currentQ = questions[appState.currentQuestionIndex];
            const responseKey = `${appState.currentCategory}-${currentQ.conceptId}-${currentQ.questionIndex}`;

            if (appState.responses[responseKey]) return;

            const correct = answer === currentQ.question.answer;
            
            appState.responses[responseKey] = {
                answer: answer,
                correct: correct,
                timestamp: new Date().toISOString()
            };

            saveState();
            updateAllDisplays();
        }

        function navigateQuestion(direction) {
            const questions = getCategoryQuestions();
            appState.currentQuestionIndex += direction;
            
            if (appState.currentQuestionIndex < 0) {
                appState.currentQuestionIndex = 0;
            } else if (appState.currentQuestionIndex >= questions.length) {
                appState.currentQuestionIndex = questions.length - 1;
            }

            renderCurrentQuestion();
            updateProgress();
            saveState();
        }

        function updateProgress() {
            const questions = getCategoryQuestions();
            if (questions.length === 0) {
                document.getElementById('progressFill').style.width = '0%';
                document.getElementById('progressText').textContent = '0/0 (0%)';
                return;
            }

            let answered = 0;
            questions.forEach((q) => {
                const key = `${appState.currentCategory}-${q.conceptId}-${q.questionIndex}`;
                if (appState.responses[key]) answered++;
            });

            const percentage = Math.round((answered / questions.length) * 100);
            document.getElementById('progressFill').style.width = percentage + '%';
            document.getElementById('progressText').textContent = `${answered}/${questions.length} (${percentage}%)`;
        }

        function renderCategorySummary() {
            if (!questionDatabase.categories || questionDatabase.categories.length === 0) {
                document.getElementById('categorySummary').innerHTML = '';
                return;
            }

            const html = questionDatabase.categories.map((category, index) => {
                const totalQuestions = category.concepts ? category.concepts.reduce((sum, c) => sum + (c.questions ? c.questions.length : 0), 0) : 0;
                let answered = 0;
                
                if (category.concepts) {
                    category.concepts.forEach((concept) => {
                        if (concept.questions) {
                            concept.questions.forEach((q, qIndex) => {
                                const key = `${index}-${concept.id}-${qIndex}`;
                                if (appState.responses[key]) answered++;
                            });
                        }
                    });
                }

                const percentage = totalQuestions > 0 ? Math.round((answered / totalQuestions) * 100) : 0;

                return `
                    <div class="category-card">
                        <h3>${category.name}</h3>
                        <div class="stats">
                            ${answered}/${totalQuestions} answered (${percentage}%)
                        </div>
                    </div>
                `;
            }).join('');

            document.getElementById('categorySummary').innerHTML = html;
        }

        function updateFeedbackTab() {
            if (!questionDatabase.categories || questionDatabase.categories.length === 0) {
                return;
            }

            const conceptMastery = {};
            
            questionDatabase.categories.forEach((category, catIndex) => {
                if (!category.concepts) return;
                
                category.concepts.forEach((concept) => {
                    const key = `${catIndex}-${concept.id}`;
                    conceptMastery[key] = {
                        concept: concept,
                        categoryName: category.name,
                        categoryIndex: catIndex,
                        responses: []
                    };

                    if (concept.questions) {
                        concept.questions.forEach((q, qIndex) => {
                            const responseKey = `${catIndex}-${concept.id}-${qIndex}`;
                            const response = appState.responses[responseKey];
                            conceptMastery[key].responses.push(response);
                        });
                    }
                });
            });

            let mastered = 0, partial = 0, needsWork = 0, notAttempted = 0;

            Object.values(conceptMastery).forEach(cm => {
                const answered = cm.responses.filter(r => r !== undefined);
                const correct = answered.filter(r => r && r.correct);

                if (answered.length === 0) {
                    notAttempted++;
                } else if (answered.length === 2 && correct.length === 2) {
                    mastered++;
                } else if (correct.length > 0) {
                    partial++;
                } else {
                    needsWork++;
                }
            });

            document.getElementById('masteredCount').textContent = mastered;
            document.getElementById('partialCount').textContent = partial;
            document.getElementById('needsWorkCount').textContent = needsWork;
            document.getElementById('notAttemptedCount').textContent = notAttempted;

            const totalAnswered = Object.keys(appState.responses).length;
            const totalQuestions = Object.keys(conceptMastery).length * 2;
            const overallPercentage = totalQuestions > 0 ? Math.round((totalAnswered / totalQuestions) * 100) : 0;
            
            document.getElementById('overallProgressFill').style.width = overallPercentage + '%';
            document.getElementById('overallProgressText').textContent = `${totalAnswered}/${totalQuestions} (${overallPercentage}%)`;

            renderConceptList(conceptMastery);
        }

        function renderConceptList(conceptMastery) {
            const filtered = Object.entries(conceptMastery).filter(([key, cm]) => {
                const answered = cm.responses.filter(r => r !== undefined);
                const correct = answered.filter(r => r && r.correct);

                if (appState.filter === 'all') return true;
                if (appState.filter === 'mastered') return answered.length === 2 && correct.length === 2;
                if (appState.filter === 'partial') return answered.length > 0 && correct.length > 0 && correct.length < 2;
                if (appState.filter === 'needs-work') return answered.length > 0 && correct.length === 0;
                if (appState.filter === 'not-attempted') return answered.length === 0;
                return false;
            });

            const html = filtered.map(([key, cm]) => {
                const answered = cm.responses.filter(r => r !== undefined);
                const correct = answered.filter(r => r && r.correct);

                let status = 'not-attempted';
                let statusText = 'Not Attempted';
                
                if (answered.length === 2 && correct.length === 2) {
                    status = 'mastered';
                    statusText = 'Mastered (2/2)';
                } else if (correct.length > 0) {
                    status = 'partial';
                    statusText = `Partial (${correct.length}/2)`;
                } else if (answered.length > 0) {
                    status = 'needs-work';
                    statusText = 'Needs Work (0/2)';
                }

                return `
                    <div class="concept-item ${status}">
                        <div class="concept-header">
                            <span class="concept-title">Advice Point ${cm.concept.id}: ${cm.concept.title}</span>
                            <span>${statusText}</span>
                        </div>
                        <div class="concept-details">
                            Category: ${cm.categoryName}<br>
                            ${cm.responses.map((r, i) => 
                                r ? `Question ${i + 1}: ${r.correct ? 'Correct ✓' : 'Incorrect ✗'}` : `Question ${i + 1}: Not attempted`
                            ).join('<br>')}
                        </div>
                    </div>
                `;
            }).join('');

            document.getElementById('conceptList').innerHTML = html || '<p style="text-align: center; color: var(--neutral); padding: 2rem;">No concepts match this filter.</p>';
        }

        function updateUtilityStats() {
            const totalAnswered = Object.keys(appState.responses).length;
            const correct = Object.values(appState.responses).filter(r => r && r.correct).length;
            const accuracy = totalAnswered > 0 ? Math.round((correct / totalAnswered) * 100) : 0;

            document.getElementById('statAnswered').textContent = `${totalAnswered}/150`;
            document.getElementById('statAccuracy').textContent = `${accuracy}%`;
            
            if (questionDatabase.categories && questionDatabase.categories[appState.currentCategory]) {
                document.getElementById('statCategory').textContent = questionDatabase.categories[appState.currentCategory].name.split(' ')[0];
            }
            
            document.getElementById('statLastSession').textContent = appState.lastSaved ? new Date(appState.lastSaved).toLocaleString() : 'Never';
        }

        function exportResults() {
            const results = generateResultsText();
            const blob = new Blob([results], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `VCE_Physics_Results_${appState.studentName || 'Student'}.txt`;
            a.click();
            URL.revokeObjectURL(url);
        }

        function emailResults() {
            const results = generateResultsText();
            const subject = encodeURIComponent(`VCE Physics Progress - ${appState.studentName || 'Student'}`);
            const body = encodeURIComponent(results);
            window.location.href = `mailto:?subject=${subject}&body=${body}`;
        }

        function generateResultsText() {
            const totalAnswered = Object.keys(appState.responses).length;
            const correct = Object.values(appState.responses).filter(r => r && r.correct).length;
            const accuracy = totalAnswered > 0 ? Math.round((correct / totalAnswered) * 100) : 0;

            let text = `VCE Physics Examiner's Advice - Progress Report\n`;
            text += `Student: ${appState.studentName || 'Not provided'}\n`;
            text += `Date: ${new Date().toLocaleString()}\n\n`;
            text += `Overall Progress: ${totalAnswered}/150 (${Math.round((totalAnswered/150)*100)}%)\n`;
            text += `Accuracy: ${accuracy}%\n\n`;

            if (questionDatabase.categories) {
                text += `Category Breakdown:\n`;
                questionDatabase.categories.forEach((category, index) => {
                    const categoryQuestions = category.concepts ? category.concepts.reduce((sum, c) => sum + (c.questions ? c.questions.length : 0), 0) : 0;
                    let categoryAnswered = 0;
                    
                    if (category.concepts) {
                        category.concepts.forEach((concept) => {
                            if (concept.questions) {
                                concept.questions.forEach((q, qIndex) => {
                                    const key = `${index}-${concept.id}-${qIndex}`;
                                    if (appState.responses[key]) categoryAnswered++;
                                });
                            }
                        });
                    }

                    text += `- ${category.name}: ${categoryAnswered}/${categoryQuestions}\n`;
                });
            }

            return text;
        }

        function resetProgress() {
            appState.responses = {};
            appState.currentQuestionIndex = 0;
            saveState();
            updateAllDisplays();
            hideModal();
        }

        function showModal(header, body, showConfirm = false, confirmCallback = null) {
            document.getElementById('modalHeader').textContent = header;
            document.getElementById('modalBody').textContent = body;
            document.getElementById('modal').classList.add('show');

            if (showConfirm) {
                document.getElementById('modalConfirm').style.display = 'block';
                document.getElementById('modalConfirm').onclick = () => {
                    if (confirmCallback) confirmCallback();
                    hideModal();
                };
            } else {
                document.getElementById('modalConfirm').style.display = 'none';
            }
        }

        function hideModal() {
            document.getElementById('modal').classList.remove('show');
        }

        window.answerQuestion = answerQuestion;

        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }
    </script>
</body>
</html>