<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biology Test Feedback</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: #4a5568;
            margin-bottom: 10px;
            font-size: 2.5em;
            text-align: center;
        }

        .subtitle {
            text-align: center;
            color: #718096;
            margin-bottom: 40px;
            font-size: 1.1em;
        }

        .section {
            margin-bottom: 40px;
        }

        .section-title {
            font-size: 1.8em;
            color: #2d3748;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #e2e8f0;
        }

        .question-item {
            margin-bottom: 15px;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease;
        }

        .question-item.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .question-item.locked {
            pointer-events: none;
            opacity: 0.3;
        }

        details {
            background: #f7fafc;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 15px;
            transition: all 0.3s ease;
        }

        details[open] {
            background: #fff;
            border-color: #cbd5e0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        summary {
            cursor: pointer;
            font-weight: 600;
            color: #2d3748;
            list-style: none;
            position: relative;
            padding-left: 30px;
            user-select: none;
        }

        summary::-webkit-details-marker {
            display: none;
        }

        summary::before {
            content: '▶';
            position: absolute;
            left: 0;
            top: 0;
            transition: transform 0.3s ease;
        }

        details[open] summary::before {
            transform: rotate(90deg);
        }

        .error-summary {
            color: #e53e3e;
        }

        .correct-summary {
            color: #38a169;
        }

        .content {
            margin-top: 15px;
            line-height: 1.6;
        }

        .explanation {
            background: #fef5e7;
            border-left: 4px solid #f39c12;
            padding: 15px;
            margin-top: 10px;
            border-radius: 4px;
        }

        .correct-answer {
            background: #e8f5e9;
            border-left: 4px solid #4caf50;
            padding: 15px;
            margin-top: 10px;
            border-radius: 4px;
        }

        .your-answer {
            color: #e53e3e;
            font-weight: 600;
        }

        .correct-text {
            color: #38a169;
            font-weight: 600;
        }

        .timer-indicator {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid #cbd5e0;
            border-radius: 50%;
            margin-left: 10px;
            vertical-align: middle;
            position: relative;
            overflow: hidden;
        }

        .timer-fill {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #4299e1;
            transform: scaleY(0);
            transform-origin: bottom;
            transition: transform 5s linear;
        }

        .timer-fill.active {
            transform: scaleY(1);
        }

        .results-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            margin-top: 40px;
        }

        .results-section details {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.3);
        }

        .results-section summary {
            color: white;
            font-size: 1.3em;
        }

        .results-content {
            font-size: 1.2em;
            margin-top: 20px;
        }

        .score {
            font-size: 3em;
            font-weight: bold;
            margin: 20px 0;
        }

        .loading-text {
            color: #718096;
            font-style: italic;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Biology Test Feedback</h1>
        <p class="subtitle">Review your answers and learn from your mistakes</p>

        <!-- Errors Section -->
        <div class="section">
            <h2 class="section-title">❌ Questions to Review</h2>
            
            <!-- Multiple Choice Errors -->
            <div class="question-item" id="mc-error-1">
                <details>
                    <summary class="error-summary">
                        Multiple Choice Q4: Function of Villi
                        <span class="timer-indicator"><span class="timer-fill"></span></span>
                    </summary>
                    <div class="content">
                        <p><strong>Question:</strong> The function of the villi is to</p>
                        <p class="your-answer">Your answer: A (incorrect option selected)</p>
                        <div class="explanation">
                            <p><strong>Why this is incorrect:</strong> You may have confused the function of villi with another structure.</p>
                            <p><strong>Correct Answer:</strong> Villi create a large surface area for the absorption of nutrients.</p>
                            <p><strong>Key Concept:</strong> Villi are tiny, finger-like projections in the small intestine. They dramatically increase the surface area (up to 600 times) allowing for maximum nutrient absorption. Each villus contains blood capillaries and a lacteal for absorbing different types of nutrients. Without villi, we couldn't absorb enough nutrients from our food to survive.</p>
                        </div>
                    </div>
                </details>
            </div>

            <!-- Short Answer Errors -->
            <div class="question-item locked" id="sa-error-1">
                <details>
                    <summary class="error-summary">
                        Short Answer Q2: Physical vs Chemical Digestion
                        <span class="timer-indicator"><span class="timer-fill"></span></span>
                    </summary>
                    <div class="content">
                        <p><strong>Question:</strong> Classify digestion types as physical or chemical</p>
                        <p class="your-answer">Your error: Classified stomach churning as chemical digestion</p>
                        <div class="explanation">
                            <p><strong>Why this is incorrect:</strong> Stomach churning involves muscle movements that mix food, which is a mechanical process, not a chemical change.</p>
                            <p><strong>Correct Answer:</strong> Stomach movement/churning is PHYSICAL digestion.</p>
                            <p><strong>Key Concept:</strong> Physical digestion = any mechanical breakdown (chewing, churning, mixing). Chemical digestion = molecular changes using enzymes or acids. The stomach does BOTH: churning (physical) and acid/enzyme breakdown (chemical).</p>
                        </div>
                    </div>
                </details>
            </div>

            <div class="question-item locked" id="sa-error-2">
                <details>
                    <summary class="error-summary">
                        Short Answer Q3i(d): Diaphragm Breathing Mechanism
                        <span class="timer-indicator"><span class="timer-fill"></span></span>
                    </summary>
                    <div class="content">
                        <p><strong>Question:</strong> Explain diaphragm breathing mechanism</p>
                        <p class="your-answer">Your answer: No response provided</p>
                        <div class="explanation">
                            <p><strong>Complete Answer Needed:</strong> When the diaphragm contracts, it flattens and moves downward. This increases the volume of the chest cavity, which decreases the air pressure inside the lungs. Air then rushes in from outside to equalize the pressure (inhalation). When the diaphragm relaxes, it returns to its dome shape, decreasing chest cavity volume and forcing air out (exhalation).</p>
                            <p><strong>Key Concept:</strong> Breathing is driven by pressure changes, not by the lungs "sucking" air. The diaphragm is the main muscle that creates these pressure changes.</p>
                        </div>
                    </div>
                </details>
            </div>

            <div class="question-item locked" id="sa-error-3">
                <details>
                    <summary class="error-summary">
                        Short Answer Q3ii(a): Blood Oxygen Levels
                        <span class="timer-indicator"><span class="timer-fill"></span></span>
                    </summary>
                    <div class="content">
                        <p><strong>Question:</strong> Match blood samples to body locations using oxygen levels</p>
                        <p class="your-answer">Your answer: Not all locations matched correctly</p>
                        <div class="explanation">
                            <p><strong>Key Concept to Remember:</strong> Blood oxygen levels follow this pattern:
                            - Highest oxygen: Left side of heart and arteries (carrying blood FROM lungs)
                            - Lowest oxygen: Right side of heart and veins (carrying blood TO lungs)
                            - Medium oxygen: Capillaries (where oxygen is being delivered)</p>
                            <p><strong>Tip:</strong> Remember - Arteries = Away from heart (usually high O₂), Veins = Returning to heart (usually low O₂). Exception: Pulmonary vessels are reversed.</p>
                        </div>
                    </div>
                </details>
            </div>

            <div class="question-item locked" id="sa-error-4">
                <details>
                    <summary class="error-summary">
                        Short Answer Q3ii(b): Circulatory System Support
                        <span class="timer-indicator"><span class="timer-fill"></span></span>
                    </summary>
                    <div class="content">
                        <p><strong>Question:</strong> Explain circulatory support for three body systems</p>
                        <p class="your-answer">Your answer: Vague and non-specific responses</p>
                        <div class="explanation">
                            <p><strong>Specific Answers Needed:</strong></p>
                            <p><strong>Respiratory system:</strong> Blood carries oxygen from lungs to all body cells AND carries carbon dioxide from cells back to lungs for removal. This two-way transport is essential for cellular respiration.</p>
                            <p><strong>Excretory system:</strong> Blood transports metabolic wastes (like urea from protein breakdown) to the kidneys for filtration. It also helps maintain water and salt balance.</p>
                            <p><strong>Digestive system:</strong> Blood absorbs nutrients through capillaries in the villi of the small intestine, then distributes these nutrients (glucose, amino acids, vitamins) to all body cells for energy and growth.</p>
                        </div>
                    </div>
                </details>
            </div>

            <div class="question-item locked" id="sa-error-5">
                <details>
                    <summary class="error-summary">
                        Short Answer Q6b: Kidney Waste Product
                        <span class="timer-indicator"><span class="timer-fill"></span></span>
                    </summary>
                    <div class="content">
                        <p><strong>Question:</strong> Name waste fluid from kidneys</p>
                        <p class="your-answer">Your answer: "Urine leaves the kidneys"</p>
                        <div class="explanation">
                            <p><strong>Why this needs improvement:</strong> While your statement is true, the question asked for the NAME of the waste fluid.</p>
                            <p><strong>Correct Answer:</strong> Urine</p>
                            <p><strong>Key Concept:</strong> The kidneys produce urine as their waste product. This urine contains water, urea, excess salts, and other waste products filtered from the blood.</p>
                        </div>
                    </div>
                </details>
            </div>

            <div class="question-item locked" id="sa-error-6">
                <details>
                    <summary class="error-summary">
                        Short Answer Q6d: Dialysis Function
                        <span class="timer-indicator"><span class="timer-fill"></span></span>
                    </summary>
                    <div class="content">
                        <p><strong>Question:</strong> Describe dialysis machine function</p>
                        <p class="your-answer">Your answer: Mentioned that dialysis doesn't add oxygen</p>
                        <div class="explanation">
                            <p><strong>Why this is incorrect:</strong> You're confusing dialysis with lung function. The question asks what dialysis DOES do, not what it doesn't do.</p>
                            <p><strong>Correct Answer:</strong> A dialysis machine filters waste products and excess water from the blood, performing the same function as healthy kidneys.</p>
                            <p><strong>Key Concept:</strong> Dialysis machines act as artificial kidneys. They remove urea, excess salts, and water from blood through a semi-permeable membrane, just like nephrons in real kidneys.</p>
                        </div>
                    </div>
                </details>
            </div>

            <div class="question-item locked" id="sa-error-7">
                <details>
                    <summary class="error-summary">
                        Short Answer Q6e: Non-excreted Substances
                        <span class="timer-indicator"><span class="timer-fill"></span></span>
                    </summary>
                    <div class="content">
                        <p><strong>Question:</strong> Compare blood/urine data and explain non-excreted substances</p>
                        <p class="your-answer">Your answer: Only mentioned protein</p>
                        <div class="explanation">
                            <p><strong>Complete Answer:</strong> Both proteins AND glucose (sugar) are not normally excreted by healthy kidneys.</p>
                            <p><strong>Why they're kept:</strong> Proteins are too large to pass through the kidney's filters (glomeruli). Glucose is small enough to be filtered but is completely reabsorbed in the kidney tubules because it's valuable energy for cells.</p>
                            <p><strong>Key Concept:</strong> The presence of protein or glucose in urine indicates kidney problems or diabetes - healthy kidneys keep these valuable substances in the blood.</p>
                        </div>
                    </div>
                </details>
            </div>
        </div>

        <!-- Correct Answers Section -->
        <div class="section">
            <h2 class="section-title">✅ Questions You Got Right</h2>
            
            <!-- Multiple Choice Correct -->
            <div class="question-item locked" id="mc-correct-1">
                <details>
                    <summary class="correct-summary">
                        Multiple Choice Q1-3, 5-10: Core Body Systems
                        <span class="timer-indicator"><span class="timer-fill"></span></span>
                    </summary>
                    <div class="content">
                        <p><strong>Questions:</strong> Various questions on digestive, respiratory, circulatory, and excretory systems</p>
                        <div class="correct-answer">
                            <p class="correct-text">✓ Excellent work - 9 out of 10 correct</p>
                            <p>You demonstrated strong understanding of: digestive sequence, chemical digestion, breathing muscles, gas exchange, blood flow, system connections, blood vessel order, excretory function, and kidney applications.</p>
                        </div>
                    </div>
                </details>
            </div>

            <!-- Short Answer Correct -->
            <div class="question-item locked" id="sa-correct-1">
                <details>
                    <summary class="correct-summary">
                        Short Answer Q1: Organ Identification
                        <span class="timer-indicator"><span class="timer-fill"></span></span>
                    </summary>
                    <div class="content">
                        <p><strong>Question:</strong> Name organs from diagram for all four systems</p>
                        <div class="correct-answer">
                            <p class="correct-text">✓ Perfect - All 4 organs correctly identified</p>
                            <p>Great organ recognition skills across all body systems.</p>
                        </div>
                    </div>
                </details>
            </div>

            <div class="question-item locked" id="sa-correct-2">
                <details>
                    <summary class="correct-summary">
                        Short Answer Q3i(a-c): Lung Model Understanding
                        <span class="timer-indicator"><span class="timer-fill"></span></span>
                    </summary>
                    <div class="content">
                        <p><strong>Question:</strong> Identify model parts and differences</p>
                        <div class="correct-answer">
                            <p class="correct-text">✓ Well done - 3 out of 3 parts correct</p>
                            <p>You correctly identified model components and could distinguish between the model and reality.</p>
                        </div>
                    </div>
                </details>
            </div>

            <div class="question-item locked" id="sa-correct-3">
                <details>
                    <summary class="correct-summary">
                        Short Answer Q4: Intestinal Absorption
                        <span class="timer-indicator"><span class="timer-fill"></span></span>
                    </summary>
                    <div class="content">
                        <p><strong>Question:</strong> Most effective intestine for nutrient absorption</p>
                        <div class="correct-answer">
                            <p class="correct-text">✓ Perfect - Full marks</p>
                            <p>You understood that increased surface area improves absorption efficiency.</p>
                        </div>
                    </div>
                </details>
            </div>

            <div class="question-item locked" id="sa-correct-4">
                <details>
                    <summary class="correct-summary">
                        Short Answer Q5: Pulse Rate Analysis
                        <span class="timer-indicator"><span class="timer-fill"></span></span>
                    </summary>
                    <div class="content">
                        <p><strong>Question:</strong> Identify activities from pulse rate graph</p>
                        <div class="correct-answer">
                            <p class="correct-text">✓ Excellent - All parts correct</p>
                            <p>Great job interpreting physiological data and connecting it to activity levels.</p>
                        </div>
                    </div>
                </details>
            </div>

            <div class="question-item locked" id="sa-correct-5">
                <details>
                    <summary class="correct-summary">
                        Short Answer Q6(a,c): Basic Kidney Function
                        <span class="timer-indicator"><span class="timer-fill"></span></span>
                    </summary>
                    <div class="content">
                        <p><strong>Question:</strong> Nephron fluid and waste pathway</p>
                        <div class="correct-answer">
                            <p class="correct-text">✓ Correct understanding</p>
                            <p>You know that blood is filtered by nephrons and understand the waste elimination pathway.</p>
                        </div>
                    </div>
                </details>
            </div>
        </div>

        <!-- Results Section -->
        <div class="results-section question-item locked" id="results">
            <details>
                <summary>
                    📊 Your Test Results
                    <span class="timer-indicator"><span class="timer-fill"></span></span>
                </summary>
                <div class="results-content">
                    <p>Good effort on this challenging test</p>
                    <div class="score">73%</div>
                    <p><strong>Multiple Choice:</strong> 9/10 (90%)</p>
                    <p><strong>Short Answer:</strong> 20/30 (67%)</p>
                    <p><strong>Total Score:</strong> 29/40</p>
                    <br>
                    <p>You showed excellent understanding of multiple choice concepts. Focus on providing more detailed explanations in short answer questions, especially for system interactions and specific terminology.</p>
                </div>
            </details>
        </div>
    </div>

    <script>
        let currentIndex = 0;
        const questionItems = document.querySelectorAll('.question-item');
        const revealDelay = 5000; // 5 seconds
        let currentTimer = null;

        function startNextTimer() {
            if (currentIndex < questionItems.length) {
                currentTimer = setTimeout(() => {
                    revealNextQuestion();
                }, revealDelay);
            }
        }

        function revealNextQuestion() {
            if (currentIndex < questionItems.length) {
                const currentItem = questionItems[currentIndex];
                currentItem.classList.add('visible');
                currentItem.classList.remove('locked');
                
                // Start timer animation
                const timerFill = currentItem.querySelector('.timer-fill');
                if (timerFill) {
                    setTimeout(() => {
                        timerFill.classList.add('active');
                    }, 100);
                }
                
                currentIndex++;
            }
        }

        // Reveal first question immediately
        setTimeout(() => {
            revealNextQuestion();
        }, 500);

        // Add event listeners to all details elements
        document.querySelectorAll('details').forEach((detail, index) => {
            detail.addEventListener('toggle', function() {
                if (this.open) {
                    // Smooth scroll to view
                    setTimeout(() => {
                        this.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    }, 100);
                    
                    // If this is the current question and user opened it, start timer for next
                    if (index === currentIndex - 1) {
                        startNextTimer();
                    }
                } else {
                    // If user closes the current question before timer completes, cancel the timer
                    if (index === currentIndex - 1 && currentTimer) {
                        clearTimeout(currentTimer);
                        currentTimer = null;
                    }
                }
            });
        });
    </script>
</body>
</html>