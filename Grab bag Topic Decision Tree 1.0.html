<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Physics Topic Selector</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Theme 1: Modern Gradient (Default) */
        .theme-modern {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .theme-modern .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        .theme-modern .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }
        .theme-modern .question-card {
            background: #f8f9fa;
            border-left: 5px solid #4facfe;
        }
        .theme-modern .option-button:hover {
            border-color: #4facfe;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(79, 172, 254, 0.2);
        }
        .theme-modern .topic-option {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        .theme-modern .nav-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .theme-modern .selected-topics {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
        }
        .theme-modern .progress-bar {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }
        .theme-modern .final-topic {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        /* Theme 2: Classic Academic */
        .theme-academic {
            font-family: 'Times New Roman', serif;
            background: #f5f5f5;
        }
        .theme-academic .container {
            background: white;
            border: 2px solid #2c3e50;
            border-radius: 0;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .theme-academic .header {
            background: #2c3e50;
            color: white;
        }
        .theme-academic .question-card {
            background: #fafafa;
            border: 1px solid #ddd;
            border-left: 4px solid #2c3e50;
            border-radius: 0;
        }
        .theme-academic .option-button {
            border: 1px solid #2c3e50;
            border-radius: 0;
            background: white;
        }
        .theme-academic .option-button:hover {
            background: #f8f9fa;
            border-color: #34495e;
        }
        .theme-academic .topic-option {
            background: #2c3e50;
            color: white;
        }
        .theme-academic .nav-button {
            background: #2c3e50;
            border-radius: 0;
        }
        .theme-academic .selected-topics {
            background: #ecf0f1;
            border: 1px solid #bdc3c7;
        }
        .theme-academic .progress-bar {
            background: #2c3e50;
        }
        .theme-academic .final-topic {
            background: #2c3e50;
        }

        /* Theme 3: 8-Bit Retro */
        .theme-8bit {
            font-family: 'Courier New', monospace;
            background: #0f0f0f;
            color: #00ff00;
        }
        .theme-8bit .container {
            background: #000;
            border: 2px solid #00ff00;
            border-radius: 0;
            box-shadow: 0 0 20px #00ff00;
        }
        .theme-8bit .header {
            background: #001100;
            color: #00ff00;
            border-bottom: 2px solid #00ff00;
        }
        .theme-8bit .question-card {
            background: #001100;
            border: 1px solid #00ff00;
            border-radius: 0;
        }
        .theme-8bit .option-button {
            border: 1px solid #00ff00;
            border-radius: 0;
            background: #000;
            color: #00ff00;
            font-family: 'Courier New', monospace;
        }
        .theme-8bit .option-button:hover {
            background: #00ff00;
            color: #000;
        }
        .theme-8bit .topic-option {
            background: #004400;
        }
        .theme-8bit .nav-button {
            background: #004400;
            border: 1px solid #00ff00;
            border-radius: 0;
            color: #00ff00;
        }
        .theme-8bit .selected-topics {
            background: #001100;
            border: 1px solid #00ff00;
        }
        .theme-8bit .progress-bar {
            background: #00ff00;
        }
        .theme-8bit .final-topic {
            background: #004400;
            border: 1px solid #00ff00;
        }

        /* Theme 4: Futuristic Sci-Fi */
        .theme-scifi {
            font-family: 'Arial', sans-serif;
            background: radial-gradient(circle at center, #0a0a2e 0%, #16213e 50%, #0f3460 100%);
            color: #00ffff;
        }
        .theme-scifi .container {
            background: rgba(0, 20, 40, 0.9);
            border: 1px solid #00ffff;
            border-radius: 0;
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.3);
        }
        .theme-scifi .header {
            background: linear-gradient(45deg, #001122 0%, #003366 100%);
            color: #00ffff;
            border-bottom: 2px solid #00ffff;
        }
        .theme-scifi .question-card {
            background: rgba(0, 30, 60, 0.8);
            border: 1px solid #0099cc;
            border-left: 4px solid #00ffff;
            border-radius: 0;
        }
        .theme-scifi .option-button {
            border: 1px solid #0099cc;
            border-radius: 0;
            background: rgba(0, 20, 40, 0.8);
            color: #00ffff;
        }
        .theme-scifi .option-button:hover {
            border-color: #00ffff;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.5);
        }
        .theme-scifi .topic-option {
            background: linear-gradient(45deg, #003366 0%, #0066cc 100%);
        }
        .theme-scifi .nav-button {
            background: linear-gradient(45deg, #003366 0%, #0066cc 100%);
            border: 1px solid #00ffff;
            border-radius: 0;
        }
        .theme-scifi .selected-topics {
            background: rgba(0, 30, 60, 0.8);
            border: 1px solid #0099cc;
        }
        .theme-scifi .progress-bar {
            background: linear-gradient(45deg, #00ffff 0%, #0099cc 100%);
        }
        .theme-scifi .final-topic {
            background: linear-gradient(45deg, #003366 0%, #0066cc 100%);
            border: 1px solid #00ffff;
        }

        /* Theme 5: Minimalist Monochrome */
        .theme-minimal {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            background: #ffffff;
            color: #000000;
        }
        .theme-minimal .container {
            background: white;
            border: 1px solid #000;
            border-radius: 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .theme-minimal .header {
            background: #000;
            color: white;
        }
        .theme-minimal .question-card {
            background: #fafafa;
            border: 1px solid #ddd;
            border-radius: 0;
        }
        .theme-minimal .option-button {
            border: 1px solid #000;
            border-radius: 0;
            background: white;
            color: #000;
        }
        .theme-minimal .option-button:hover {
            background: #000;
            color: white;
        }
        .theme-minimal .topic-option {
            background: #000;
            color: white;
        }
        .theme-minimal .nav-button {
            background: #000;
            border-radius: 0;
        }
        .theme-minimal .selected-topics {
            background: #f5f5f5;
            border: 1px solid #ddd;
        }
        .theme-minimal .progress-bar {
            background: #000;
        }
        .theme-minimal .final-topic {
            background: #000;
        }

        /* Theme 6: Laboratory */
        .theme-lab {
            font-family: 'Segoe UI', sans-serif;
            background: #f0f8ff;
            color: #2c3e50;
        }
        .theme-lab .container {
            background: white;
            border: 2px solid #27ae60;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(39, 174, 96, 0.2);
        }
        .theme-lab .header {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            color: white;
        }
        .theme-lab .question-card {
            background: #f8fff8;
            border: 1px solid #a3d9a3;
            border-left: 4px solid #27ae60;
        }
        .theme-lab .option-button {
            border: 1px solid #27ae60;
            background: white;
            color: #2c3e50;
        }
        .theme-lab .option-button:hover {
            background: #e8f5e8;
            border-color: #2ecc71;
        }
        .theme-lab .topic-option {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            color: white;
        }
        .theme-lab .nav-button {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
        }
        .theme-lab .selected-topics {
            background: #e8f5e8;
            border: 1px solid #a3d9a3;
        }
        .theme-lab .progress-bar {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
        }
        .theme-lab .final-topic {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
        }

        /* Theme 7: Periodic Table */
        .theme-periodic {
            font-family: 'Arial', sans-serif;
            background: #1a1a2e;
            color: #eee;
        }
        .theme-periodic .container {
            background: #16213e;
            border: 2px solid #0f3460;
            border-radius: 8px;
            box-shadow: 0 8px 16px rgba(15, 52, 96, 0.3);
        }
        .theme-periodic .header {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
        }
        .theme-periodic .question-card {
            background: #1e3a5f;
            border: 1px solid #3498db;
            border-left: 4px solid #e74c3c;
        }
        .theme-periodic .option-button {
            border: 2px solid #3498db;
            background: #2c3e50;
            color: #ecf0f1;
            position: relative;
        }
        .theme-periodic .option-button:hover {
            background: #3498db;
            color: white;
            border-color: #2980b9;
        }
        .theme-periodic .topic-option {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            border-color: #c0392b;
        }
        .theme-periodic .nav-button {
            background: linear-gradient(135deg, #34495e 0%, #2c3e50 100%);
            border: 1px solid #3498db;
        }
        .theme-periodic .selected-topics {
            background: #1e3a5f;
            border: 1px solid #3498db;
        }
        .theme-periodic .progress-bar {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
        }
        .theme-periodic .final-topic {
            background: linear-gradient(135deg, #34495e 0%, #2c3e50 100%);
            border: 1px solid #3498db;
        }

        /* Theme 8: Chalkboard */
        .theme-chalkboard {
            font-family: 'Courier New', monospace;
            background: #2d5016;
            color: #f5f5dc;
        }
        .theme-chalkboard .container {
            background: #1a3d0a;
            border: 3px solid #8fbc8f;
            border-radius: 0;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.5);
        }
        .theme-chalkboard .header {
            background: #0f2a05;
            color: #f5f5dc;
            border-bottom: 2px solid #8fbc8f;
        }
        .theme-chalkboard .question-card {
            background: rgba(45, 80, 22, 0.8);
            border: 1px solid #8fbc8f;
            border-radius: 0;
        }
        .theme-chalkboard .option-button {
            border: 1px solid #8fbc8f;
            border-radius: 0;
            background: rgba(26, 61, 10, 0.9);
            color: #f5f5dc;
        }
        .theme-chalkboard .option-button:hover {
            background: rgba(143, 188, 143, 0.2);
            border-color: #f5f5dc;
        }
        .theme-chalkboard .topic-option {
            background: rgba(45, 80, 22, 0.9);
            border-color: #f5f5dc;
        }
        .theme-chalkboard .nav-button {
            background: rgba(45, 80, 22, 0.9);
            border: 1px solid #8fbc8f;
            border-radius: 0;
        }
        .theme-chalkboard .selected-topics {
            background: rgba(45, 80, 22, 0.8);
            border: 1px solid #8fbc8f;
        }
        .theme-chalkboard .progress-bar {
            background: #8fbc8f;
        }
        .theme-chalkboard .final-topic {
            background: rgba(45, 80, 22, 0.9);
            border: 1px solid #8fbc8f;
        }

        /* Theme 9: Material Design */
        .theme-material {
            font-family: 'Roboto', 'Arial', sans-serif;
            background: #fafafa;
            color: #212121;
        }
        .theme-material .container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.12), 0 2px 4px rgba(0,0,0,0.24);
        }
        .theme-material .header {
            background: #2196f3;
            color: white;
        }
        .theme-material .question-card {
            background: white;
            border-radius: 4px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
            border: none;
        }
        .theme-material .option-button {
            border: none;
            border-radius: 4px;
            background: white;
            color: #212121;
            box-shadow: 0 1px 3px rgba(0,0,0,0.12);
        }
        .theme-material .option-button:hover {
            box-shadow: 0 2px 6px rgba(0,0,0,0.16), 0 2px 4px rgba(0,0,0,0.24);
            transform: translateY(-1px);
        }
        .theme-material .topic-option {
            background: #ff5722;
            color: white;
        }
        .theme-material .nav-button {
            background: #2196f3;
            border: none;
            border-radius: 24px;
        }
        .theme-material .selected-topics {
            background: #e3f2fd;
            border: none;
            border-radius: 4px;
        }
        .theme-material .progress-bar {
            background: #2196f3;
        }
        .theme-material .final-topic {
            background: #2196f3;
            border-radius: 4px;
        }

        /* Theme 10: Steampunk Victorian */
        .theme-steampunk {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #8b4513 0%, #a0522d 100%);
            color: #f4e4bc;
        }
        .theme-steampunk .container {
            background: linear-gradient(135deg, #2f1b14 0%, #4a2c1a 100%);
            border: 3px solid #cd853f;
            border-radius: 15px;
            box-shadow: inset 0 0 20px rgba(205, 133, 63, 0.3), 0 0 20px rgba(0,0,0,0.5);
        }
        .theme-steampunk .header {
            background: linear-gradient(135deg, #8b4513 0%, #a0522d 100%);
            color: #f4e4bc;
            border-bottom: 2px solid #cd853f;
        }
        .theme-steampunk .question-card {
            background: rgba(75, 44, 26, 0.8);
            border: 2px solid #cd853f;
            border-radius: 10px;
        }
        .theme-steampunk .option-button {
            border: 2px solid #cd853f;
            border-radius: 8px;
            background: linear-gradient(135deg, #4a2c1a 0%, #5d3317 100%);
            color: #f4e4bc;
        }
        .theme-steampunk .option-button:hover {
            background: linear-gradient(135deg, #cd853f 0%, #daa520 100%);
            color: #2f1b14;
            box-shadow: 0 0 15px rgba(205, 133, 63, 0.5);
        }
        .theme-steampunk .topic-option {
            background: linear-gradient(135deg, #b8860b 0%, #daa520 100%);
            color: #2f1b14;
        }
        .theme-steampunk .nav-button {
            background: linear-gradient(135deg, #8b4513 0%, #a0522d 100%);
            border: 2px solid #cd853f;
            border-radius: 20px;
        }
        .theme-steampunk .selected-topics {
            background: rgba(75, 44, 26, 0.8);
            border: 2px solid #cd853f;
            border-radius: 10px;
        }
        .theme-steampunk .progress-bar {
            background: linear-gradient(135deg, #cd853f 0%, #daa520 100%);
        }
        .theme-steampunk .final-topic {
            background: linear-gradient(135deg, #8b4513 0%, #a0522d 100%);
            border: 2px solid #cd853f;
            border-radius: 8px;
        }

        /* Base styles */
        body {
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            overflow: hidden;
        }

        .header {
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .theme-selector {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            border-radius: 8px;
            padding: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .theme-selector select {
            padding: 8px 12px;
            border-radius: 6px;
            border: none;
            font-size: 0.9em;
            cursor: pointer;
        }

        /* Theme-specific selector styling */
        .theme-modern .theme-selector {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }
        .theme-modern .theme-selector select {
            background: rgba(255,255,255,0.9);
            color: #2c3e50;
        }

        .theme-academic .theme-selector {
            background: #2c3e50;
            border: 2px solid #34495e;
        }
        .theme-academic .theme-selector select {
            background: white;
            color: #2c3e50;
            border: 1px solid #2c3e50;
        }

        .theme-8bit .theme-selector {
            background: #000;
            border: 2px solid #00ff00;
        }
        .theme-8bit .theme-selector select {
            background: #001100;
            color: #00ff00;
            border: 1px solid #00ff00;
            font-family: 'Courier New', monospace;
        }

        .theme-scifi .theme-selector {
            background: rgba(0, 20, 40, 0.9);
            border: 1px solid #00ffff;
        }
        .theme-scifi .theme-selector select {
            background: rgba(0, 30, 60, 0.8);
            color: #00ffff;
            border: 1px solid #0099cc;
        }

        .theme-minimal .theme-selector {
            background: white;
            border: 1px solid #000;
        }
        .theme-minimal .theme-selector select {
            background: white;
            color: #000;
            border: 1px solid #000;
        }

        .theme-lab .theme-selector {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
        }
        .theme-lab .theme-selector select {
            background: rgba(255,255,255,0.9);
            color: #2c3e50;
            border: 1px solid #27ae60;
        }

        .theme-periodic .theme-selector {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            border: 2px solid #3498db;
        }
        .theme-periodic .theme-selector select {
            background: #2c3e50;
            color: #ecf0f1;
            border: 1px solid #3498db;
        }

        .theme-chalkboard .theme-selector {
            background: rgba(45, 80, 22, 0.9);
            border: 2px solid #8fbc8f;
        }
        .theme-chalkboard .theme-selector select {
            background: rgba(26, 61, 10, 0.9);
            color: #f5f5dc;
            border: 1px solid #8fbc8f;
            font-family: 'Courier New', monospace;
        }

        .theme-material .theme-selector {
            background: #2196f3;
            border-radius: 28px;
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
        }
        .theme-material .theme-selector select {
            background: rgba(255,255,255,0.9);
            color: #212121;
            border: none;
            border-radius: 20px;
        }

        .theme-steampunk .theme-selector {
            background: linear-gradient(135deg, #8b4513 0%, #a0522d 100%);
            border: 2px solid #cd853f;
            border-radius: 15px;
        }
        .theme-steampunk .theme-selector select {
            background: linear-gradient(135deg, #4a2c1a 0%, #5d3317 100%);
            color: #f4e4bc;
            border: 1px solid #cd853f;
            border-radius: 8px;
        }

        /* Easter egg animations */
        .easter-egg {
            position: fixed;
            font-size: 3em;
            pointer-events: none;
            z-index: 2000;
            animation-fill-mode: forwards;
        }

        @keyframes float-across {
            0% { transform: translateX(-100px); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateX(calc(100vw + 100px)); opacity: 0; }
        }

        @keyframes bounce-fade {
            0% { transform: scale(0) translateY(0); opacity: 0; }
            50% { transform: scale(1.2) translateY(-50px); opacity: 1; }
            100% { transform: scale(0) translateY(-100px); opacity: 0; }
        }

        @keyframes spin-grow {
            0% { transform: scale(0) rotate(0deg); opacity: 0; }
            50% { transform: scale(1.5) rotate(180deg); opacity: 1; }
            100% { transform: scale(0) rotate(360deg); opacity: 0; }
        }

        @keyframes glitch-float {
            0% { transform: translateY(100vh) translateX(0); opacity: 0; filter: hue-rotate(0deg); }
            25% { transform: translateY(75vh) translateX(50px); opacity: 1; filter: hue-rotate(90deg); }
            50% { transform: translateY(50vh) translateX(-30px); opacity: 1; filter: hue-rotate(180deg); }
            75% { transform: translateY(25vh) translateX(20px); opacity: 1; filter: hue-rotate(270deg); }
            100% { transform: translateY(-100px) translateX(0); opacity: 0; filter: hue-rotate(360deg); }
        }

        .content {
            padding: 40px;
        }

        .question-card {
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
        }

        .question-title {
            font-size: 1.4em;
            margin-bottom: 25px;
            font-weight: 500;
        }

        .options {
            display: grid;
            gap: 15px;
        }

        .option-button {
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            font-size: 1.1em;
        }

        .topic-title {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .topic-description {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .nav-button {
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        .nav-button:hover {
            transform: translateY(-2px);
        }

        .nav-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .selected-topics {
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .selected-topics h3 {
            margin-bottom: 15px;
        }

        .topic-chip {
            display: inline-block;
            background: white;
            padding: 8px 15px;
            margin: 5px;
            border-radius: 20px;
            font-size: 0.9em;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .study-link {
            margin-left: 10px;
            padding: 4px 8px;
            background: #4CAF50;
            color: white !important;
            text-decoration: none;
            border-radius: 4px;
            font-size: 0.8em;
            transition: background 0.3s ease;
        }

        .study-link:hover {
            background: #45a049;
        }

        .link-pending {
            margin-left: 10px;
            padding: 4px 8px;
            background: #ccc;
            color: #666;
            border-radius: 4px;
            font-size: 0.8em;
        }

        .progress {
            background: #e0e6ed;
            height: 6px;
            border-radius: 3px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            transition: width 0.3s ease;
        }

        .complete-screen {
            text-align: center;
            padding: 40px;
        }

        .complete-screen h2 {
            margin-bottom: 20px;
            font-size: 2em;
        }

        .final-topics {
            display: grid;
            gap: 15px;
            margin-top: 30px;
        }

        .final-topic {
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: left;
        }

        .breadcrumb {
            font-size: 0.75em;
            opacity: 0.6;
            margin-top: 10px;
            font-style: italic;
        }

        @media (max-width: 600px) {
            .container {
                margin: 10px;
                border-radius: 15px;
            }
            
            .content {
                padding: 20px;
            }
            
            .header {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2em;
            }

            .theme-selector {
                bottom: 10px;
                right: 10px;
                padding: 8px;
            }

            .theme-selector select {
                padding: 6px 8px;
                font-size: 0.8em;
            }
        }
    </style>
</head>
<body class="theme-modern">
    <div class="theme-selector">
        <select id="themeSelector" onchange="changeTheme()">
            <option value="modern">Modern Gradient</option>
            <option value="academic">Classic Academic</option>
            <option value="8bit">8-Bit Retro</option>
            <option value="scifi">Futuristic Sci-Fi</option>
            <option value="minimal">Minimalist Monochrome</option>
            <option value="lab">Laboratory</option>
            <option value="periodic">Periodic Table</option>
            <option value="chalkboard">Chalkboard</option>
            <option value="material">Material Design</option>
            <option value="steampunk">Steampunk Victorian</option>
        </select>
    </div>

    <div class="container">
        <div class="header">
            <h1>⚛️ Grab Bag Physics Topic Selector</h1>
            <p>Select 5 physics topics for study and examination.</p>
        </div>
        
        <div class="content">
            <div class="progress">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            
            <div id="selectedTopics" class="selected-topics" style="display: none;">
                <div id="topicList"></div>
            </div>
            
            <div id="questionContainer"></div>
            
            <div class="navigation">
                <button class="nav-button" id="backButton" onclick="goBack()" disabled>← Back</button>
                <button class="nav-button" id="startOverButton" onclick="startOver()" style="display: none;">🔄 Start Over</button>
            </div>
            <div class="breadcrumb" id="breadcrumb"></div>
        </div>
    </div>

    <script>
        let currentStep = 'start';
        let navigationHistory = [];
        let selectedTopics = [];
        let breadcrumbTrail = [];
        
        // Easter egg system
        let easterEggTimer;
        let pressedKeys = new Set();
        
        // Theme-specific easter eggs
        const easterEggs = {
            'modern': ['🌟', '💫', '✨', '🔮'],
            'academic': ['📚', '🎓', '📝', '🏛️'],
            '8bit': ['👾', '🕹️', '🎮', '💻'],
            'scifi': ['🛸', '👽', '🚀', '🌌'],
            'minimal': ['⚫', '⚪', '🔳', '◯'],
            'lab': ['⚗️', '🧪', '🔬', '🧬'],
            'periodic': ['⚛️', '🔬', '⚡', '💎'],
            'chalkboard': ['📐', '✏️', '📏', '🎯'],
            'material': ['✈️', '📱', '💡', '🎨'],
            'steampunk': ['⚙️', '🔧', '⚡', '💨']
        };

        // localStorage functionality for persistence 
        const Storage = {
            save: function(key, data) {
                try {
                    if (typeof localStorage !== "undefined" && localStorage) {
                        localStorage.setItem(key, JSON.stringify(data));
                        console.log('Saved to localStorage:', key);
                    }
                } catch (e) {
                    console.log('Storage not available:', e.message);
                }
            },
            load: function(key) {
                try {
                    if (typeof localStorage !== "undefined" && localStorage) {
                        const data = localStorage.getItem(key);
                        if (data) {
                            console.log('Loaded from localStorage:', key);
                            return JSON.parse(data);
                        }
                    }
                } catch (e) {
                    console.log('Storage not available:', e.message);
                }
                return null;
            }
        };

        function startEasterEggTimer() {
            // Random interval averaging 10 minutes (600,000ms)
            // Using exponential distribution for more natural randomness
            const averageInterval = 600000; // 10 minutes
            const randomInterval = -Math.log(Math.random()) * averageInterval;
            
            easterEggTimer = setTimeout(() => {
                triggerEasterEgg();
                startEasterEggTimer(); // Restart timer
            }, randomInterval);
        }

        function triggerEasterEgg() {
            const currentTheme = document.getElementById('themeSelector').value;
            const emojis = easterEggs[currentTheme] || easterEggs['modern'];
            const randomEmoji = emojis[Math.floor(Math.random() * emojis.length)];
            
            const easterEgg = document.createElement('div');
            easterEgg.className = 'easter-egg';
            easterEgg.textContent = randomEmoji;
            
            // Random animation based on theme
            const animations = ['float-across', 'bounce-fade', 'spin-grow', 'glitch-float'];
            const animation = animations[Math.floor(Math.random() * animations.length)];
            
            // Random starting position
            easterEgg.style.top = Math.random() * 80 + 10 + '%';
            easterEgg.style.left = Math.random() * 20 - 10 + '%';
            
            easterEgg.style.animation = `${animation} 4s ease-in-out`;
            
            document.body.appendChild(easterEgg);
            
            // Remove after animation
            setTimeout(() => {
                if (easterEgg.parentNode) {
                    easterEgg.parentNode.removeChild(easterEgg);
                }
            }, 4000);
        }

        // Key detection for debugging easter eggs
        document.addEventListener('keydown', function(e) {
            pressedKeys.add(e.key.toLowerCase());
            
            // Check if 'q', 'w', 'e' are all pressed
            if (pressedKeys.has('q') && pressedKeys.has('w') && pressedKeys.has('e')) {
                triggerEasterEgg();
            }
        });

        document.addEventListener('keyup', function(e) {
            pressedKeys.delete(e.key.toLowerCase());
        });

        function saveState() {
            Storage.save('grabBagPhysics_selectedTopics', selectedTopics);
            Storage.save('grabBagPhysics_theme', document.getElementById('themeSelector').value);
        }

        function loadState() {
            const savedTopics = Storage.load('grabBagPhysics_selectedTopics');
            const savedTheme = Storage.load('grabBagPhysics_theme');
            
            if (savedTopics && Array.isArray(savedTopics)) {
                selectedTopics = savedTopics;
                updateSelectedTopics();
            }
            
            if (savedTheme) {
                document.getElementById('themeSelector').value = savedTheme;
                changeTheme();
            }
        }
        
        const topics = {
            '1a': 'Bose-Einstein Condensates: Low-temp particle states',
            '1b': 'Dark Matter and Dark Energy: Invisible mass/energy',
            '2a': 'The Double-Slit Experiment: Wave-particle duality test',
            '2b': 'Quantum Entanglement: Instant particle correlation',
            '2c': 'Schrödinger\'s Cat: Quantum state paradox',
            '2d': 'The Block Universe: Time-space continuum model',
            '2e': 'Topology: My coffee cup is not broken, I\'ve just lost my doughnut',
            '3a': 'Quantum Computing: Superposition-based computing',
            '3b': 'Quantum Biology: Life\'s Quantum Processes',
            '3c': 'Quantum Tunnelling: Particle barrier crossing',
            '4a': 'Landauer\'s principle: Information-energy equivalence',
            '4b': 'The Bekenstein bound: Information-theory entropy limit',
            '5a': 'Dissipative structures: Non-equilibrium systems',
            '5b': 'Chirality: Molecular asymmetry',
            '5c': 'Entropy and Life\'s purpose: Disorder and biological order',
            '5d': 'Earth\'s Magnetic Field and life: Geomagnetic vitality influence',
            '5e': 'Abiogenesis: Life\'s chemical beginnings',
            '6a': 'Maybe The Moon drove evolution: Lunar evolution hypothesis',
            '6b': 'Wormholes and White holes: Exotic spacetime structures',
            '6c': 'Parallel Universes: Multiple realities theory',
            '7a': 'Pixels in your phone: Display colour elements',
            '7b': 'Touchscreen Technology: Interactive display electronics',
            '7c': 'Noise-Cancelling Headphones: Soundwave interference',
            '8a': 'Microwave Cooking: Electromagnetic heating',
            '8b': 'Boiling Water @ low Pressure: Reduced-pressure evaporation',
            '8c': 'Supercooling: Undercooled liquid state',
            '9a': 'Polarized Sunglasses: Light filter eyewear',
            '9b': 'Corrective Lenses: Vision correction',
            '9c': 'Rainbows: You can predict and make them',
            '10b': 'Air conditioners make hot air hotter: Heat pump principle',
            '10c': 'Air temperature is just the beginning: What\'s with "feels like"?',
            '11a': 'Power by Induction: Non-contact Electricity',
            '11b': 'Lenz\'s law and falling magnets: Magnetic deceleration',
            '12a': 'Pushed in or out? Liquid rotational dynamics',
            '12b': 'The Bernoulli Effect: Pressure-Flow Principle',
            '12c': 'Siphoning Liquid: Liquid transfer method',
            '13a': 'Golf Ball Dimples: Ball flight stability',
            '13b': 'Soft drink bottle accelerometers: Fluid pressure',
            '13c': 'Bending like Beckham: Ball trajectory control',
            '14a': 'Time dilation and length contraction: Relative time-space effects',
            '14b': 'Gravitational time dilation: slow time in deep gravity',
            '14c': 'Time on the moon… is shorter: Lunar time variance',
            '14d': 'The Twin Paradox: Relatively how old is your twin',
            '15a': 'The Fermi Paradox: Extraterrestrial life paradox',
            '15b': 'Antimatter: Matter/antimatter counterparts',
            '15c': 'Supermassive blackholes: Galactic central entities',
            '16a': 'When Physics was wrong: Newtonian Stage (Spicy)',
            '16b': 'When Physics was wrong: Phlogiston theory: Disproven fire theory',
            '16c': 'Crooks Radiometer: Great Invention, Wrong Theory',
            '16d': 'When Physics was wrong: Vulcan: do we need an extra planet?'
        };

        // Topic links mapping - based on provided Stile URLs
        const topicLinks = {
            '1a': 'https://stileapp.com/au/KC_VIC-7582/subject-527976/lesson-3181886/worksheet-31921208',
            '1b': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-31921542',
            '2a': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-31926050',
            '2b': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-31926051',
            '2c': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-31933300',
            '2d': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-31960521',
            '2e': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-31962106',
            '3a': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-31964446',
            '3b': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-31964945',
            '3c': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-31965776',
            '4a': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-32035825',
            '4b': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-32035826',
            '5a': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-32035827',
            '5b': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-31998980',
            '5c': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-32035589',
            '5d': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-32035590',
            '5e': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-31925945',
            '6a': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-32035591',
            '6b': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-32035592',
            '6c': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-32035593',
            '7a': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-32035594',
            '7b': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-32035624',
            '7c': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-32035625',
            '8a': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-32035667',
            '8b': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-32035668',
            '8c': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-32035669',
            '9a': 'https://stileapp.com/au/KC_VIC-7582/subject-527976/lesson-3181886/worksheet-32035694',
            '9b': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-32035696',
            '9c': null, // Link missing from provided list
            '10b': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-32035698',
            '10c': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-32035706',
            '11a': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-32035741',
            '11b': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-32035742',
            '12a': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-32035758',
            '12b': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-32035759',
            '12c': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-32035761',
            '13a': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-32035763',
            '13b': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-32035764',
            '13c': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-33234313',
            '14a': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-32035815',
            '14b': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-32035816',
            '14c': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-32035817',
            '14d': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-32035818',
            '15a': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-32035819',
            '15b': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-32035820',
            '15c': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-32035821',
            '16a': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-32035823',
            '16b': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-32035824',
            '16c': null, // Link missing from provided list  
            '16d': 'https://stileapp.com/au/institution-7582/subject-527976/lesson-3181886/worksheet-32035828'
        };

        const stepLabels = {
            'start': 'Experimental Approach',
            'practical_type': 'Hands-on Type',
            'theory_direction': 'Theoretical Focus',
            'fluid_choice': 'Fluid Experiments',
            'water_motion': 'Water Movement',
            'ball_physics': 'Object Motion',
            'optics_choice': 'Light & Vision',
            'force_choice': 'Force Experiments',
            'temp_choice': 'Temperature',
            'space_focus': 'Cosmic Physics',
            'alien_life': 'Life in Universe',
            'extreme_objects': 'Extreme Objects',
            'spacetime_reality': 'Spacetime',
            'time_travel': 'Time Effects',
            'earth_focus': 'Physics Level',
            'modern_direction': 'Modern Physics',
            'quantum_focus': 'Quantum Mechanics',
            'quantum_paradox': 'Quantum Paradox',
            'quantum_tech': 'Quantum Tech',
            'cold_quantum': 'Ultra-cold Physics',
            'bio_physics': 'Biophysics',
            'life_order': 'Biological Order',
            'info_physics': 'Information Theory',
            'info_limits': 'Information Limits',
            'everyday_direction': 'Applications',
            'digital_tech': 'Digital Tech',
            'home_tech': 'Home Tech',
            'air_conditioning': 'Heat Pumps',
            'daily_relativity': 'Daily Relativity',
            'physics_mistakes': 'Historical Errors'
        };

        const questions = {
            start: {
                question: "Select preference for experimental approach",
                options: [
                    { text: "Hands-on experiments that can be performed in the lab", next: "practical_type" },
                    { text: "Theoretical concepts and analysis", next: "theory_direction" }
                ]
            },
            
            practical_type: {
                question: "Select the type of hands-on experience",
                options: [
                    { text: "🌊 Liquids and flowing matter", next: "fluid_choice" },
                    { text: "👀 Light and vision phenomena", next: "optics_choice" },
                    { text: "⚡ Forces and magnetism", next: "force_choice" },
                    { text: "🧊 Temperature and state changes", next: "temp_choice" }
                ]
            },
            
            fluid_choice: {
                question: "Select fluid experiment category",
                options: [
                    { text: "🌀 Water motion and flow patterns", next: "water_motion" },
                    { text: "⚽ Objects moving through air and liquid", next: "ball_physics" }
                ]
            },
            
            water_motion: {
                question: "Select water movement phenomenon",
                options: [
                    { text: "Water drainage patterns", next: "topic_12a" },
                    { text: "Airplane wing mechanics", next: "topic_12b" },
                    { text: "Liquid transfer without pumps", next: "topic_12c" }
                ]
            },
            
            ball_physics: {
                question: "Select object motion topic",
                options: [
                    { text: "Golf ball surface design", next: "topic_13a" },
                    { text: "Motion detection technology", next: "topic_13b" },
                    { text: "Ball trajectory control", next: "topic_13c" }
                ]
            },
            
            optics_choice: {
                question: "Select light and vision topic",
                options: [
                    { text: "Sunglasses and glare reduction", next: "topic_9a" },
                    { text: "Vision correction mechanisms", next: "topic_9b" },
                    { text: "Rainbow formation and prediction", next: "topic_9c" }
                ]
            },
            
            force_choice: {
                question: "Select force-related experiment",
                options: [
                    { text: "Magnetic deceleration effects", next: "topic_11b" },
                    { text: "Spinning devices with historical misconceptions", next: "topic_16c" },
                    { text: "Mathematical topology concepts", next: "topic_2e" }
                ]
            },
            
            temp_choice: {
                question: "Select temperature experiment",
                options: [
                    { text: "Reduced pressure boiling", next: "topic_8b" },
                    { text: "Supercooled liquid states", next: "topic_8c" }
                ]
            },
            
            theory_direction: {
                question: "Select theoretical physics focus",
                options: [
                    { text: "Space and cosmic phenomena", next: "space_focus" },
                    { text: "Earth-based physics principles", next: "earth_focus" }
                ]
            },
            
            space_focus: {
                question: "Select aspect of cosmic physics",
                options: [
                    { text: "👽 Life and extraterrestrial phenomena", next: "alien_life" },
                    { text: "⚫ Extreme cosmic objects", next: "extreme_objects" },
                    { text: "⏰ Spacetime and reality", next: "spacetime_reality" }
                ]
            },
            
            alien_life: {
                question: "Select life in the universe topic",
                options: [
                    { text: "Absence of detected extraterrestrial life", next: "topic_15a" },
                    { text: "Lunar influence on terrestrial evolution", next: "topic_6a" },
                    { text: "Transition from non-living to living matter", next: "topic_5e" }
                ]
            },
            
            extreme_objects: {
                question: "Select extreme cosmic object",
                options: [
                    { text: "Supermassive galactic objects", next: "topic_15c" },
                    { text: "Antimatter properties", next: "topic_15b" },
                    { text: "Spacetime tunnels and exotic structures", next: "topic_6b" },
                    { text: "Dark matter and dark energy", next: "topic_1b" }
                ]
            },
            
            spacetime_reality: {
                question: "Select spacetime concept",
                options: [
                    { text: "Deterministic universe models", next: "topic_2d" },
                    { text: "Multiple universe theories", next: "topic_6c" },
                    { text: "Relativistic time effects", next: "time_travel" }
                ]
            },
            
            time_travel: {
                question: "Select time dilation effect",
                options: [
                    { text: "Differential aging in relativity", next: "topic_14d" },
                    { text: "Gravitational time effects", next: "topic_14b" }
                ]
            },
            
            earth_focus: {
                question: "Select physics application level",
                options: [
                    { text: "🔬 Advanced modern physics", next: "modern_direction" },
                    { text: "📱 Practical applications", next: "everyday_direction" }
                ]
            },
            
            modern_direction: {
                question: "Select modern physics category",
                options: [
                    { text: "⚛️ Quantum mechanics", next: "quantum_focus" },
                    { text: "🧬 Biophysics connections", next: "bio_physics" },
                    { text: "📊 Information theory and fundamentals", next: "info_physics" }
                ]
            },
            
            quantum_focus: {
                question: "Select quantum mechanics aspect",
                options: [
                    { text: "🐱 Quantum paradoxes", next: "quantum_paradox" },
                    { text: "💻 Quantum technology", next: "quantum_tech" },
                    { text: "🌡️ Ultra-low temperature physics", next: "cold_quantum" }
                ]
            },
            
            quantum_paradox: {
                question: "Select quantum paradox",
                options: [
                    { text: "Superposition thought experiments", next: "topic_2c" },
                    { text: "Wave-particle duality", next: "topic_2a" },
                    { text: "Quantum entanglement phenomena", next: "topic_2b" }
                ]
            },
            
            quantum_tech: {
                question: "Select quantum technology",
                options: [
                    { text: "Superposition-based computing", next: "topic_3a" },
                    { text: "Quantum tunneling effects", next: "topic_3c" }
                ]
            },
            
            cold_quantum: {
                question: "Select ultra-cold physics topic",
                options: [
                    { text: "Near absolute zero matter states", next: "topic_1a" }
                ]
            },
            
            bio_physics: {
                question: "Select physics-biology connection",
                options: [
                    { text: "🧬 Quantum effects in biological systems", next: "topic_3b" },
                    { text: "🧲 Magnetic field effects on life", next: "topic_5d" },
                    { text: "⚖️ Thermodynamics and biological order", next: "life_order" }
                ]
            },
            
            life_order: {
                question: "Select biological organization topic",
                options: [
                    { text: "Entropy and biological systems", next: "topic_5c" },
                    { text: "Molecular chirality", next: "topic_5b" }
                ]
            },
            
            info_physics: {
                question: "Select information theory topic",
                options: [
                    { text: "💾 Information storage limits", next: "info_limits" },
                    { text: "🌀 Self-organization and emergence", next: "topic_5a" }
                ]
            },
            
            info_limits: {
                question: "Select information concept",
                options: [
                    { text: "Energy requirements for information processing", next: "topic_4a" },
                    { text: "Maximum information density", next: "topic_4b" }
                ]
            },
            
            everyday_direction: {
                question: "Select practical application category",
                options: [
                    { text: "📱 Digital and display technology", next: "digital_tech" },
                    { text: "🏠 Home and appliance technology", next: "home_tech" },
                    { text: "🕰️ Relativistic effects in daily life", next: "daily_relativity" },
                    { text: "📚 Historical physics errors", next: "physics_mistakes" }
                ]
            },
            
            digital_tech: {
                question: "Select digital technology",
                options: [
                    { text: "📺 Display pixel technology", next: "topic_7a" },
                    { text: "👆 Touch detection mechanisms", next: "topic_7b" },
                    { text: "🎧 Noise cancellation technology", next: "topic_7c" }
                ]
            },
            
            home_tech: {
                question: "Select home technology",
                options: [
                    { text: "🔥 Microwave heating mechanisms", next: "topic_8a" },
                    { text: "❄️ Heat pump technology", next: "air_conditioning" },
                    { text: "⚡ Wireless power transfer", next: "topic_11a" }
                ]
            },
            
            air_conditioning: {
                question: "Select heat pump effect",
                options: [
                    { text: "Heat pump thermodynamics", next: "topic_10b" },
                    { text: "Perceived temperature variations", next: "topic_10c" }
                ]
            },
            
            daily_relativity: {
                question: "Select relativistic effect",
                options: [
                    { text: "Velocity effects on spacetime", next: "topic_14a" },
                    { text: "Gravitational time differences", next: "topic_14c" }
                ]
            },
            
            physics_mistakes: {
                question: "Select historical physics error",
                options: [
                    { text: "🔥 Limitations of Newtonian physics", next: "topic_16a" },
                    { text: "🔥 Phlogiston combustion theory", next: "topic_16b" },
                    { text: "🪐 Hypothetical planetary bodies", next: "topic_16d" }
                ]
            }
        };

        // Topic display questions
        const topicQuestions = {
            'topic_12a': { id: '12a', question: "Study water drainage rotation patterns" },
            'topic_12b': { id: '12b', question: "Study airplane wing mechanics and lift generation" },
            'topic_12c': { id: '12c', question: "Study liquid transfer via siphoning mechanisms" },
            'topic_13a': { id: '13a', question: "Study golf ball surface aerodynamics" },
            'topic_13b': { id: '13b', question: "Study accelerometer technology in mobile devices" },
            'topic_13c': { id: '13c', question: "Study ball trajectory control methods" },
            'topic_9a': { id: '9a', question: "Study polarized light filtering in sunglasses" },
            'topic_9b': { id: '9b', question: "Study optical principles in vision correction" },
            'topic_9c': { id: '9c', question: "Study rainbow formation and prediction methods" },
            'topic_11b': { id: '11b', question: "Study magnetic deceleration of falling objects" },
            'topic_16c': { id: '16c', question: "Study radiometer design and historical misconceptions" },
            'topic_2e': { id: '2e', question: "Study topological properties of geometric shapes" },
            'topic_8b': { id: '8b', question: "Study reduced pressure boiling effects" },
            'topic_8c': { id: '8c', question: "Study supercooled liquid state properties" },
            'topic_15a': { id: '15a', question: "Study the absence of detected extraterrestrial intelligence" },
            'topic_6a': { id: '6a', question: "Study lunar influence on terrestrial evolution" },
            'topic_5e': { id: '5e', question: "Study chemical pathways from non-living to living matter" },
            'topic_15c': { id: '15c', question: "Study supermassive black hole properties" },
            'topic_15b': { id: '15b', question: "Study antimatter characteristics and behavior" },
            'topic_6b': { id: '6b', question: "Study theoretical spacetime tunnel structures" },
            'topic_1b': { id: '1b', question: "Study dark matter and dark energy properties" },
            'topic_2d': { id: '2d', question: "Study block universe model and determinism" },
            'topic_6c': { id: '6c', question: "Study parallel universe theoretical frameworks" },
            'topic_14d': { id: '14d', question: "Study twin paradox and differential aging" },
            'topic_14b': { id: '14b', question: "Study gravitational effects on time passage" },
            'topic_2c': { id: '2c', question: "Study Schrödinger's Cat thought experiment" },
            'topic_2a': { id: '2a', question: "Study wave-particle duality demonstration" },
            'topic_2b': { id: '2b', question: "Study quantum entanglement correlations" },
            'topic_3a': { id: '3a', question: "Study quantum computing using superposition" },
            'topic_3c': { id: '3c', question: "Study quantum tunneling barrier penetration" },
            'topic_1a': { id: '1a', question: "Study matter behavior near absolute zero" },
            'topic_3b': { id: '3b', question: "Study quantum effects in biological systems" },
            'topic_5d': { id: '5d', question: "Study magnetic field effects on biological organisms" },
            'topic_5c': { id: '5c', question: "Study entropy and biological organization" },
            'topic_5b': { id: '5b', question: "Study molecular chirality and asymmetry" },
            'topic_4a': { id: '4a', question: "Study energy requirements for information erasure" },
            'topic_4b': { id: '4b', question: "Study theoretical limits of information storage" },
            'topic_5a': { id: '5a', question: "Study self-organization in non-equilibrium systems" },
            'topic_7a': { id: '7a', question: "Study pixel technology in digital displays" },
            'topic_7b': { id: '7b', question: "Study capacitive touch detection mechanisms" },
            'topic_7c': { id: '7c', question: "Study active noise cancellation technology" },
            'topic_8a': { id: '8a', question: "Study microwave electromagnetic heating mechanisms" },
            'topic_10b': { id: '10b', question: "Study heat pump thermodynamic principles" },
            'topic_10c': { id: '10c', question: "Study factors affecting perceived temperature" },
            'topic_11a': { id: '11a', question: "Study electromagnetic induction for wireless charging" },
            'topic_14a': { id: '14a', question: "Study special relativity effects on spacetime" },
            'topic_14c': { id: '14c', question: "Study gravitational time differences on lunar surface" },
            'topic_16a': { id: '16a', question: "Study historical limitations of Newtonian mechanics" },
            'topic_16b': { id: '16b', question: "Study phlogiston theory and combustion misconceptions" },
            'topic_16d': { id: '16d', question: "Study historical hypothesis of planet Vulcan" }
        };

        function changeTheme() {
            const selector = document.getElementById('themeSelector');
            const body = document.body;
            
            // Remove all theme classes
            body.className = body.className.replace(/theme-\w+/g, '');
            
            // Add selected theme
            body.classList.add(`theme-${selector.value}`);
            
            // Save theme preference
            saveState();
        }

        function updateBreadcrumb() {
            const breadcrumb = document.getElementById('breadcrumb');
            if (breadcrumbTrail.length > 0) {
                breadcrumb.textContent = breadcrumbTrail.map(step => stepLabels[step] || step).join(' → ');
            } else {
                breadcrumb.textContent = '';
            }
        }

        function updateProgress() {
            const progress = Math.min((selectedTopics.length / 5) * 100, 100);
            document.getElementById('progressBar').style.width = progress + '%';
        }

        function updateSelectedTopics() {
            const container = document.getElementById('selectedTopics');
            const listDiv = document.getElementById('topicList');
            
            if (selectedTopics.length > 0) {
                container.style.display = 'block';
                const headerText = selectedTopics.length >= 5 ? 
                    `📌 Selected Topics (${selectedTopics.length}/5) - Ready for Study` : 
                    `📌 Selected Topics (${selectedTopics.length}/5)`;
                
                listDiv.innerHTML = `<h3>${headerText}</h3>` + selectedTopics.map(topicId => {
                    const link = topicLinks[topicId];
                    const linkButton = link ? 
                        `<a href="${link}" target="_blank" class="study-link">📖 Study</a>` : 
                        `<span class="link-pending">Link pending</span>`;
                    
                    return `<div class="topic-chip">
                        ${topicId}: ${topics[topicId]}
                        ${linkButton}
                        <span style="margin-left: 5px; cursor: pointer; font-weight: bold; color: #666;" onclick="removeTopic('${topicId}')">✕</span>
                    </div>`;
                }).join('');
            } else {
                container.style.display = 'none';
            }
            
            updateProgress();
            
            // Remove automatic completion screen - let students continue exploring
        }

        function removeTopic(topicId) {
            const index = selectedTopics.indexOf(topicId);
            if (index > -1) {
                selectedTopics.splice(index, 1);
                updateSelectedTopics();
            }
        }

        function showQuestion(stepId) {
            // Add current step to history and breadcrumb before changing
            if (currentStep !== stepId) {
                navigationHistory.push(currentStep);
                if (currentStep !== 'start') {
                    breadcrumbTrail.push(currentStep);
                }
            }
            currentStep = stepId;
            
            const question = questions[stepId];
            const container = document.getElementById('questionContainer');
            
            container.innerHTML = `
                <div class="question-card">
                    <div class="question-title">${question.question}</div>
                    <div class="options">
                        ${question.options.map(option => 
                            `<div class="option-button" onclick="navigateToStep('${option.next}')">
                                ${option.text}
                            </div>`
                        ).join('')}
                    </div>
                </div>
            `;
            
            updateBackButton();
            updateBreadcrumb();
        }

        function showTopicChoice(topicStep) {
            // Add current step to history and breadcrumb before changing
            if (currentStep !== topicStep) {
                navigationHistory.push(currentStep);
                if (currentStep !== 'start') {
                    breadcrumbTrail.push(currentStep);
                }
            }
            currentStep = topicStep;
            
            const topicInfo = topicQuestions[topicStep];
            const container = document.getElementById('questionContainer');
            
            container.innerHTML = `
                <div class="question-card">
                    <div class="question-title">${topicInfo.question}</div>
                    <div class="options">
                        <div class="option-button topic-option" onclick="selectTopic('${topicInfo.id}')">
                            <div class="topic-title">${topicInfo.id}: ${topics[topicInfo.id]}</div>
                            <div class="topic-description">Select this topic</div>
                        </div>
                        <div class="option-button" onclick="goBack()">
                            ⏭️ Skip this topic and explore more
                        </div>
                    </div>
                </div>
            `;
            
            updateBackButton();
            updateBreadcrumb();
        }

        function navigateToStep(nextStep) {
            if (topicQuestions[nextStep]) {
                showTopicChoice(nextStep);
            } else {
                showQuestion(nextStep);
            }
        }

        function selectTopic(topicId) {
            if (!selectedTopics.includes(topicId)) {
                selectedTopics.push(topicId);
                updateSelectedTopics();
            }
            
            if (selectedTopics.length < 5) {
                // Return to start instead of going back
                returnToStart();
            }
        }

        function returnToStart() {
            navigationHistory = [];
            breadcrumbTrail = [];
            currentStep = 'start';
            showQuestion('start');
        }

        function updateBackButton() {
            const backButton = document.getElementById('backButton');
            backButton.disabled = navigationHistory.length === 0;
        }

        function goBack() {
            if (navigationHistory.length > 0) {
                const previousStep = navigationHistory.pop();
                if (breadcrumbTrail.length > 0) {
                    breadcrumbTrail.pop();
                }
                currentStep = previousStep;
                
                if (topicQuestions[currentStep]) {
                    showTopicChoice(currentStep);
                } else {
                    showQuestion(currentStep);
                }
                
                updateBackButton();
                updateBreadcrumb();
            }
        }

        // Removed showComplete function - students can continue exploring after 5 topics

        function startOver() {
            selectedTopics = [];
            navigationHistory = [];
            breadcrumbTrail = [];
            currentStep = 'start';
            updateSelectedTopics();
            saveState(); // Save cleared state
            showQuestion('start');
            document.getElementById('backButton').style.display = 'block';
            document.getElementById('startOverButton').style.display = 'none';
            updateBackButton();
            updateBreadcrumb();
        }

        // Initialize the quiz
        document.addEventListener('DOMContentLoaded', function() {
            loadState(); // Load saved data
            startEasterEggTimer(); // Start easter egg system
        });
        
        // Immediate initialization for artifact environment
        loadState();
        showQuestion('start');
        updateSelectedTopics();
        startEasterEggTimer();
    </script>
</body>
</html>