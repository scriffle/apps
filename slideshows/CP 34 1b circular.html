<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Circular Motion 1B â€” Key Points (Tabbed Slides)</title>
  <style>
    :root{
      --fs:1;
      --bg:#ffffff; --fg:#0b1b2b; --muted:#c7d2fe; --accent:#06b6d4; --accent-2:#0891b2; --card:#f8fafc;
      --shadow:0 10px 30px rgba(0,0,0,.08);
    }
    .dark{ --bg:#0b1220; --fg:#e5f0ff; --muted:#1f2a44; --accent:#22d3ee; --accent-2:#67e8f9; --card:#0f172a; --shadow:0 16px 40px rgba(0,0,0,.55); }
    html,body{height:100%}
    body{margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji"; background:var(--bg); color:var(--fg);}
    .wrap{max-width:1100px; margin:0 auto; padding:16px;}
    header{display:flex; align-items:center; gap:12px; justify-content:space-between; position:sticky; top:0; background:linear-gradient(180deg,var(--bg) 0%, rgba(0,0,0,0) 100%); backdrop-filter:saturate(120%) blur(2px); z-index:10;}
    .brand{display:flex; align-items:center; gap:10px}
    .logo{width:36px; height:36px; border-radius:12px; background:linear-gradient(135deg,var(--accent), var(--accent-2)); box-shadow: var(--shadow);}
    .h1{font-size: clamp(20px, 3vw, 28px); font-weight:800; letter-spacing:.2px}
    .controls{display:flex; gap:8px; align-items:center}
    button{cursor:pointer; border:1px solid transparent; border-radius:999px; padding:8px 12px; font-weight:600; background:var(--accent); color:white; box-shadow:var(--shadow);}
    button.secondary{background:transparent; color:var(--fg); border-color:var(--muted)}
    button.ghost{background:transparent; color:var(--fg); border-color:transparent}
    button.mini{padding:6px 8px; font-size:.9em}
    kbd{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace; background:var(--card); border:1px solid var(--muted); border-bottom-width:2px; border-radius:6px; padding:1px 6px; font-size:.85em}

    /* Tabs (slide picker) */
    .tabs{display:flex; gap:8px; overflow:auto; padding:10px 2px 14px; border-bottom:1px solid var(--muted); scrollbar-width:thin}
    .tabs button{background:transparent; color:var(--fg); border-color:var(--muted)}
    .tabs button.active{background:var(--accent); color:white; border-color:transparent}

    /* Slides */
    .stage{position:relative;}
    .slide{display:none; background:var(--card); border:1px solid var(--muted); border-radius:20px; padding:28px; margin:16px 0; box-shadow:var(--shadow);}
    .slide.active{display:block; animation:fade .25s ease-out}
    @keyframes fade{from{opacity:0; transform:translateY(4px)} to{opacity:1; transform:none}}

    h2{font-size: calc(var(--fs) * (clamp(22px, 2.6vw, 32px))); margin:0 0 12px; line-height:1.15}
    h3{font-size: calc(var(--fs) * (clamp(16px, 1.8vw, 22px))); margin:18px 0 8px}
    p{font-size: calc(var(--fs) * (clamp(15px, 1.2vw, 18px))); line-height:1.55}
    ul,ol{padding-left:22px; margin:10px 0}
    li{margin:6px 0; font-size: calc(var(--fs) * 1em)}
    .grid-2{display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:18px}
    .callout{border-left:6px solid var(--accent); padding:10px 12px; background:linear-gradient(180deg, rgba(34,211,238,.08), transparent); border-radius:12px; margin:12px 0}
    .eq{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace; background:rgba(2,132,199,.06); padding:2px 6px; border-radius:8px}
    .muted{opacity:.85}
    .progress{font-weight:700}
    .mini{font-size:.9em}
    .footer{display:flex; justify-content:space-between; align-items:center; gap:8px; margin:8px 0 24px}
    .pill{display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px; border:1px solid var(--muted);}

    details{background:rgba(2,132,199,.08); border:1px solid var(--muted); border-radius:12px; padding:10px 12px; margin:8px 0}
    summary{cursor:pointer; font-weight:700}

    /* Presenter mode */
    .present header, .present .tabs, .present .footer .shortcuts{display:none}
    .present .slide{min-height:65vh; font-size: calc(var(--fs) * 1.1em)}

    /* Print each slide on its own page */
    @media print{
      header,.tabs,.footer{display:none !important}
      .slide{display:block !important; break-after:page; box-shadow:none; border:0; background:white}
      body{background:white}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand" aria-label="App title">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <div class="h1">Circular Motion 1B â€” Key Points</div>
          <div class="muted mini">"PowerPointâ€‘style" tabbed slides â€¢ <span id="count"></span> slides</div>
        </div>
      </div>
      <div class="controls">
        <button class="secondary" id="prev" title="Previous slide (â†)">â—€ï¸ Prev</button>
        <button class="secondary" id="next" title="Next slide (â†’)">Next â–¶ï¸</button>
        <button class="secondary" id="theme" title="Toggle light/dark (T)">ğŸŒ— Theme</button>
        <button class="secondary" id="present" title="Presenter mode (P)">ğŸ–¥ï¸ Present</button>
        <button class="secondary" id="print" title="Print/Save PDF">ğŸ–¨ï¸ Print</button>
      </div>
    </header>

    <nav class="tabs" aria-label="Slides">
      <!-- Tabs will be generated automatically -->
    </nav>

    <div class="stage" id="stage">
      <!-- SLIDE 1: Overview -->
      <section class="slide" data-title="Overview">
        <h2>Circular Motion â€” 1B Overview</h2>
        <div class="grid-2">
          <div>
            <h3>Key Concepts</h3>
            <ul>
              <li><strong>Uniform circular motion</strong>: constant speed, changing velocity direction</li>
              <li><strong>Centripetal force</strong>: always points to circle center</li>
              <li><strong>Velocity</strong>: always tangent to the circle</li>
              <li>Common scenarios: cars on curves, vertical loops, banked tracks, objects on strings</li>
            </ul>
          </div>
          <div>
            <h3>Core Formulas</h3>
            <ul>
              <li class="eq">a<sub>c</sub> = vÂ²Ã·r</li>
              <li class="eq">F<sub>c</sub> = mÂ·vÂ²Ã·r</li>
              <li class="eq">Banked track: v = âˆš(rÂ·gÂ·tan Î¸)</li>
              <li class="eq">Top of loop: F<sub>c</sub> = T + mÂ·g</li>
              <li class="eq">Bottom of loop: F<sub>c</sub> = T âˆ’ mÂ·g</li>
            </ul>
          </div>
        </div>
        <div class="callout"><strong>Critical insight:</strong> Centripetal force is NOT a new forceâ€”it's the net result of other forces (tension, gravity, normal, friction) pointing toward the center.</div>
      </section>

      <!-- SLIDE 2: Horizontal Circular Motion -->
      <section class="slide" data-title="Horizontal Motion">
        <h2>Horizontal Circular Motion</h2>
        <ul>
          <li><strong>Uniform circular motion</strong>: Object moves in circle at constant speed</li>
          <li>Speed is constant but velocity changes (direction changes)</li>
          <li>Acceleration needed â†’ net force needed â†’ toward center</li>
        </ul>
        <div class="callout">
          <strong>Car turning corner:</strong> Friction provides centripetal force<br>
          <strong>Satellite orbiting:</strong> Gravity provides centripetal force
        </div>
        <h3>Example: 1000 kg car, v = 32.4 km/h, r = 3.56 m</h3>
        <details><summary>Reveal solution</summary>
          <ul>
            <li>Convert: 32.4 Ã· 3.6 = 9.00 m/s</li>
            <li class="eq">F<sub>c</sub> = mÂ·vÂ²Ã·r = 1000 Ã— 9Â²Ã·3.56 = 2.28 Ã— 10â´ N</li>
          </ul>
        </details>
      </section>

      <!-- SLIDE 3: Vertical Circular Motion -->
      <section class="slide" data-title="Vertical Loops">
        <h2>Vertical Circular Motion â€” String/Loop</h2>
        <p>Object on string swinging vertically has TWO forces: tension + gravity</p>
        <div class="grid-2">
          <div>
            <h3>Top of circle</h3>
            <ul>
              <li>Both T and mÂ·g point to center</li>
              <li class="eq">F<sub>c</sub> = T + mÂ·g</li>
              <li class="eq">T = mÂ·vÂ²Ã·r âˆ’ mÂ·g</li>
              <li>Minimum v when T = 0: <span class="eq">v = âˆš(rÂ·g)</span></li>
            </ul>
          </div>
          <div>
            <h3>Bottom of circle</h3>
            <ul>
              <li>T points to center, mÂ·g points away</li>
              <li class="eq">F<sub>c</sub> = T âˆ’ mÂ·g</li>
              <li class="eq">T = mÂ·vÂ²Ã·r + mÂ·g</li>
              <li>Maximum tension (string might break!)</li>
            </ul>
          </div>
        </div>
        <div class="callout">Roller coasters use teardrop shapes (smaller r at top) to reduce entry speed needed!</div>
      </section>

      <!-- SLIDE 4: Example - Ball on String -->
      <section class="slide" data-title="Example: Ball on String">
        <h2>Worked Example â€” Ball on String</h2>
        <p>1.27 kg ball, 0.511 m string, vertical circle</p>
        <h3>Part a: v = 4 m/s, find tension at bottom</h3>
        <details><summary>Reveal solution</summary>
          <ul>
            <li class="eq">T = mÂ·vÂ²Ã·r + mÂ·g</li>
            <li class="eq">T = (1.27)(4Â²)Ã·0.511 + (1.27)(9.8)</li>
            <li class="eq">T = 39.8 + 12.4 = 52.2 N</li>
          </ul>
        </details>
        <h3>Part b: Find v for zero tension at top</h3>
        <details><summary>Reveal solution</summary>
          <ul>
            <li>At top with T = 0: <span class="eq">F<sub>c</sub> = mÂ·g</span></li>
            <li class="eq">mÂ·vÂ²Ã·r = mÂ·g</li>
            <li class="eq">v = âˆš(rÂ·g) = âˆš(0.511 Ã— 9.8) = 2.24 m/s</li>
          </ul>
        </details>
      </section>

      <!-- SLIDE 5: Vehicle on Hills -->
      <section class="slide" data-title="Vehicle on Hills">
        <h2>Vehicle on Bumps and Dips</h2>
        <div class="grid-2">
          <div>
            <h3>Over a bump (top)</h3>
            <ul>
              <li>mÂ·g points to center, N points away</li>
              <li class="eq">F<sub>c</sub> = mÂ·g âˆ’ N</li>
              <li class="eq">N = mÂ·g âˆ’ mÂ·vÂ²Ã·r</li>
              <li>Feel "lighter" (N < mÂ·g)</li>
              <li>Lose contact when N = 0: <span class="eq">v = âˆš(rÂ·g)</span></li>
            </ul>
          </div>
          <div>
            <h3>Through a dip (bottom)</h3>
            <ul>
              <li>N points to center, mÂ·g points away</li>
              <li class="eq">F<sub>c</sub> = N âˆ’ mÂ·g</li>
              <li class="eq">N = mÂ·g + mÂ·vÂ²Ã·r</li>
              <li>Feel "heavier" (N > mÂ·g)</li>
              <li>Extra force on suspension!</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- SLIDE 6: Example - Car on Hills -->
      <section class="slide" data-title="Example: Car on Hills">
        <h2>Worked Example â€” 1250 kg Car</h2>
        <h3>Part a: Over 15 m bump at 36 km/h, find F<sub>c</sub></h3>
        <details><summary>Reveal solution</summary>
          <ul>
            <li>v = 36 Ã· 3.6 = 10 m/s</li>
            <li class="eq">F<sub>c</sub> = mÂ·vÂ²Ã·r = 1250 Ã— 10Â²Ã·15 = 8.33 Ã— 10Â³ N</li>
          </ul>
        </details>
        <h3>Part b: Speed for zero normal force</h3>
        <details><summary>Reveal solution</summary>
          <ul>
            <li class="eq">v = âˆš(rÂ·g) = âˆš(15 Ã— 9.8) = 12.1 m/s</li>
          </ul>
        </details>
        <h3>Part c: Through 25 m dip at 97.2 km/h, find N</h3>
        <details><summary>Reveal solution</summary>
          <ul>
            <li>v = 97.2 Ã· 3.6 = 27 m/s</li>
            <li class="eq">N = mÂ·vÂ²Ã·r + mÂ·g = 1250 Ã— 27Â²Ã·25 + 1250 Ã— 9.8</li>
            <li class="eq">N = 36450 + 12250 = 4.30 Ã— 10â´ N</li>
          </ul>
        </details>
      </section>

      <!-- SLIDE 7: Banked Tracks -->
      <section class="slide" data-title="Banked Tracks">
        <h2>Banked Tracks</h2>
        <p>Banking allows turns without relying on friction!</p>
        <ul>
          <li>Track tilted at angle Î¸ to horizontal</li>
          <li>Normal force has horizontal component â†’ provides F<sub>c</sub></li>
          <li>Vertical component of N balances weight</li>
        </ul>
        <div class="callout">
          <strong>Key formulas:</strong><br>
          <span class="eq">F<sub>c</sub> = mÂ·gÂ·tan Î¸</span> (no friction needed)<br>
          <span class="eq">v = âˆš(rÂ·gÂ·tan Î¸)</span> (ideal banking speed)
        </div>
        <p>Used in: velodromes, NASCAR tracks, highway on/off ramps</p>
      </section>

      <!-- SLIDE 8: Example - Banked Track -->
      <section class="slide" data-title="Example: Banked Track">
        <h2>Worked Example â€” 4500 kg Truck</h2>
        <p>Banked track: Î¸ = 30Â°, r = 75 m</p>
        <h3>Part b: F<sub>c</sub> at 50.4 km/h</h3>
        <details><summary>Reveal solution</summary>
          <ul>
            <li>v = 50.4 Ã· 3.6 = 14 m/s</li>
            <li class="eq">F<sub>c</sub> = mÂ·vÂ²Ã·r = 4500 Ã— 14Â²Ã·75 = 1.18 Ã— 10â´ N</li>
          </ul>
        </details>
        <h3>Part c: Maximum speed without friction</h3>
        <details><summary>Reveal solution</summary>
          <ul>
            <li class="eq">v = âˆš(rÂ·gÂ·tan Î¸) = âˆš(75 Ã— 9.8 Ã— tan 30Â°)</li>
            <li class="eq">v = âˆš(75 Ã— 9.8 Ã— 0.577) = 20.6 m/s</li>
          </ul>
        </details>
      </section>

      <!-- SLIDE 9: Horizontal String -->
      <section class="slide" data-title="Horizontal String">
        <h2>Object on String â€” Horizontal Circle</h2>
        <p>Ball attached to fixed point, swings horizontally (conical pendulum)</p>
        <ul>
          <li>Two forces: tension T (at angle Î¸) and weight mÂ·g</li>
          <li>Vertical: TÂ·cos Î¸ = mÂ·g (no vertical motion)</li>
          <li>Horizontal: TÂ·sin Î¸ = F<sub>c</sub> (provides circular motion)</li>
        </ul>
        <div class="callout">
          <strong>From triangle:</strong><br>
          <span class="eq">T = mÂ·g Ã· cos Î¸</span><br>
          <span class="eq">F<sub>c</sub> = mÂ·gÂ·tan Î¸</span>
        </div>
        <h3>Example: 4.83 kg ball, Î¸ = 32Â°</h3>
        <details><summary>Reveal solution</summary>
          <ul>
            <li class="eq">T = mÂ·g Ã· cos 32Â° = 47.3 Ã· 0.848 = 55.8 N</li>
            <li class="eq">F<sub>c</sub> = mÂ·gÂ·tan 32Â° = 47.3 Ã— 0.625 = 29.6 N</li>
          </ul>
        </details>
      </section>

      <!-- SLIDE 10: Practice Problems -->
      <section class="slide" data-title="Practice Problems">
        <h2>Section 1B Questions â€” Multiple Choice</h2>
        <ol>
          <li>Ball swings anticlockwise, string breaks at side. Direction?</li>
          <li>Car needs F at velocity v. What if velocity doubles?</li>
          <li>Truck on 75 m radius at 15 m/s. Acceleration?</li>
        </ol>
        <details><summary>Solutions</summary>
          <ol>
            <li><strong>B</strong> - Tangent to circle (perpendicular to radius)</li>
            <li><strong>D</strong> - F âˆ vÂ², so 2v â†’ 4F</li>
            <li><strong>A</strong> - a = vÂ²Ã·r = 15Â²Ã·75 = 3 m/sÂ²</li>
          </ol>
        </details>
        <h3>More MC Questions</h3>
        <ol start="4">
          <li>Direction of acceleration for circular motion?</li>
          <li>Ball hanging in turning truck, angle Î¸?</li>
          <li>Toy truck on 1.6 m loop, minimum speed at top?</li>
        </ol>
        <details><summary>Solutions</summary>
          <ol start="4">
            <li><strong>C</strong> - Toward center of circle</li>
            <li><strong>C</strong> - tan Î¸ = aÃ·g = 3Ã·9.8, Î¸ = 17.0Â°</li>
            <li><strong>C</strong> - v = âˆš(rÂ·g) = âˆš(1.6 Ã— 9.8) = 4.0 m/s</li>
          </ol>
        </details>
      </section>

      <!-- SLIDE 11: Short Answer 1 -->
      <section class="slide" data-title="Short Answer 1">
        <h2>Short Answer Problems 7-9</h2>
        <h3>Q7: 950 kg vehicle, valley r = 40 m, v = 79.2 km/h</h3>
        <details><summary>Solution</summary>
          <ul>
            <li>v = 79.2 Ã· 3.6 = 22 m/s</li>
            <li class="eq">N = mÂ·g + mÂ·vÂ²Ã·r = 950 Ã— 9.8 + 950 Ã— 22Â²Ã·40</li>
            <li class="eq">N = 9310 + 11495 = 2.08 Ã— 10â´ N</li>
          </ul>
        </details>
        <h3>Q8: Banking angle for r = 75 m at 72 km/h</h3>
        <details><summary>Solution</summary>
          <ul>
            <li>v = 72 Ã· 3.6 = 20 m/s</li>
            <li class="eq">tan Î¸ = vÂ²Ã·(rÂ·g) = 400Ã·(75 Ã— 9.8) = 0.544</li>
            <li class="eq">Î¸ = 28.5Â°</li>
          </ul>
        </details>
        <h3>Q9: 3 kg ball, 52.1 cm string vertical circle</h3>
        <details><summary>Solution</summary>
          <ul>
            <li>a) Zero tension at top: <span class="eq">v = âˆš(0.521 Ã— 9.8) = 2.26 m/s</span></li>
            <li>b) Max T = 100 N at bottom: <span class="eq">100 = 3vÂ²Ã·0.521 + 29.4</span></li>
            <li>Solving: <span class="eq">v = 3.49 m/s</span></li>
          </ul>
        </details>
      </section>

      <!-- SLIDE 12: Short Answer 2 -->
      <section class="slide" data-title="Short Answer 2">
        <h2>Short Answer Problems 10-12</h2>
        <h3>Q10: 464 g ball, 1.5 m string, 30Â° to vertical</h3>
        <details><summary>Solution</summary>
          <ul>
            <li>a) r = 1.5 Ã— sin 30Â° = 0.75 m</li>
            <li>b) <span class="eq">v = âˆš(rÂ·gÂ·tan 30Â°) = âˆš(0.75 Ã— 9.8 Ã— 0.577) = 2.06 m/s</span></li>
            <li>c) <span class="eq">T = mÂ·gÃ·cos 30Â° = 4.55Ã·0.866 = 5.25 N</span></li>
            <li>d) <span class="eq">F<sub>c</sub> = mÂ·gÂ·tan 30Â° = 4.55 Ã— 0.577 = 2.63 N</span></li>
          </ul>
        </details>
        <h3>Q11: Zero-g flight at 180 m/s, 8000 m altitude</h3>
        <details><summary>Solution</summary>
          <ul>
            <li>a) For "zero-g": N = 0, so <span class="eq">mÂ·vÂ²Ã·r = mÂ·g</span></li>
            <li><span class="eq">r = vÂ²Ã·g = 180Â²Ã·9.8 = 3306 m</span></li>
            <li>b) Gravity still acts! "Zero-g" means N = 0 (free fall)</li>
          </ul>
        </details>
        <h3>Q12: 1750 kg car, 24Â° bank at 68.4 km/h</h3>
        <details><summary>Solution</summary>
          <ul>
            <li>b) v = 19 m/s, <span class="eq">r = vÂ²Ã·(gÂ·tan Î¸) = 361Ã·(9.8 Ã— 0.445) = 82.8 m</span></li>
            <li>c) Horizontal component of normal force provides centripetal force</li>
          </ul>
        </details>
      </section>
    </div>

    <div class="footer">
      <div class="pill"><span class="progress" id="progress">1 / 12</span>&nbsp;&nbsp; <button class="secondary mini" id="fsDown" title="Smaller (â€“)">Aâˆ’</button> <button class="secondary mini" id="fsUp" title="Larger (+)">A+</button> <span class="shortcuts">â€¢ Shortcuts: <kbd>â†</kbd>/<kbd>â†’</kbd>, <kbd>T</kbd>, <kbd>P</kbd>, <kbd>G</kbd></span></div>
      <div class="pill">Print tip: use "Save as PDF" for handouts (one slide per page)</div>
    </div>
  </div>

  <script>
    // --- Build tabs and wire up navigation ---
    const stage = document.getElementById('stage');
    const slides = Array.from(stage.querySelectorAll('.slide'));
    const tabs = document.querySelector('.tabs');
    const prevBtn = document.getElementById('prev');
    const nextBtn = document.getElementById('next');
    const themeBtn = document.getElementById('theme');
    const presentBtn = document.getElementById('present');
    const printBtn = document.getElementById('print');
    const progress = document.getElementById('progress');
    const count = document.getElementById('count');
    const fsDown = document.getElementById('fsDown');
    const fsUp = document.getElementById('fsUp');
    count.textContent = slides.length;
    // Font scale setup
    let fscale = parseFloat(localStorage.getItem('slides-fs') || '1');
    const applyFs = ()=> document.documentElement.style.setProperty('--fs', String(fscale));
    applyFs();
    if(fsDown) fsDown.addEventListener('click', ()=>{ fscale = Math.max(0.8, +(fscale - 0.1).toFixed(2)); localStorage.setItem('slides-fs', String(fscale)); applyFs(); });
    if(fsUp) fsUp.addEventListener('click', ()=>{ fscale = Math.min(1.6, +(fscale + 0.1).toFixed(2)); localStorage.setItem('slides-fs', String(fscale)); applyFs(); });

    let idx = 0;

    function makeTabs(){
      slides.forEach((s,i)=>{
        const b = document.createElement('button');
        b.setAttribute('type','button');
        b.textContent = `${i+1}. ${s.dataset.title || 'Slide '+(i+1)}`;
        b.addEventListener('click',()=>show(i,true));
        tabs.appendChild(b);
      })
    }

    function show(i, fromUser=false){
      idx = Math.max(0, Math.min(slides.length-1, i));
      slides.forEach((s,j)=>s.classList.toggle('active', j===idx));
      const btns = tabs.querySelectorAll('button');
      btns.forEach((b,j)=>b.classList.toggle('active', j===idx));
      progress.textContent = `${idx+1} / ${slides.length}`;
      document.title = `${idx+1}/${slides.length} â€” ${slides[idx].dataset.title} â€” Circular Motion 1B`;
      if(fromUser) history.replaceState(null,'',`#s${idx+1}`);
      localStorage.setItem('slides-1B-current', String(idx));
    }

    function next(){ show(idx+1,true) }
    function prev(){ show(idx-1,true) }

    makeTabs();

    // restore from hash or storage
    const hashMatch = location.hash.match(/#s(\d+)/);
    const saved = localStorage.getItem('slides-1B-current');
    if(hashMatch){ idx = Math.min(slides.length-1, Math.max(0, parseInt(hashMatch[1],10)-1)); }
    else if(saved){ idx = Math.min(slides.length-1, Math.max(0, parseInt(saved,10))); }
    show(idx);

    // Buttons
    prevBtn.addEventListener('click', prev);
    nextBtn.addEventListener('click', next);
    themeBtn.addEventListener('click', ()=>{
      document.documentElement.classList.toggle('dark');
      localStorage.setItem('slides-theme', document.documentElement.classList.contains('dark')? 'dark':'light');
    });
    presentBtn.addEventListener('click', ()=>{
      document.body.classList.toggle('present');
      if(document.fullscreenEnabled){
        if(!document.fullscreenElement){ document.documentElement.requestFullscreen().catch(()=>{}); }
        else{ document.exitFullscreen().catch(()=>{}); }
      }
    });
    printBtn.addEventListener('click', ()=>window.print());

    // Sync present mode with fullscreen exit (Esc)
    document.addEventListener('fullscreenchange', ()=>{
      if(!document.fullscreenElement){ document.body.classList.remove('present'); }
    });

    // Theme restore
    const savedTheme = localStorage.getItem('slides-theme');
    if(savedTheme === 'dark') document.documentElement.classList.add('dark');

    // Keyboard shortcuts
    window.addEventListener('keydown', (e)=>{
      if(['ArrowRight','PageDown'].includes(e.key)) { e.preventDefault(); next(); }
      if(['ArrowLeft','PageUp'].includes(e.key))   { e.preventDefault(); prev(); }
      if(e.key.toLowerCase()==='t'){ themeBtn.click(); }
      if(e.key.toLowerCase()==='p'){ presentBtn.click(); }
      if(e.key.toLowerCase()==='g'){ document.querySelector('.tabs').scrollTo({left:0,behavior:'smooth'}); }
    });

    // Click to advance anywhere on slide (but not on buttons)
    stage.addEventListener('click', (e)=>{
      if(e.target.closest('button,details,summary,a')) return; // ignore UI elements
      next();
    })
  </script>
</body>
</html>