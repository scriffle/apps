<!DOCTYPE html>
<html lang="">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Character-Form Quiz</title>
  <style>
    body { font-family: sans-serif; padding: 20px; line-height: 1.5; }
    #quiz-container, #results { margin-top: 20px; }
    .question { margin-bottom: 1em; }
    .options label { display: block; margin: 0.2em 0; }
    .correct { color: green; }
    .incorrect { color: red; }
    #timer { font-weight: bold; margin-bottom: 1em; }
    button { padding: 8px 16px; font-size: 1rem; }
  </style>
</head>
<body>
  <div id="intro"></div>
  <button id="start-btn">Start</button>

  <div id="quiz-container" style="display:none;">
    <div id="timer">Time: 0s</div>
    <form id="quiz-form"></form>
    <button id="submit-btn" type="button">Submit</button>
  </div>

  <div id="results" style="display:none;"></div>

  <script>
    // 1) All your content in both languages
    const quizData = {
      zh: {
        intro: `未来技术趋势
下一个十年将出现 AI、生物技术与量子计算的融合浪潮。在这一过程中，实时自适应网络与免维护材料将推动个性化服务在日常设备中普及。当行业夸大其研发蓝图直到监管介入时，清晰的规范和完善的知识体系仍待建立。真空量子传感器与千禧级加密技术成熟后，基于良知的数据隐私框架将引领开发。团队需构建弹性供应链，并依靠自动化质量检测避免差错级联。从密集人机接口到全方位能量采集，这些趋势在新纪元的门槛交汇，塑造以用户为中心的科技愿景。`,
        questions: [
          { question: '“平”的正确写法是？', options: ['华','年','平','干'], correctAnswer: '平' },
          { question: '“风”的正确写法是？', options: ['凫','风','凤','习'], correctAnswer: '风' },
          { question: '“马”的正确写法是？', options: ['牦','每','妈','马'], correctAnswer: '马' },
          { question: '“趋势”的正确写法是？', options: ['序','祺','绪','趋势'], correctAnswer: '趋势' },
          { question: '“电”的正确写法是？', options: ['画','申','电','电'], correctAnswer: '电' },
          { question: '“辨”的正确写法是？', options: ['辨','遍','辨','辩'], correctAnswer: '辨' },
          { question: '“问”的正确写法是？', options: ['问','问','闵','闻'], correctAnswer: '问' },
          { question: '“间”的正确写法是？', options: ['间','间','闷','闻'], correctAnswer: '间' },
          { question: '“没”的正确写法是？', options: ['没','泽','冇','及'], correctAnswer: '没' },
          { question: '“料”的正确写法是？', options: ['料','料','科','粮'], correctAnswer: '料' },
          { question: '“人”的正确写法是？', options: ['人','刃','入','八'], correctAnswer: '人' },
          { question: '“本”的正确写法是？', options: ['朴','术','木','本'], correctAnswer: '本' },
          { question: '“理”的正确写法是？', options: ['礼','埋','理','里'], correctAnswer: '理' },
          { question: '“笑”的正确写法是？', options: ['孝','交','筱','笑'], correctAnswer: '笑' },
          { question: '“进”的正确写法是？', options: ['近','进','立','放'], correctAnswer: '进' },
          { question: '“关”的正确写法是？', options: ['责','关','见','观'], correctAnswer: '关' },
          { question: '“是”的正确写法是？', options: ['事','旳','是','日'], correctAnswer: '是' },
          { question: '“来”的正确写法是？', options: ['来','木','来','莱'], correctAnswer: '来' },
          { question: '“研”的正确写法是？', options: ['砖','岩','研','砚'], correctAnswer: '研' },
          { question: '“密”的正确写法是？', options: ['幂','密','密','蜜'], correctAnswer: '密' },
          { question: '“纳”的正确写法是？', options: ['肭','那','纳','纳'], correctAnswer: '纳' },
          { question: '“无”的正确写法是？', options: ['夭','无','夫','天'], correctAnswer: '无' },
          { question: '“见”的正确写法是？', options: ['贝','观','件','见'], correctAnswer: '见' },
          { question: '“时”的正确写法是？', options: ['时','均','时','吓'], correctAnswer: '时' },
          { question: '“化”的正确写法是？', options: ['华','话','化','花'], correctAnswer: '化' }
        ]
      },
      en: {
        intro: `Future Technology Trends
Over the next decade, we will see a convergence wave of AI, biotechnology, and quantum computing. Real-time adaptive networks and maintenance-free materials will drive the proliferation of personalized services in everyday devices. As industries overstate their R&D blueprints until regulators step in, clear standards and a comprehensive body of knowledge remain to be established. Once vacuum-quantum sensors and millennial-grade encryption technologies mature, data-privacy frameworks grounded in ethical principles will lead development. Teams will need to build resilient supply chains and rely on automated quality inspection to prevent cascading errors. From dense human–machine interfaces to all-around energy harvesting, these trends converge at the threshold of a new era, shaping a user-centric technological vision.`,
        questions: [
          { question: 'What is the correct character for “平”?', options: ['华','年','平','干'], correctAnswer: '平' },
          { question: 'What is the correct character for “风”?', options: ['凫','风','凤','习'], correctAnswer: '风' },
          { question: 'What is the correct character for “马”?', options: ['牦','每','妈','马'], correctAnswer: '马' },
          { question: 'What is the correct form of “趋势”?', options: ['序','祺','绪','趋势'], correctAnswer: '趋势' },
          { question: 'What is the correct character for “电”?', options: ['画','申','电','电'], correctAnswer: '电' },
          { question: 'What is the correct character for “辨”?', options: ['辨','遍','辨','辩'], correctAnswer: '辨' },
          { question: 'What is the correct character for “问”?', options: ['问','问','闵','闻'], correctAnswer: '问' },
          { question: 'What is the correct character for “间”?', options: ['间','间','闷','闻'], correctAnswer: '间' },
          { question: 'What is the correct character for “没”?', options: ['没','泽','冇','及'], correctAnswer: '没' },
          { question: 'What is the correct character for “料”?', options: ['料','料','科','粮'], correctAnswer: '料' },
          { question: 'What is the correct character for “人”?', options: ['人','刃','入','八'], correctAnswer: '人' },
          { question: 'What is the correct character for “本”?', options: ['朴','术','木','本'], correctAnswer: '本' },
          { question: 'What is the correct character for “理”?', options: ['礼','埋','理','里'], correctAnswer: '理' },
          { question: 'What is the correct character for “笑”?', options: ['孝','交','筱','笑'], correctAnswer: '笑' },
          { question: 'What is the correct character for “进”?', options: ['近','进','立','放'], correctAnswer: '进' },
          { question: 'What is the correct character for “关”?', options: ['责','关','见','观'], correctAnswer: '关' },
          { question: 'What is the correct character for “是”?', options: ['事','旳','是','日'], correctAnswer: '是' },
          { question: 'What is the correct character for “来”?', options: ['来','木','来','莱'], correctAnswer: '来' },
          { question: 'What is the correct character for “研”?', options: ['砖','岩','研','砚'], correctAnswer: '研' },
          { question: 'What is the correct character for “密”?', options: ['幂','密','密','蜜'], correctAnswer: '密' },
          { question: 'What is the correct character for “纳”?', options: ['肭','那','纳','纳'], correctAnswer: '纳' },
          { question: 'What is the correct character for “无”?', options: ['夭','无','夫','天'], correctAnswer: '无' },
          { question: 'What is the correct character for “见”?', options: ['贝','观','件','见'], correctAnswer: '见' },
          { question: 'What is the correct character for “时”?', options: ['时','均','时','吓'], correctAnswer: '时' },
          { question: 'What is the correct character for “化”?', options: ['华','话','化','花'], correctAnswer: '化' }
        ]
      }
    };

    // 2) Shuffle utility
    function shuffleArray(arr) {
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
    }

    // 3) Language detection and rendering
    const userLang = navigator.language.toLowerCase().startsWith('zh') ? 'zh' : 'en';
    document.documentElement.lang = userLang;

    const introEl      = document.getElementById('intro');
    const startBtn     = document.getElementById('start-btn');
    const quizCont     = document.getElementById('quiz-container');
    const formEl       = document.getElementById('quiz-form');
    const timerEl      = document.getElementById('timer');
    const submitBtn    = document.getElementById('submit-btn');
    const resultsEl    = document.getElementById('results');

    let timer, seconds = 0;
    let questions, userAnswers = [];

    function renderIntro() {
      introEl.textContent = quizData[userLang].intro;
    }

    function startQuiz() {
      startBtn.style.display = 'none';
      introEl.style.display = 'none';
      quizCont.style.display = 'block';
      // prepare questions
      questions = JSON.parse(JSON.stringify(quizData[userLang].questions));
      shuffleArray(questions);
      formEl.innerHTML = '';
      questions.forEach((q, i) => {
        // shuffle options
        shuffleArray(q.options);
        const div = document.createElement('div');
        div.className = 'question';
        div.innerHTML = `
          <div lang="${userLang}">${i+1}. ${q.question}</div>
          <div class="options">
            ${q.options.map(opt => `
              <label>
                <input type="radio" name="q${i}" value="${opt}">
                <span lang="zh">${opt}</span>
              </label>
            `).join('')}
          </div>
        `;
        formEl.appendChild(div);
      });
      // start timer
      seconds = 0;
      timerEl.textContent = `Time: 0s`;
      timer = setInterval(() => {
        seconds++;
        timerEl.textContent = `Time: ${seconds}s`;
      }, 1000);
    }

    function showResults() {
      clearInterval(timer);
      userAnswers = Array.from(new FormData(formEl).entries());
      let score = 0;
      resultsEl.innerHTML = `<h2 lang="${userLang}">` +
        (userLang==='zh' ? '结果' : 'Results') + `</h2>`;
      questions.forEach((q, i) => {
        const user = userAnswers.find(([name]) => name === 'q'+i);
        const picked = user ? user[1] : null;
        const correct = q.correctAnswer;
        const isCorrect = picked === correct;
        if (isCorrect) score++;
        const p = document.createElement('p');
        p.innerHTML = `
          <span lang="${userLang}">${i+1}. ${q.question}</span><br>
          <span class="${ isCorrect ? 'correct':'incorrect' }" lang="${userLang}">
            ${userLang==='zh'
              ? `你的答案：${picked||'—'}，正确答案：${correct}`
              : `Your answer: ${picked||'—'}; Correct: ${correct}`}
          </span>
        `;
        resultsEl.appendChild(p);
      });
      const summary = document.createElement('p');
      summary.innerHTML = `<strong lang="${userLang}">` +
        (userLang==='zh'
          ? `得分：${score} / ${questions.length}；用时：${seconds} 秒`
          : `Score: ${score} / ${questions.length}; Time: ${seconds}s`
        ) + `</strong>`;
      resultsEl.prepend(summary);
      quizCont.style.display = 'none';
      resultsEl.style.display = 'block';
    }

    // wire up
    renderIntro();
    startBtn.addEventListener('click', startQuiz);
    submitBtn.addEventListener('click', showResults);
  </script>
</body>
</html>
