<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#0f0a1e">
  <title>Hetro Imposter</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    :root {
      --bg-deep: #0f0a1e;
      --bg-card: #1a1230;
      --bg-elevated: #251a40;
      --text-primary: #f0e6ff;
      --text-secondary: #c4b5d8;
      --text-muted: #9a8bb5;
      --text-dim: #6b5a8a;
      --civilian-glow: #22c55e;
      --civilian-dim: #1a8a47;
      --civilian-bg: rgba(34, 197, 94, 0.15);
      --imposter-glow: #ef4444;
      --imposter-bg: rgba(239, 68, 68, 0.15);
      --twist-glow: #f59e0b;
      --twist-bg: rgba(245, 158, 11, 0.15);
      --accent: #a855f7;
      --accent-bright: #c084fc;
      --accent-glow: rgba(168, 85, 247, 0.4);
      --border: rgba(168, 85, 247, 0.3);
      --font-display: 'Bebas Neue', sans-serif;
      --font-body: 'Outfit', sans-serif;
      --radius: 16px;
      --radius-sm: 8px;
      --touch-min: 48px;
      --transition: 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    }

    html, body {
      height: 100%;
      overflow: hidden;
    }

    body {
      font-family: var(--font-body);
      background: var(--bg-deep);
      color: var(--text-primary);
      display: flex;
      flex-direction: column;
      min-height: 100dvh;
      -webkit-tap-highlight-color: transparent;
      user-select: none;
      -webkit-user-select: none;
    }

    body::before {
      content: '';
      position: fixed;
      inset: 0;
      background: 
        radial-gradient(ellipse at 20% 20%, rgba(168, 85, 247, 0.08) 0%, transparent 50%),
        radial-gradient(ellipse at 80% 80%, rgba(239, 68, 68, 0.06) 0%, transparent 50%),
        radial-gradient(ellipse at 50% 50%, rgba(34, 197, 94, 0.04) 0%, transparent 60%);
      pointer-events: none;
      z-index: 0;
    }

    .app {
      position: relative;
      z-index: 1;
      flex: 1;
      display: flex;
      flex-direction: column;
      max-width: 480px;
      width: 100%;
      margin: 0 auto;
      padding: 16px;
      padding-bottom: env(safe-area-inset-bottom, 16px);
      overflow-y: auto;
      overflow-x: hidden;
    }

    .screen {
      display: none;
      flex-direction: column;
      flex: 1;
      animation: fadeIn 0.3s ease;
      position: relative;
    }

    .screen.active {
      display: flex;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    @keyframes glow {
      0%, 100% { filter: drop-shadow(0 0 10px currentColor); }
      50% { filter: drop-shadow(0 0 20px currentColor); }
    }

    @keyframes revealPop {
      0% { transform: scale(0.8); opacity: 0; }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); opacity: 1; }
    }

    h1 {
      font-family: var(--font-display);
      font-size: clamp(2.5rem, 10vw, 4rem);
      letter-spacing: 0.05em;
      text-transform: uppercase;
      line-height: 1;
      color: var(--text-primary);
    }

    h2 {
      font-family: var(--font-display);
      font-size: clamp(1.5rem, 6vw, 2.5rem);
      letter-spacing: 0.03em;
      text-transform: uppercase;
      color: var(--text-primary);
    }

    h3 {
      font-family: var(--font-display);
      font-size: 1.5rem;
      letter-spacing: 0.03em;
      color: var(--text-primary);
    }

    p {
      font-size: 1rem;
      line-height: 1.5;
      color: var(--text-secondary);
    }

    button {
      font-family: var(--font-body);
      color: var(--text-primary);
      background: transparent;
      border: none;
      cursor: pointer;
    }

    .btn {
      font-family: var(--font-body);
      font-weight: 600;
      font-size: 1rem;
      min-height: var(--touch-min);
      padding: 14px 28px;
      border: none;
      border-radius: var(--radius);
      cursor: pointer;
      transition: all var(--transition);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      color: var(--text-primary);
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--accent) 0%, #9333ea 100%);
      color: #ffffff;
      box-shadow: 0 4px 20px var(--accent-glow);
    }

    .btn-primary:hover, .btn-primary:focus {
      transform: translateY(-2px);
      box-shadow: 0 8px 30px var(--accent-glow);
    }

    .btn-primary:active {
      transform: translateY(0);
    }

    .btn-secondary {
      background: var(--bg-elevated);
      color: var(--text-primary);
      border: 1px solid var(--border);
    }

    .btn-secondary:hover, .btn-secondary:focus {
      background: var(--bg-card);
      border-color: var(--accent);
    }

    .btn-ghost {
      background: transparent;
      color: var(--text-secondary);
    }

    .btn-ghost:hover {
      color: var(--text-primary);
      background: rgba(255,255,255,0.05);
    }

    .btn-lg {
      min-height: 60px;
      font-size: 1.125rem;
      padding: 18px 36px;
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none !important;
    }

    .btn-sm {
      min-height: 36px;
      padding: 8px 16px;
      font-size: 0.875rem;
    }

    .input, .textarea {
      font-family: var(--font-body);
      font-size: 1rem;
      padding: 12px 16px;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      color: var(--text-primary);
      transition: all var(--transition);
      width: 100%;
    }

    .textarea {
      min-height: 180px;
      resize: vertical;
      line-height: 1.8;
    }

    .input:focus, .textarea:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px var(--accent-glow);
    }

    .input::placeholder, .textarea::placeholder {
      color: var(--text-muted);
    }

    .card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 20px;
    }

    .options-row {
      display: flex;
      gap: 12px;
      margin: 12px 0;
      flex-wrap: wrap;
    }

    .option-btn {
      flex: 1;
      min-width: 80px;
      font-family: var(--font-body);
      background: var(--bg-card);
      border: 2px solid var(--border);
      border-radius: var(--radius-sm);
      padding: 12px;
      color: var(--text-primary);
      font-weight: 600;
      cursor: pointer;
      transition: all var(--transition);
      min-height: var(--touch-min);
    }

    .option-btn.selected {
      border-color: var(--accent);
      background: rgba(168, 85, 247, 0.25);
      color: #ffffff;
    }

    .option-btn:hover:not(:disabled) {
      border-color: var(--accent);
      color: #ffffff;
    }

    .option-btn:disabled {
      opacity: 0.3;
      cursor: not-allowed;
    }

    /* Close/Cancel button */
    .close-btn {
      position: absolute;
      top: 0;
      right: 0;
      width: 44px;
      height: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      color: var(--text-muted);
      background: transparent;
      border: none;
      cursor: pointer;
      transition: all var(--transition);
      z-index: 10;
    }

    .close-btn:hover {
      color: var(--text-primary);
    }

    /* Cancel confirmation inline */
    .cancel-confirm {
      display: none;
      position: absolute;
      top: 50px;
      right: 8px;
      background: var(--bg-card);
      border: 2px solid var(--imposter-glow);
      border-radius: var(--radius);
      padding: 16px;
      z-index: 20;
      animation: fadeIn 0.2s ease;
      max-width: 280px;
    }

    .cancel-confirm.show {
      display: block;
    }

    .cancel-confirm p {
      margin-bottom: 12px;
      color: var(--text-primary);
      font-weight: 500;
    }

    .cancel-confirm-btns {
      display: flex;
      gap: 8px;
    }

    .cancel-confirm-btns .btn {
      flex: 1;
    }

    .btn-danger {
      background: var(--imposter-bg);
      border: 1px solid var(--imposter-glow);
      color: var(--imposter-glow);
    }

    .btn-danger:hover {
      background: rgba(239, 68, 68, 0.3);
    }

    /* Role reveal container */
    .role-container {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 20px;
    }

    .role-player-name {
      font-family: var(--font-display);
      font-size: clamp(2.5rem, 12vw, 4rem);
      color: var(--accent-bright);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 24px;
      text-shadow: 0 0 20px var(--accent-glow);
    }

    /* Hold to reveal wrapper */
    .hold-reveal-wrapper {
      position: relative;
      padding: 60px 40px;
      border: 3px dashed var(--border);
      border-radius: var(--radius);
      cursor: pointer;
      transition: all var(--transition);
      touch-action: manipulation;
      min-width: 280px;
    }

    .hold-reveal-wrapper:hover {
      border-color: var(--accent);
      background: rgba(168, 85, 247, 0.05);
    }

    .hold-reveal-wrapper.holding {
      border-color: var(--accent);
      background: rgba(168, 85, 247, 0.1);
      transform: scale(0.98);
      border-style: solid;
    }

    .hold-reveal-wrapper.holding .hold-prompt {
      display: none;
    }

    .hold-reveal-wrapper.holding .role-content {
      display: block;
    }

    .hold-prompt {
      display: block;
    }

    .role-content {
      display: none;
    }

    .hold-icon {
      font-size: 3rem;
      margin-bottom: 16px;
    }

    .role-revealed {
      animation: revealPop 0.2s ease;
    }

    .role-badge {
      display: inline-block;
      padding: 8px 24px;
      border-radius: 999px;
      font-family: var(--font-display);
      font-size: 1.5rem;
      letter-spacing: 0.1em;
      margin: 16px 0;
    }

    /* Civilian badge - dimmed */
    .role-badge.civilian {
      background: rgba(34, 197, 94, 0.1);
      color: var(--civilian-dim);
      border: 2px solid var(--civilian-dim);
      opacity: 0.7;
    }

    /* Imposter badge - bright */
    .role-badge.imposter {
      background: var(--imposter-bg);
      color: var(--imposter-glow);
      border: 2px solid var(--imposter-glow);
      animation: glow 2s ease infinite;
    }

    /* Secret word - bright */
    .secret-word {
      font-family: var(--font-display);
      font-size: clamp(2.5rem, 12vw, 4rem);
      color: #ffffff;
      text-transform: uppercase;
      margin: 24px 0;
      text-shadow: 0 0 30px var(--accent-bright), 0 0 60px var(--accent);
    }

    .secret-word.small {
      font-size: clamp(1.8rem, 8vw, 2.5rem);
      margin: 12px 0;
    }

    .hint-text {
      font-size: 0.875rem;
      color: var(--text-muted);
      margin-top: 8px;
    }

    /* Pass device screen */
    .pass-device {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
    }

    .pass-device-name {
      font-family: var(--font-display);
      font-size: clamp(2rem, 10vw, 3rem);
      color: var(--accent);
      margin: 24px 0;
    }

    .pass-icon {
      font-size: 4rem;
      margin-bottom: 16px;
      animation: pulse 2s ease infinite;
    }

    /* Confirmation screen - group decision */
    .confirm-option {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 16px;
      background: var(--bg-card);
      border: 2px solid var(--border);
      border-radius: var(--radius-sm);
      cursor: pointer;
      transition: all var(--transition);
      margin-bottom: 8px;
      min-height: 56px;
    }

    .confirm-option:hover {
      border-color: var(--accent);
    }

    .confirm-option.selected {
      border-color: var(--imposter-glow);
      background: var(--imposter-bg);
    }

    .confirm-option .player-name {
      flex: 1;
      font-weight: 600;
      color: var(--text-primary);
    }

    .selection-counter {
      text-align: center;
      padding: 12px;
      background: var(--bg-card);
      border-radius: var(--radius-sm);
      margin-bottom: 16px;
      font-weight: 600;
    }

    .selection-counter.complete {
      background: var(--civilian-bg);
      color: var(--civilian-glow);
    }

    /* Results */
    .result-reveal {
      text-align: center;
      padding: 32px;
      border-radius: var(--radius);
      margin: 24px 0;
      animation: revealPop 0.5s ease;
    }

    .result-reveal.correct {
      background: var(--civilian-bg);
      border: 2px solid var(--civilian-glow);
    }

    .result-reveal.wrong {
      background: var(--imposter-bg);
      border: 2px solid var(--imposter-glow);
    }

    .result-reveal.partial {
      background: var(--twist-bg);
      border: 2px solid var(--twist-glow);
    }

    .result-name {
      font-family: var(--font-display);
      font-size: 1.5rem;
      margin-bottom: 8px;
      color: var(--text-primary);
    }

    /* Twist reveal */
    .twist-box {
      background: var(--twist-bg);
      border: 2px solid var(--twist-glow);
      border-radius: var(--radius);
      padding: 24px;
      text-align: center;
      margin: 20px 0;
      animation: revealPop 0.5s ease;
    }

    .twist-box h3 {
      color: var(--twist-glow);
      margin-bottom: 8px;
    }

    /* Meanings list */
    .meanings-list {
      text-align: left;
      margin: 16px 0;
    }

    .meaning-item {
      padding: 12px 0;
      border-bottom: 1px solid var(--border);
    }

    .meaning-item:last-child {
      border-bottom: none;
    }

    .meaning-text {
      flex: 1;
    }

    .pronunciation {
      font-size: 0.875rem;
      color: var(--text-muted);
      font-style: italic;
      display: block;
      margin-bottom: 4px;
    }

    /* Winner announcement */
    .winner-announcement {
      text-align: center;
      padding: 40px 20px;
    }

    .winner-icon {
      font-size: 5rem;
      margin-bottom: 16px;
    }

    .winner-text {
      font-family: var(--font-display);
      font-size: clamp(1.5rem, 8vw, 2.5rem);
    }

    /* All words reveal */
    .all-words-list {
      margin: 16px 0;
    }

    .all-words-item {
      display: flex;
      justify-content: space-between;
      padding: 12px;
      border-bottom: 1px solid var(--border);
      color: var(--text-primary);
    }

    .all-words-item:last-child {
      border-bottom: none;
    }

    /* Imposter list at end */
    .imposter-list {
      margin: 16px 0;
    }

    .imposter-item {
      padding: 8px 16px;
      background: var(--imposter-bg);
      border: 1px solid var(--imposter-glow);
      border-radius: var(--radius-sm);
      color: var(--imposter-glow);
      margin-bottom: 8px;
      font-weight: 600;
    }

    /* Discussion rules */
    .rules-box {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 20px;
      margin: 16px 0;
    }

    .rules-box ol {
      padding-left: 20px;
      color: var(--text-secondary);
    }

    .rules-box li {
      margin-bottom: 12px;
      line-height: 1.5;
    }

    .rules-box strong {
      color: var(--text-primary);
    }

    /* Form sections */
    .form-section {
      margin-bottom: 24px;
    }

    .form-label {
      display: block;
      font-weight: 600;
      margin-bottom: 8px;
      color: var(--text-primary);
    }

    .form-hint {
      font-size: 0.875rem;
      color: var(--text-muted);
      margin-top: 8px;
    }

    .player-count-badge {
      display: inline-block;
      background: var(--accent);
      color: #ffffff;
      padding: 4px 12px;
      border-radius: 999px;
      font-size: 0.875rem;
      font-weight: 600;
      margin-left: 8px;
    }

    /* Category pills */
    .category-pills {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .category-pill {
      font-family: var(--font-body);
      padding: 10px 18px;
      background: var(--bg-elevated);
      border: 2px solid var(--border);
      border-radius: 999px;
      font-size: 0.9rem;
      font-weight: 500;
      cursor: pointer;
      transition: all var(--transition);
      color: var(--text-primary);
    }

    .category-pill:hover {
      border-color: var(--accent);
      background: rgba(168, 85, 247, 0.15);
      color: #ffffff;
    }

    .category-pill.selected {
      background: rgba(168, 85, 247, 0.3);
      border-color: var(--accent);
      color: #ffffff;
      font-weight: 600;
    }

    /* Spacers */
    .spacer { flex: 1; }
    .spacer-sm { height: 16px; }
    .spacer-md { height: 24px; }
    .spacer-lg { height: 32px; }

    /* Utility */
    .text-center { text-align: center; }
    .text-muted { color: var(--text-muted); }
    .text-success { color: var(--civilian-glow); }
    .text-danger { color: var(--imposter-glow); }
    .text-warning { color: var(--twist-glow); }
    .mb-1 { margin-bottom: 8px; }
    .mb-2 { margin-bottom: 16px; }
    .mb-3 { margin-bottom: 24px; }
    .mt-auto { margin-top: auto; }

    /* Logo styling */
    .logo-container {
      text-align: center;
      margin-bottom: 32px;
    }

    .logo-hetro {
      color: var(--civilian-glow);
    }

    .logo-imposter {
      color: var(--imposter-glow);
    }

    .tagline {
      font-size: 0.875rem;
      color: var(--text-muted);
      letter-spacing: 0.2em;
      text-transform: uppercase;
      margin-top: 8px;
    }

    /* Debug panel */
    .debug-panel {
      display: none;
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(0,0,0,0.95);
      padding: 16px;
      border-top: 2px solid var(--twist-glow);
      z-index: 1000;
    }

    .debug-panel.show {
      display: block;
    }

    .debug-panel h4 {
      color: var(--twist-glow);
      margin-bottom: 12px;
    }

    .debug-modes {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .debug-mode-btn {
      font-family: var(--font-body);
      padding: 8px 16px;
      background: var(--bg-elevated);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      color: var(--text-primary);
      cursor: pointer;
      font-size: 0.875rem;
    }

    .debug-mode-btn:hover {
      border-color: var(--twist-glow);
    }

    .debug-mode-btn.active {
      border-color: var(--twist-glow);
      background: var(--twist-bg);
      color: var(--twist-glow);
    }

    /* Progress indicator */
    .progress-dots {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-bottom: 24px;
    }

    .progress-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: var(--border);
    }

    .progress-dot.active {
      background: var(--accent);
    }

    .progress-dot.done {
      background: var(--civilian-glow);
    }
  </style>
</head>
<body>
  <div class="app">
    <!-- Screen: Home -->
    <div id="screen-home" class="screen active">
      <div class="spacer"></div>
      <div class="logo-container">
        <h1><span class="logo-hetro">Hetro</span> <span class="logo-imposter">Imposter</span></h1>
        <p class="tagline">Words with a twist</p>
      </div>
      <p class="text-center mb-3">A social deduction party game where all words have multiple meanings. Can you spot the imposter... or are you one?</p>
      <div class="spacer"></div>
      <button class="btn btn-primary btn-lg" onclick="showScreen('setup')">New Game</button>
      <div class="spacer-md"></div>
      <button class="btn btn-ghost" onclick="showScreen('rules')">How to Play</button>
      <div class="spacer-lg"></div>
    </div>

    <!-- Screen: Rules -->
    <div id="screen-rules" class="screen">
      <h2 class="mb-2">How to Play</h2>
      <div class="card mb-2">
        <h3 class="mb-1">1. Setup</h3>
        <p>Enter player names (one per line) and choose how many imposters.</p>
      </div>
      <div class="card mb-2">
        <h3 class="mb-1">2. Learn Your Role</h3>
        <p>Pass the device around. Each player <strong>holds</strong> (press and hold / click and hold) to see if they're a <span class="text-success">Civilian</span> (knows the word) or <span class="text-danger">Imposter</span> (doesn't know). Release to hide. Tap âœ• to cancel and restart if needed.</p>
      </div>
      <div class="card mb-2">
        <h3 class="mb-1">3. Discuss</h3>
        <p>Go around the group and say something brief that proves you know the word â€” without saying it. After 2-3 rounds, discuss who you think is the imposter.</p>
      </div>
      <div class="card mb-2">
        <h3 class="mb-1">4. Oh, and it's Hetro-Twisted</h3>
        <p class="text-warning">All the words in this game are heteronyms â€” words spelled the same but with different meanings. That's the only twist ... maybe.</p>
      </div>
      <div class="card mb-2">
        <h3 class="mb-1">5. Confirm</h3>
        <p>Return to the app to reveal who the imposter really was.</p>
      </div>
      <div class="spacer"></div>
      <button class="btn btn-secondary" onclick="showScreen('home')">â† Back</button>
    </div>

    <!-- Screen: Setup -->
    <div id="screen-setup" class="screen">
      <h2 class="mb-2">Game Setup</h2>
      
      <div class="form-section">
        <label class="form-label">
          Player Names
          <span class="player-count-badge" id="player-count-badge">0 players</span>
        </label>
        <textarea 
          id="players-textarea" 
          class="textarea" 
          placeholder="Enter one name per line:&#10;Alice&#10;Bob&#10;Charlie&#10;Diana"
          oninput="updatePlayerCount()"
        ></textarea>
        <p class="form-hint">Enter each player's name on a new line. The order determines who reveals first and the discussion order. Minimum 3 players required.</p>
      </div>

      <div class="form-section">
        <label class="form-label">Number of Imposters</label>
        <div class="options-row" id="imposter-options">
          <button class="option-btn selected" data-imposters="1" onclick="selectImposters(1)">1</button>
        </div>
        <p class="form-hint" id="imposter-hint">Add more players to unlock additional imposter options.</p>
      </div>

      <div class="form-section">
        <label class="form-label">Category</label>
        <div class="category-pills" id="category-pills"></div>
      </div>

      <div class="spacer"></div>
      
      <button class="btn btn-primary btn-lg" onclick="startGame()" id="btn-start" disabled>Start Game</button>
      <div class="spacer-md"></div>
      <button class="btn btn-ghost" onclick="showScreen('home')">â† Cancel</button>
    </div>

    <!-- Screen: Role Reveal - Pass Device -->
    <div id="screen-pass" class="screen">
      <button class="close-btn" onclick="showCancelConfirm('pass')">âœ•</button>
      <div id="cancel-confirm-pass" class="cancel-confirm">
        <p>Cancel game and return to setup? Roles and word will be reset.</p>
        <div class="cancel-confirm-btns">
          <button class="btn btn-sm btn-secondary" onclick="hideCancelConfirm('pass')">Keep Playing</button>
          <button class="btn btn-sm btn-danger" onclick="cancelGame()">Cancel Game</button>
        </div>
      </div>
      
      <div class="progress-dots" id="progress-dots"></div>
      <div class="pass-device">
        <div class="pass-icon">ğŸ“±</div>
        <p class="text-muted">Pass the device to</p>
        <div class="pass-device-name" id="pass-player-name">Player Name</div>
        <p class="text-muted mb-3">Hold so others can't see the screen</p>
        <button class="btn btn-primary btn-lg" onclick="showRoleScreen()">Ready</button>
      </div>
    </div>

    <!-- Screen: Role Reveal - Hold to Show -->
    <div id="screen-role" class="screen">
      <button class="close-btn" onclick="showCancelConfirm('role')">âœ•</button>
      <div id="cancel-confirm-role" class="cancel-confirm">
        <p>Cancel game and return to setup? Roles and word will be reset.</p>
        <div class="cancel-confirm-btns">
          <button class="btn btn-sm btn-secondary" onclick="hideCancelConfirm('role')">Keep Playing</button>
          <button class="btn btn-sm btn-danger" onclick="cancelGame()">Cancel Game</button>
        </div>
      </div>
      
      <div class="progress-dots" id="progress-dots-role"></div>
      <div class="role-container">
        <p class="role-player-name" id="role-player-label">Player Name</p>
        
        <!-- Hold wrapper - stays visible, content inside toggles -->
        <div id="hold-reveal-wrapper" class="hold-reveal-wrapper">
          <!-- Prompt shown when not holding -->
          <div class="hold-prompt">
            <div class="hold-icon">ğŸ‘†</div>
            <h3>Hold to Reveal</h3>
            <p class="text-muted">Press and hold to see your role.<br>Release to hide.</p>
          </div>
          
          <!-- Role content shown when holding -->
          <div class="role-content">
            <p class="text-muted">You are a</p>
            <div class="role-badge" id="role-badge">CIVILIAN</div>
            <div id="role-word-container">
              <p>The secret word is:</p>
              <div class="secret-word small" id="role-word">WORD</div>
              <p class="hint-text">This word has multiple meanings</p>
            </div>
            <div id="role-imposter-container" style="display: none;">
              <p class="mb-2">You <strong>do NOT</strong> know the word.</p>
              <p>Listen carefully and try to blend in.</p>
              <p class="hint-text" id="role-category-hint">It's a heteronym</p>
            </div>
          </div>
        </div>
      </div>
      <div class="mt-auto">
        <button class="btn btn-secondary btn-lg" onclick="nextPlayer()" id="btn-next-player">Done â€” Next Player</button>
      </div>
    </div>

    <!-- Screen: All Roles Revealed - Discussion Instructions -->
    <div id="screen-discussion" class="screen">
      <div class="spacer"></div>
      <div class="text-center">
        <h2 class="mb-2">Time to Discuss</h2>
        <p class="text-muted mb-2">Put the device aside</p>
      </div>
      
      <div class="rules-box">
        <ol>
          <li><strong>Go around the group in order.</strong> Each player says something short that indicates they know what the word is. Imposters have to fit in. You must not say the word.</li>
          <li>After <strong>two or three rounds</strong>, discuss who you think the imposter is and as a group, make a decision.</li>
          <li>Return to the app to confirm.</li>
        </ol>
      </div>

      <p class="text-center text-muted">Starting with: <strong id="starting-player">First Player</strong></p>
      
      <div class="spacer"></div>
      <button class="btn btn-primary btn-lg" onclick="showConfirmation()">We've Decided â€” Reveal Imposter</button>
    </div>

    <!-- Screen: Confirmation - Who did you choose? -->
    <div id="screen-confirm" class="screen">
      <h2 class="mb-2">Who Did You Choose?</h2>
      <p class="text-muted mb-2" id="confirm-instruction">Select who the group decided is the imposter:</p>
      
      <div class="selection-counter" id="selection-counter">Select 1 player</div>
      
      <div id="confirm-options" class="mb-3"></div>
      
      <div class="spacer"></div>
      <button class="btn btn-primary btn-lg" onclick="revealResults()" id="btn-reveal" disabled>Reveal the Truth</button>
    </div>

    <!-- Screen: Results -->
    <div id="screen-results" class="screen">
      <div class="spacer"></div>
      
      <div class="text-center">
        <p class="text-muted" id="result-label">You chose...</p>
        <div id="result-chosen-names"></div>
      </div>
      
      <div class="result-reveal" id="result-reveal">
        <p id="result-verdict">They were...</p>
        <div id="result-roles"></div>
      </div>

      <div class="winner-announcement" id="winner-announcement">
        <div class="winner-icon" id="winner-icon">ğŸ‰</div>
        <div class="winner-text" id="winner-text">Civilians Win</div>
      </div>

      <div id="actual-imposters-section" style="display: none;">
        <p class="text-center text-muted mb-1">The actual imposter(s):</p>
        <div class="imposter-list" id="actual-imposters-list"></div>
      </div>
      
      <div class="spacer"></div>
      <button class="btn btn-primary btn-lg" onclick="showSummary()">See Game Summary</button>
    </div>

    <!-- Screen: Summary -->
    <div id="screen-summary" class="screen">
      <h2 class="mb-2">Game Summary</h2>
      
      <div class="card mb-2">
        <p class="text-muted">The secret word was:</p>
        <div class="secret-word" id="summary-word">WORD</div>
        <div class="meanings-list" id="summary-meanings"></div>
      </div>

      <div id="summary-all-words" style="display: none;" class="card mb-2">
        <h3 class="mb-1">All Words Assigned:</h3>
        <div class="all-words-list" id="all-words-list"></div>
      </div>

      <div id="twist-reveal" class="twist-box" style="display: none;">
        <h3>ğŸŒ€ Plot Twist</h3>
        <p id="twist-text">Twist description here</p>
      </div>

      <div class="spacer"></div>
      <button class="btn btn-primary btn-lg" onclick="playAgain()">Play Again</button>
      <div class="spacer-md"></div>
      <button class="btn btn-secondary" onclick="newPlayers()">New Players</button>
    </div>
  </div>

  <!-- Debug Panel -->
  <div id="debug-panel" class="debug-panel">
    <h4>ğŸ”§ Debug Mode (qwe)</h4>
    <div class="debug-modes">
      <button class="debug-mode-btn active" data-mode="RANDOM" onclick="setDebugMode('RANDOM')">Random</button>
      <button class="debug-mode-btn" data-mode="NORMAL" onclick="setDebugMode('NORMAL')">Normal</button>
      <button class="debug-mode-btn" data-mode="ALL_IMPOSTERS" onclick="setDebugMode('ALL_IMPOSTERS')">All Imposters</button>
      <button class="debug-mode-btn" data-mode="ALL_DIFFERENT" onclick="setDebugMode('ALL_DIFFERENT')">All Different</button>
      <button class="debug-mode-btn" data-mode="NO_IMPOSTER" onclick="setDebugMode('NO_IMPOSTER')">No Imposter</button>
    </div>
  </div>

  <script>
    'use strict';

    // ==================== HETERONYM DATABASE ====================
    const HETERONYMS = [
      { word: "absent", meanings: [{ pronunciation: "/ËˆÃ¦bsÉ™nt/", definition: "not present (adj)" }, { pronunciation: "/Ã¦bËˆsÉ›nt/", definition: "to keep away (verb)" }] },
      { word: "abstract", meanings: [{ pronunciation: "/ËˆÃ¦bstrÃ¦kt/", definition: "summary; not concrete (n/adj)" }, { pronunciation: "/Ã¦bËˆstrÃ¦kt/", definition: "to remove (verb)" }] },
      { word: "accent", meanings: [{ pronunciation: "/ËˆÃ¦ksÉ›nt/", definition: "way of speaking (noun)" }, { pronunciation: "/Ã¦kËˆsÉ›nt/", definition: "to emphasize (verb)" }] },
      { word: "address", meanings: [{ pronunciation: "/ËˆÃ¦drÉ›s/", definition: "location (noun)" }, { pronunciation: "/É™ËˆdrÉ›s/", definition: "to speak to (verb)" }] },
      { word: "affect", meanings: [{ pronunciation: "/ËˆÃ¦fÉ›kt/", definition: "emotion; feeling (noun)" }, { pronunciation: "/É™ËˆfÉ›kt/", definition: "to influence (verb)" }] },
      { word: "aged", meanings: [{ pronunciation: "/eÉªdÊ’d/", definition: "grew older (past verb)" }, { pronunciation: "/ËˆeÉªdÊ’Éªd/", definition: "old (adj)" }] },
      { word: "aggregate", meanings: [{ pronunciation: "/ËˆÃ¦É¡rÉªÉ¡É™t/", definition: "gravel (noun)" }, { pronunciation: "/ËˆÃ¦É¡rÉªÉ¡eÉªt/", definition: "to combine (verb)" }] },
      { word: "alternate", meanings: [{ pronunciation: "/ËˆÉ”ËltÉ™rnÉ™t/", definition: "substitute (noun/adj)" }, { pronunciation: "/ËˆÉ”ËltÉ™rneÉªt/", definition: "to take turns (verb)" }] },
      { word: "analyses", meanings: [{ pronunciation: "/É™ËˆnÃ¦lÉªsiËz/", definition: "examinations (noun)" }, { pronunciation: "/ËˆÃ¦nÉ™laÉªzÉªz/", definition: "examines (verb)" }] },
      { word: "animate", meanings: [{ pronunciation: "/ËˆÃ¦nÉªmÉ™t/", definition: "living (adj)" }, { pronunciation: "/ËˆÃ¦nÉªmeÉªt/", definition: "to give life to (v)" }] },
      { word: "appropriate", meanings: [{ pronunciation: "/É™ËˆproÊŠpriÉ™t/", definition: "suitable (adj)" }, { pronunciation: "/É™ËˆproÊŠprieÉªt/", definition: "to take for oneself (v)" }] },
      { word: "approximate", meanings: [{ pronunciation: "/É™ËˆprÉ’ksÉªmÉ™t/", definition: "nearly correct (adj)" }, { pronunciation: "/É™ËˆprÉ’ksÉªmeÉªt/", definition: "to come close (v)" }] },
      { word: "associate", meanings: [{ pronunciation: "/É™ËˆsoÊŠÊƒiÉ™t/", definition: "colleague (noun)" }, { pronunciation: "/É™ËˆsoÊŠÊƒieÉªt/", definition: "to connect (verb)" }] },
      { word: "attribute", meanings: [{ pronunciation: "/ËˆÃ¦trÉªbjuËt/", definition: "characteristic (noun)" }, { pronunciation: "/É™ËˆtrÉªbjuËt/", definition: "to assign (verb)" }] },
      { word: "august", meanings: [{ pronunciation: "/É”ËËˆÉ¡ÊŒst/", definition: "dignified, majestic" }, { pronunciation: "/ËˆÉ”ËÉ¡É™st/", definition: "eighth month" }] },
      { word: "axes", meanings: [{ pronunciation: "/ËˆÃ¦ksÉªz/", definition: "cutting tools" }, { pronunciation: "/ËˆÃ¦ksiËz/", definition: "reference lines" }] },
      { word: "bass", meanings: [{ pronunciation: "/beÉªs/", definition: "low-pitched sound/instrument" }, { pronunciation: "/bÃ¦s/", definition: "a type of fish" }] },
      { word: "baton", meanings: [{ pronunciation: "/bÉ™ËˆtÉ’n/", definition: "conductor's stick" }, { pronunciation: "/ËˆbÃ¦tÉ™n/", definition: "truncheon (AmE)" }] },
      { word: "bolt", meanings: [{ pronunciation: "/boÊŠlt/", definition: "to secure firmly" }, { pronunciation: "/boÊŠlt/", definition: "to run away quickly" }] },
      { word: "bow", meanings: [{ pronunciation: "/boÊŠ/", definition: "weapon for shooting arrows; ribbon knot" }, { pronunciation: "/baÊŠ/", definition: "to bend forward; front of a ship" }] },
      { word: "bowed", meanings: [{ pronunciation: "/boÊŠd/", definition: "curved; bent" }, { pronunciation: "/baÊŠd/", definition: "bent forward in respect" }] },
      { word: "breakdown", meanings: [{ pronunciation: "/ËˆbreÉªkdaÊŠn/", definition: "failure" }, { pronunciation: "/breÉªkËˆdaÊŠn/", definition: "to analyze" }] },
      { word: "buckle", meanings: [{ pronunciation: "/ËˆbÊŒkÉ™l/", definition: "to fasten" }, { pronunciation: "/ËˆbÊŒkÉ™l/", definition: "to collapse" }] },
      { word: "buffed", meanings: [{ pronunciation: "/bÊŒft/", definition: "polished" }, { pronunciation: "/bÊŠft/", definition: "hit repeatedly" }] },
      { word: "buffet", meanings: [{ pronunciation: "/bÊŠËˆfeÉª/", definition: "self-service meal" }, { pronunciation: "/ËˆbÊŒfÉªt/", definition: "to strike repeatedly" }] },
      { word: "bury", meanings: [{ pronunciation: "/ËˆbÉ›ri/", definition: "town in England" }, { pronunciation: "/ËˆbÊŒri/", definition: "to inter (verb)" }] },
      { word: "chap", meanings: [{ pronunciation: "/tÊƒÃ¦p/", definition: "fellow (informal)" }, { pronunciation: "/tÊƒÉ’p/", definition: "to crack skin" }] },
      { word: "cleave", meanings: [{ pronunciation: "/kliËv/", definition: "to split apart" }, { pronunciation: "/kliËv/", definition: "to cling to" }] },
      { word: "clip", meanings: [{ pronunciation: "/klÉªp/", definition: "to fasten together" }, { pronunciation: "/klÉªp/", definition: "to cut off" }] },
      { word: "clod", meanings: [{ pronunciation: "/klÉ’d/", definition: "lump of earth" }, { pronunciation: "/kloÊŠd/", definition: "stupid person (rare)" }] },
      { word: "close", meanings: [{ pronunciation: "/kloÊŠz/", definition: "to shut" }, { pronunciation: "/kloÊŠs/", definition: "nearby" }] },
      { word: "coax", meanings: [{ pronunciation: "/koÊŠks/", definition: "to persuade gently" }, { pronunciation: "/ËˆkoÊŠÃ¦ks/", definition: "coaxial cable (slang)" }] },
      { word: "cob", meanings: [{ pronunciation: "/kÉ’b/", definition: "corn cob" }, { pronunciation: "/koÊŠb/", definition: "male swan" }] },
      { word: "combine", meanings: [{ pronunciation: "/ËˆkÉ’mbaÉªn/", definition: "harvesting machine (n)" }, { pronunciation: "/kÉ™mËˆbaÉªn/", definition: "to join together (verb)" }] },
      { word: "commune", meanings: [{ pronunciation: "/ËˆkÉ’mjuËn/", definition: "community (noun)" }, { pronunciation: "/kÉ™ËˆmjuËn/", definition: "to communicate (verb)" }] },
      { word: "compact", meanings: [{ pronunciation: "/ËˆkÉ’mpÃ¦kt/", definition: "small case; agreement (n)" }, { pronunciation: "/kÉ™mËˆpÃ¦kt/", definition: "to compress (verb)" }] },
      { word: "complex", meanings: [{ pronunciation: "/ËˆkÉ’mplÉ›ks/", definition: "building group (noun)" }, { pronunciation: "/kÉ™mËˆplÉ›ks/", definition: "complicated (adj)" }] },
      { word: "compound", meanings: [{ pronunciation: "/ËˆkÉ’mpaÊŠnd/", definition: "mixture; enclosure (n)" }, { pronunciation: "/kÉ™mËˆpaÊŠnd/", definition: "to make worse (verb)" }] },
      { word: "compress", meanings: [{ pronunciation: "/ËˆkÉ’mprÉ›s/", definition: "bandage (noun)" }, { pronunciation: "/kÉ™mËˆprÉ›s/", definition: "to squeeze (verb)" }] },
      { word: "concert", meanings: [{ pronunciation: "/ËˆkÉ’nsÉ™rt/", definition: "musical performance (n)" }, { pronunciation: "/kÉ™nËˆsÉœËrt/", definition: "to plan together (verb)" }] },
      { word: "concrete", meanings: [{ pronunciation: "/ËˆkÉ’nkriËt/", definition: "building material (n)" }, { pronunciation: "/kÉ’nËˆkriËt/", definition: "to solidify (verb)" }] },
      { word: "conduct", meanings: [{ pronunciation: "/ËˆkÉ’ndÊŒkt/", definition: "behavior (noun)" }, { pronunciation: "/kÉ™nËˆdÊŒkt/", definition: "to lead (verb)" }] },
      { word: "confines", meanings: [{ pronunciation: "/ËˆkÉ’nfaÉªnz/", definition: "boundaries (noun)" }, { pronunciation: "/kÉ™nËˆfaÉªnz/", definition: "restricts (verb)" }] },
      { word: "conflict", meanings: [{ pronunciation: "/ËˆkÉ’nflÉªkt/", definition: "disagreement (noun)" }, { pronunciation: "/kÉ™nËˆflÉªkt/", definition: "to clash (verb)" }] },
      { word: "conglomerate", meanings: [{ pronunciation: "/kÉ™nËˆÉ¡lÉ’mÉ™rÉ™t/", definition: "corporation (noun)" }, { pronunciation: "/kÉ™nËˆÉ¡lÉ’mÉ™reÉªt/", definition: "to gather (verb)" }] },
      { word: "conjugate", meanings: [{ pronunciation: "/ËˆkÉ’ndÊ’ÊŠÉ¡É™t/", definition: "pair (noun)" }, { pronunciation: "/ËˆkÉ’ndÊ’ÊŠÉ¡eÉªt/", definition: "to inflect (verb)" }] },
      { word: "console", meanings: [{ pronunciation: "/kÉ™nËˆsoÊŠl/", definition: "to comfort someone" }, { pronunciation: "/ËˆkÉ’nsoÊŠl/", definition: "control panel; gaming device" }] },
      { word: "consummate", meanings: [{ pronunciation: "/ËˆkÉ’nsÉ™mÉ™t/", definition: "perfect (adj)" }, { pronunciation: "/ËˆkÉ’nsÉ™meÉªt/", definition: "to complete (verb)" }] },
      { word: "content", meanings: [{ pronunciation: "/ËˆkÉ’ntÉ›nt/", definition: "what is contained" }, { pronunciation: "/kÉ™nËˆtÉ›nt/", definition: "satisfied, happy" }] },
      { word: "contest", meanings: [{ pronunciation: "/ËˆkÉ’ntÉ›st/", definition: "competition (noun)" }, { pronunciation: "/kÉ™nËˆtÉ›st/", definition: "to challenge (verb)" }] },
      { word: "contract", meanings: [{ pronunciation: "/ËˆkÉ’ntrÃ¦kt/", definition: "agreement (noun)" }, { pronunciation: "/kÉ™nËˆtrÃ¦kt/", definition: "to shrink; to acquire (v)" }] },
      { word: "converse", meanings: [{ pronunciation: "/ËˆkÉ’nvÉœËrs/", definition: "opposite (noun/adj)" }, { pronunciation: "/kÉ™nËˆvÉœËrs/", definition: "to talk (verb)" }] },
      { word: "convert", meanings: [{ pronunciation: "/ËˆkÉ’nvÉœËrt/", definition: "one who converted (n)" }, { pronunciation: "/kÉ™nËˆvÉœËrt/", definition: "to change (verb)" }] },
      { word: "convict", meanings: [{ pronunciation: "/ËˆkÉ’nvÉªkt/", definition: "prisoner (noun)" }, { pronunciation: "/kÉ™nËˆvÉªkt/", definition: "to find guilty (verb)" }] },
      { word: "coordinate", meanings: [{ pronunciation: "/koÊŠËˆÉ”ËrdÉªnÉ™t/", definition: "one of a set (noun)" }, { pronunciation: "/koÊŠËˆÉ”ËrdÉªneÉªt/", definition: "to organize (verb)" }] },
      { word: "corps", meanings: [{ pronunciation: "/kÉ”Ër/", definition: "military unit" }, { pronunciation: "/kÉ”Ërz/", definition: "plural: groups" }] },
      { word: "defect", meanings: [{ pronunciation: "/ËˆdiËfÉ›kt/", definition: "flaw (noun)" }, { pronunciation: "/dÉªËˆfÉ›kt/", definition: "to abandon (verb)" }] },
      { word: "degenerate", meanings: [{ pronunciation: "/dÉªËˆdÊ’É›nÉ™rÉ™t/", definition: "immoral person (n)" }, { pronunciation: "/dÉªËˆdÊ’É›nÉ™reÉªt/", definition: "to decline (verb)" }] },
      { word: "delegate", meanings: [{ pronunciation: "/ËˆdÉ›lÉªÉ¡É™t/", definition: "representative (noun)" }, { pronunciation: "/ËˆdÉ›lÉªÉ¡eÉªt/", definition: "to assign (verb)" }] },
      { word: "deliberate", meanings: [{ pronunciation: "/dÉªËˆlÉªbÉ™rÉ™t/", definition: "intentional (adj)" }, { pronunciation: "/dÉªËˆlÉªbÉ™reÉªt/", definition: "to consider (verb)" }] },
      { word: "derby", meanings: [{ pronunciation: "/ËˆdÉ‘Ërbi/", definition: "horse race" }, { pronunciation: "/ËˆdÉœËrbi/", definition: "city in England" }] },
      { word: "desert", meanings: [{ pronunciation: "/ËˆdÉ›zÉ™rt/", definition: "arid sandy region" }, { pronunciation: "/dÉªËˆzÉœËrt/", definition: "to abandon" }] },
      { word: "desolate", meanings: [{ pronunciation: "/ËˆdÉ›sÉ™lÉ™t/", definition: "barren (adj)" }, { pronunciation: "/ËˆdÉ›sÉ™leÉªt/", definition: "to devastate (v)" }] },
      { word: "diffuse", meanings: [{ pronunciation: "/dÉªËˆfjuËz/", definition: "to spread (verb)" }, { pronunciation: "/dÉªËˆfjuËs/", definition: "scattered (adj)" }] },
      { word: "digest", meanings: [{ pronunciation: "/ËˆdaÉªdÊ’É›st/", definition: "summary (noun)" }, { pronunciation: "/daÉªËˆdÊ’É›st/", definition: "to process food (verb)" }] },
      { word: "discard", meanings: [{ pronunciation: "/ËˆdÉªskÉ‘Ërd/", definition: "rejected item (noun)" }, { pronunciation: "/dÉªsËˆkÉ‘Ërd/", definition: "to throw away (verb)" }] },
      { word: "discount", meanings: [{ pronunciation: "/ËˆdÉªskaÊŠnt/", definition: "reduction (noun)" }, { pronunciation: "/dÉªsËˆkaÊŠnt/", definition: "to reduce; dismiss (v)" }] },
      { word: "do", meanings: [{ pronunciation: "/duË/", definition: "to perform (verb)" }, { pronunciation: "/doÊŠ/", definition: "first note (music)" }] },
      { word: "does", meanings: [{ pronunciation: "/dÊŒz/", definition: "performs (verb)" }, { pronunciation: "/doÊŠz/", definition: "plural of doe (female deer)" }] },
      { word: "dogged", meanings: [{ pronunciation: "/ËˆdÉ”ËÉ¡Éªd/", definition: "persistent (adj)" }, { pronunciation: "/dÉ”ËÉ¡d/", definition: "followed (past of dog)" }] },
      { word: "dove", meanings: [{ pronunciation: "/dÊŒv/", definition: "a bird (symbol of peace)" }, { pronunciation: "/doÊŠv/", definition: "past tense of dive (AmE)" }] },
      { word: "drawer", meanings: [{ pronunciation: "/drÉ”Ër/", definition: "sliding storage compartment" }, { pronunciation: "/ËˆdrÉ”ËÉ™r/", definition: "one who draws" }] },
      { word: "duplicate", meanings: [{ pronunciation: "/ËˆdjuËplÉªkÉ™t/", definition: "copy (noun)" }, { pronunciation: "/ËˆdjuËplÉªkeÉªt/", definition: "to copy (verb)" }] },
      { word: "dust", meanings: [{ pronunciation: "/dÊŒst/", definition: "to remove particles" }, { pronunciation: "/dÊŒst/", definition: "to add particles" }] },
      { word: "elaborate", meanings: [{ pronunciation: "/ÉªËˆlÃ¦bÉ™rÉ™t/", definition: "detailed (adj)" }, { pronunciation: "/ÉªËˆlÃ¦bÉ™reÉªt/", definition: "to explain in detail (v)" }] },
      { word: "entrance", meanings: [{ pronunciation: "/ËˆÉ›ntrÉ™ns/", definition: "a doorway; way in" }, { pronunciation: "/ÉªnËˆtrÃ¦ns/", definition: "to fill with wonder" }] },
      { word: "escort", meanings: [{ pronunciation: "/ËˆÉ›skÉ”Ërt/", definition: "companion (noun)" }, { pronunciation: "/ÉªËˆskÉ”Ërt/", definition: "to accompany (verb)" }] },
      { word: "excise", meanings: [{ pronunciation: "/ËˆÉ›ksaÉªz/", definition: "tax (noun)" }, { pronunciation: "/ÉªkËˆsaÉªz/", definition: "to cut out (verb)" }] },
      { word: "excuse", meanings: [{ pronunciation: "/ÉªkËˆskjuËs/", definition: "reason (noun)" }, { pronunciation: "/ÉªkËˆskjuËz/", definition: "to forgive (verb)" }] },
      { word: "expatriate", meanings: [{ pronunciation: "/É›ksËˆpÃ¦triÉ™t/", definition: "emigrant (noun)" }, { pronunciation: "/É›ksËˆpÃ¦trieÉªt/", definition: "to banish (verb)" }] },
      { word: "exploit", meanings: [{ pronunciation: "/ËˆÉ›ksplÉ”Éªt/", definition: "feat (noun)" }, { pronunciation: "/ÉªkËˆsplÉ”Éªt/", definition: "to take advantage (verb)" }] },
      { word: "extract", meanings: [{ pronunciation: "/ËˆÉ›kstrÃ¦kt/", definition: "concentrate (noun)" }, { pronunciation: "/ÉªkËˆstrÃ¦kt/", definition: "to remove (verb)" }] },
      { word: "fallout", meanings: [{ pronunciation: "/ËˆfÉ”ËlaÊŠt/", definition: "radioactive particles; consequence" }, { pronunciation: "/fÉ”ËlËˆaÊŠt/", definition: "to quarrel" }] },
      { word: "fast", meanings: [{ pronunciation: "/fÃ¦st/", definition: "quick (adj)" }, { pronunciation: "/fÃ¦st/", definition: "firmly fixed (adj)" }] },
      { word: "ferment", meanings: [{ pronunciation: "/ËˆfÉœËrmÉ›nt/", definition: "yeast agent (noun)" }, { pronunciation: "/fÉ™rËˆmÉ›nt/", definition: "to undergo change (v)" }] },
      { word: "frequent", meanings: [{ pronunciation: "/ËˆfriËkwÉ™nt/", definition: "common (adj)" }, { pronunciation: "/friËËˆkwÉ›nt/", definition: "to visit often (verb)" }] },
      { word: "gore", meanings: [{ pronunciation: "/É¡É”Ër/", definition: "blood; to pierce" }, { pronunciation: "/É¡É”ËreÉª/", definition: "triangular insert" }] },
      { word: "grave", meanings: [{ pronunciation: "/É¡reÉªv/", definition: "burial site; serious" }, { pronunciation: "/ËˆÉ¡rÉ‘ËveÉª/", definition: "slow tempo (music)" }] },
      { word: "ham", meanings: [{ pronunciation: "/hÃ¦m/", definition: "pork leg" }, { pronunciation: "/hÉ‘Ëm/", definition: "unskilled" }] },
      { word: "haze", meanings: [{ pronunciation: "/heÉªz/", definition: "mist" }, { pronunciation: "/hÉ‘Ëz/", definition: "to bully" }] },
      { word: "hose", meanings: [{ pronunciation: "/hoÊŠz/", definition: "tube; stockings" }, { pronunciation: "/hoÊŠs/", definition: "plural of ho" }] },
      { word: "house", meanings: [{ pronunciation: "/haÊŠs/", definition: "dwelling (noun)" }, { pronunciation: "/haÊŠz/", definition: "to provide shelter (verb)" }] },
      { word: "implant", meanings: [{ pronunciation: "/ËˆÉªmplÉ‘Ënt/", definition: "inserted device (noun)" }, { pronunciation: "/ÉªmËˆplÉ‘Ënt/", definition: "to insert (verb)" }] },
      { word: "impress", meanings: [{ pronunciation: "/ËˆÉªmprÉ›s/", definition: "mark made (noun)" }, { pronunciation: "/ÉªmËˆprÉ›s/", definition: "to affect strongly (verb)" }] },
      { word: "incense", meanings: [{ pronunciation: "/ËˆÉªnsÉ›ns/", definition: "aromatic substance burned" }, { pronunciation: "/ÉªnËˆsÉ›ns/", definition: "to make very angry" }] },
      { word: "indent", meanings: [{ pronunciation: "/ËˆÉªndÉ›nt/", definition: "notch (noun)" }, { pronunciation: "/ÉªnËˆdÉ›nt/", definition: "to set in from margin (v)" }] },
      { word: "intermediate", meanings: [{ pronunciation: "/ËŒÉªntÉ™rËˆmiËdiÉ™t/", definition: "in between (adj)" }, { pronunciation: "/ËŒÉªntÉ™rËˆmiËdieÉªt/", definition: "to mediate (v)" }] },
      { word: "intern", meanings: [{ pronunciation: "/ËˆÉªntÉœËrn/", definition: "trainee (noun)" }, { pronunciation: "/ÉªnËˆtÉœËrn/", definition: "to confine (verb)" }] },
      { word: "intimate", meanings: [{ pronunciation: "/ËˆÉªntÉªmÉ™t/", definition: "close friend; close (noun/adj)" }, { pronunciation: "/ËˆÉªntÉªmeÉªt/", definition: "to suggest; to hint (verb)" }] },
      { word: "invalid", meanings: [{ pronunciation: "/ËˆÉªnvÉ™lÉªd/", definition: "a sick or disabled person" }, { pronunciation: "/ÉªnËˆvÃ¦lÉªd/", definition: "not valid" }] },
      { word: "jagged", meanings: [{ pronunciation: "/ËˆdÊ’Ã¦É¡Éªd/", definition: "having rough edges (adj)" }, { pronunciation: "/dÊ’Ã¦É¡d/", definition: "past tense of jag (verb)" }] },
      { word: "job", meanings: [{ pronunciation: "/dÊ’É’b/", definition: "employment; task" }, { pronunciation: "/dÊ’oÊŠb/", definition: "biblical figure" }] },
      { word: "knockout", meanings: [{ pronunciation: "/ËˆnÉ’kaÊŠt/", definition: "stunning blow; stunning person" }, { pronunciation: "/nÉ’kËˆaÊŠt/", definition: "to render unconscious" }] },
      { word: "lead", meanings: [{ pronunciation: "/liËd/", definition: "to guide or direct" }, { pronunciation: "/lÉ›d/", definition: "a heavy metal (Pb)" }] },
      { word: "learned", meanings: [{ pronunciation: "/lÉœËrnd/", definition: "acquired knowledge (past)" }, { pronunciation: "/ËˆlÉœËrnÉªd/", definition: "scholarly (adj)" }] },
      { word: "left", meanings: [{ pronunciation: "/lÉ›ft/", definition: "departed (past)" }, { pronunciation: "/lÉ›ft/", definition: "remaining (adj)" }] },
      { word: "legged", meanings: [{ pronunciation: "/lÉ›É¡d/", definition: "ran (past of leg)" }, { pronunciation: "/ËˆlÉ›É¡Éªd/", definition: "having legs (adj)" }] },
      { word: "lied", meanings: [{ pronunciation: "/laÉªd/", definition: "told falsehood (past)" }, { pronunciation: "/liËd/", definition: "German art song" }] },
      { word: "lima", meanings: [{ pronunciation: "/ËˆlaÉªmÉ™/", definition: "a type of bean" }, { pronunciation: "/ËˆliËmÉ™/", definition: "capital of Peru" }] },
      { word: "live", meanings: [{ pronunciation: "/lÉªv/", definition: "to be alive; reside" }, { pronunciation: "/laÉªv/", definition: "happening in real-time" }] },
      { word: "liver", meanings: [{ pronunciation: "/ËˆlÉªvÉ™r/", definition: "organ in body" }, { pronunciation: "/ËˆlaÉªvÉ™r/", definition: "one who lives" }] },
      { word: "loon", meanings: [{ pronunciation: "/luËn/", definition: "water bird" }, { pronunciation: "/luËn/", definition: "crazy person" }] },
      { word: "lower", meanings: [{ pronunciation: "/ËˆloÊŠÉ™r/", definition: "to move down" }, { pronunciation: "/ËˆlaÊŠÉ™r/", definition: "to frown; look threatening" }] },
      { word: "lunged", meanings: [{ pronunciation: "/lÊŒndÊ’d/", definition: "thrust forward" }, { pronunciation: "/lÊŒÅ‹d/", definition: "having lungs" }] },
      { word: "mace", meanings: [{ pronunciation: "/meÉªs/", definition: "spice; weapon" }, { pronunciation: "/meÉªs/", definition: "spray weapon" }] },
      { word: "macle", meanings: [{ pronunciation: "/ËˆmeÉªkÉ™l/", definition: "twin crystal" }, { pronunciation: "/ËˆmÃ¦kÉ™l/", definition: "printing defect" }] },
      { word: "makeup", meanings: [{ pronunciation: "/ËˆmeÉªkÊŒp/", definition: "cosmetics" }, { pronunciation: "/meÉªkËˆÊŒp/", definition: "to reconcile" }] },
      { word: "mall", meanings: [{ pronunciation: "/mÉ”Ël/", definition: "shopping center" }, { pronunciation: "/mÃ¦l/", definition: "shaded walk" }] },
      { word: "mare", meanings: [{ pronunciation: "/mÉ›É™r/", definition: "female horse" }, { pronunciation: "/ËˆmÉ‘ËreÉª/", definition: "lunar sea" }] },
      { word: "matte", meanings: [{ pronunciation: "/mÃ¦t/", definition: "dull finish" }, { pronunciation: "/mÉ‘Ët/", definition: "metal smelting" }] },
      { word: "micrometer", meanings: [{ pronunciation: "/maÉªËˆkrÉ’mÉªtÉ™r/", definition: "measuring device" }, { pronunciation: "/ËˆmaÉªkroÊŠËŒmiËtÉ™r/", definition: "one-millionth meter" }] },
      { word: "minute", meanings: [{ pronunciation: "/ËˆmÉªnÉªt/", definition: "60 seconds" }, { pronunciation: "/maÉªËˆnjuËt/", definition: "extremely small" }] },
      { word: "mobile", meanings: [{ pronunciation: "/ËˆmoÊŠbaÉªl/", definition: "able to move" }, { pronunciation: "/moÊŠËˆbiËl/", definition: "city in Alabama" }] },
      { word: "mode", meanings: [{ pronunciation: "/moÊŠd/", definition: "method; fashion" }, { pronunciation: "/mÉ”Ëd/", definition: "musical scale" }] },
      { word: "moderate", meanings: [{ pronunciation: "/ËˆmÉ’dÉ™rÉ™t/", definition: "medium; person of moderate views (adj/n)" }, { pronunciation: "/ËˆmÉ’dÉ™reÉªt/", definition: "to preside; to chair (verb)" }] },
      { word: "mole", meanings: [{ pronunciation: "/moÊŠl/", definition: "animal; spot" }, { pronunciation: "/ËˆmoÊŠleÉª/", definition: "Mexican sauce" }] },
      { word: "moped", meanings: [{ pronunciation: "/ËˆmoÊŠpÉ›d/", definition: "a small motorbike" }, { pronunciation: "/moÊŠpt/", definition: "was gloomy (past of mope)" }] },
      { word: "nave", meanings: [{ pronunciation: "/neÉªv/", definition: "church center" }, { pronunciation: "/nÉ‘Ëv/", definition: "wheel hub" }] },
      { word: "nice", meanings: [{ pronunciation: "/naÉªs/", definition: "pleasant" }, { pronunciation: "/niËs/", definition: "city in France" }] },
      { word: "number", meanings: [{ pronunciation: "/ËˆnÊŒmbÉ™r/", definition: "a numeral" }, { pronunciation: "/ËˆnÊŒmÉ™r/", definition: "more numb" }] },
      { word: "object", meanings: [{ pronunciation: "/ËˆÉ’bdÊ’Éªkt/", definition: "thing (noun)" }, { pronunciation: "/É™bËˆdÊ’É›kt/", definition: "to protest (verb)" }] },
      { word: "orthographic", meanings: [{ pronunciation: "/ËŒÉ”ËrÎ¸É™ËˆÉ¡rÃ¦fÉªk/", definition: "spelling-related" }, { pronunciation: "/ËŒÉ”ËrÎ¸oÊŠËˆÉ¡rÃ¦fÉªk/", definition: "right-angled projection" }] },
      { word: "overrun", meanings: [{ pronunciation: "/ËˆoÊŠvÉ™rrÊŒn/", definition: "excess (noun)" }, { pronunciation: "/ËŒoÊŠvÉ™rËˆrÊŒn/", definition: "to invade (verb)" }] },
      { word: "oversight", meanings: [{ pronunciation: "/ËˆoÊŠvÉ™rsaÉªt/", definition: "supervision" }, { pronunciation: "/ËˆoÊŠvÉ™rsaÉªt/", definition: "error; omission" }] },
      { word: "pace", meanings: [{ pronunciation: "/peÉªs/", definition: "speed; step" }, { pronunciation: "/ËˆpÉ‘ËtÊƒeÉª/", definition: "with respect to (Latin)" }] },
      { word: "palled", meanings: [{ pronunciation: "/pÉ”Ëld/", definition: "became less appealing" }, { pronunciation: "/pÃ¦ld/", definition: "covered with a pall" }] },
      { word: "pane", meanings: [{ pronunciation: "/peÉªn/", definition: "window glass" }, { pronunciation: "/pÉ‘Ën/", definition: "bread (French)" }] },
      { word: "pasty", meanings: [{ pronunciation: "/ËˆpeÉªsti/", definition: "pale, unhealthy looking" }, { pronunciation: "/ËˆpÃ¦sti/", definition: "a meat pie" }] },
      { word: "patent", meanings: [{ pronunciation: "/ËˆpÃ¦tÉ™nt/", definition: "exclusive right" }, { pronunciation: "/ËˆpeÉªtÉ™nt/", definition: "obvious; open" }] },
      { word: "peaked", meanings: [{ pronunciation: "/piËkt/", definition: "having a peak" }, { pronunciation: "/ËˆpiËkÉªd/", definition: "sickly looking" }] },
      { word: "perfect", meanings: [{ pronunciation: "/ËˆpÉœËrfÉªkt/", definition: "flawless (adj)" }, { pronunciation: "/pÉ™rËˆfÉ›kt/", definition: "to make perfect (verb)" }] },
      { word: "peritoneal", meanings: [{ pronunciation: "/ËŒpÉ›rÉªtÉ™ËˆniËÉ™l/", definition: "of the peritoneum" }, { pronunciation: "/ËŒpÉ›rÉªËˆtoÊŠniÉ™l/", definition: "relating to tension" }] },
      { word: "pervert", meanings: [{ pronunciation: "/ËˆpÉœËrvÉœËrt/", definition: "deviant (noun)" }, { pronunciation: "/pÉ™rËˆvÉœËrt/", definition: "to corrupt (verb)" }] },
      { word: "pickup", meanings: [{ pronunciation: "/ËˆpÉªkÊŒp/", definition: "truck; act of picking up" }, { pronunciation: "/pÉªkËˆÊŒp/", definition: "to lift; collect" }] },
      { word: "pier", meanings: [{ pronunciation: "/pÉªÉ™r/", definition: "dock structure" }, { pronunciation: "/paÉªÉ™r/", definition: "more pious" }] },
      { word: "pine", meanings: [{ pronunciation: "/paÉªn/", definition: "tree; to yearn" }, { pronunciation: "/piËn/", definition: "tree" }] },
      { word: "pique", meanings: [{ pronunciation: "/piËk/", definition: "to irritate" }, { pronunciation: "/piËËˆkeÉª/", definition: "cotton fabric" }] },
      { word: "plies", meanings: [{ pronunciation: "/plaÉªz/", definition: "layers; works at" }, { pronunciation: "/pliËËˆeÉªz/", definition: "ballet moves" }] },
      { word: "pole", meanings: [{ pronunciation: "/poÊŠl/", definition: "long stick" }, { pronunciation: "/pÉ’l/", definition: "Polish person" }] },
      { word: "polish", meanings: [{ pronunciation: "/ËˆpÉ’lÉªÊƒ/", definition: "to make shiny" }, { pronunciation: "/ËˆpoÊŠlÉªÊƒ/", definition: "from Poland" }] },
      { word: "precipitate", meanings: [{ pronunciation: "/prÉªËˆsÉªpÉªtÉ™t/", definition: "chemical deposit (n)" }, { pronunciation: "/prÉªËˆsÉªpÉªteÉªt/", definition: "to cause suddenly (v)" }] },
      { word: "predicate", meanings: [{ pronunciation: "/ËˆprÉ›dÉªkÉ™t/", definition: "part of sentence (n)" }, { pronunciation: "/ËˆprÉ›dÉªkeÉªt/", definition: "to assert (verb)" }] },
      { word: "premise", meanings: [{ pronunciation: "/ËˆprÉ›mÉªs/", definition: "assumption (noun)" }, { pronunciation: "/prÉªËˆmaÉªz/", definition: "to state beforehand" }] },
      { word: "present", meanings: [{ pronunciation: "/ËˆprÉ›zÉ™nt/", definition: "gift; current time (n)" }, { pronunciation: "/prÉªËˆzÉ›nt/", definition: "to give; show (verb)" }] },
      { word: "primer", meanings: [{ pronunciation: "/ËˆprÉªmÉ™r/", definition: "introductory textbook (BrE)" }, { pronunciation: "/ËˆpraÉªmÉ™r/", definition: "undercoat paint; detonator" }] },
      { word: "proceeds", meanings: [{ pronunciation: "/ËˆproÊŠsiËdz/", definition: "money received (noun)" }, { pronunciation: "/prÉ™ËˆsiËdz/", definition: "continues (verb)" }] },
      { word: "produce", meanings: [{ pronunciation: "/ËˆprÉ’djuËs/", definition: "farm products (noun)" }, { pronunciation: "/prÉ™ËˆdjuËs/", definition: "to make (verb)" }] },
      { word: "project", meanings: [{ pronunciation: "/ËˆprÉ’dÊ’É›kt/", definition: "undertaking (noun)" }, { pronunciation: "/prÉ™ËˆdÊ’É›kt/", definition: "to forecast (verb)" }] },
      { word: "prospect", meanings: [{ pronunciation: "/ËˆprÉ’spÉ›kt/", definition: "possibility (noun)" }, { pronunciation: "/prÉ™ËˆspÉ›kt/", definition: "to search (verb)" }] },
      { word: "pussy", meanings: [{ pronunciation: "/ËˆpÊŠsi/", definition: "cat (informal)" }, { pronunciation: "/ËˆpÊŒsi/", definition: "full of pus" }] },
      { word: "putting", meanings: [{ pronunciation: "/ËˆpÊŠtÉªÅ‹/", definition: "placing (from put)" }, { pronunciation: "/ËˆpÊŒtÉªÅ‹/", definition: "golf stroke (from putt)" }] },
      { word: "reading", meanings: [{ pronunciation: "/ËˆriËdÉªÅ‹/", definition: "looking at text" }, { pronunciation: "/ËˆrÉ›dÉªÅ‹/", definition: "town in England" }] },
      { word: "rebel", meanings: [{ pronunciation: "/ËˆrÉ›bÉ™l/", definition: "insurgent (noun)" }, { pronunciation: "/rÉªËˆbÉ›l/", definition: "to revolt (verb)" }] },
      { word: "recall", meanings: [{ pronunciation: "/ËˆriËkÉ”Ël/", definition: "product withdrawal (n)" }, { pronunciation: "/rÉªËˆkÉ”Ël/", definition: "to remember (verb)" }] },
      { word: "recollect", meanings: [{ pronunciation: "/ËŒrÉ›kÉ™ËˆlÉ›kt/", definition: "to remember" }, { pronunciation: "/ËŒriËkÉ™ËˆlÉ›kt/", definition: "to collect again" }] },
      { word: "record", meanings: [{ pronunciation: "/ËˆrÉ›kÉ”Ërd/", definition: "audio (noun)" }, { pronunciation: "/rÉªËˆkÉ”Ërd/", definition: "to document (verb)" }] },
      { word: "recount", meanings: [{ pronunciation: "/rÉªËˆkaÊŠnt/", definition: "to narrate" }, { pronunciation: "/ËˆriËkaÊŠnt/", definition: "to count again" }] },
      { word: "recover", meanings: [{ pronunciation: "/rÉªËˆkÊŒvÉ™r/", definition: "to get better" }, { pronunciation: "/riËËˆkÊŒvÉ™r/", definition: "to cover again" }] },
      { word: "recreate", meanings: [{ pronunciation: "/ËˆrÉ›krieÉªt/", definition: "to enjoy leisure" }, { pronunciation: "/ËŒriËkriËˆeÉªt/", definition: "to create again" }] },
      { word: "redress", meanings: [{ pronunciation: "/rÉªËˆdrÉ›s/", definition: "to remedy" }, { pronunciation: "/ËˆriËdrÉ›s/", definition: "to dress again" }] },
      { word: "reform", meanings: [{ pronunciation: "/rÉªËˆfÉ”Ërm/", definition: "to improve" }, { pronunciation: "/riËËˆfÉ”Ërm/", definition: "to form again" }] },
      { word: "refuse", meanings: [{ pronunciation: "/rÉªËˆfjuËz/", definition: "to decline" }, { pronunciation: "/ËˆrÉ›fjuËs/", definition: "garbage, waste" }] },
      { word: "reject", meanings: [{ pronunciation: "/ËˆriËdÊ’É›kt/", definition: "discarded item (noun)" }, { pronunciation: "/rÉªËˆdÊ’É›kt/", definition: "to refuse (verb)" }] },
      { word: "relay", meanings: [{ pronunciation: "/ËˆriËleÉª/", definition: "race; switch (noun)" }, { pronunciation: "/rÉªËˆleÉª/", definition: "to pass along (verb)" }] },
      { word: "rent", meanings: [{ pronunciation: "/rÉ›nt/", definition: "to lease" }, { pronunciation: "/rÉ›nt/", definition: "torn (past of rend)" }] },
      { word: "resent", meanings: [{ pronunciation: "/rÉªËˆzÉ›nt/", definition: "to feel bitter about" }, { pronunciation: "/riËËˆsÉ›nt/", definition: "sent again" }] },
      { word: "resign", meanings: [{ pronunciation: "/rÉªËˆzaÉªn/", definition: "to quit" }, { pronunciation: "/riËËˆsaÉªn/", definition: "to sign again" }] },
      { word: "resume", meanings: [{ pronunciation: "/rÉªËˆzjuËm/", definition: "to continue after pause" }, { pronunciation: "/ËˆrÉ›zjÊŠmeÉª/", definition: "CV; work history document" }] },
      { word: "route", meanings: [{ pronunciation: "/ruËt/", definition: "path (noun)" }, { pronunciation: "/raÊŠt/", definition: "to defeat utterly" }] },
      { word: "row", meanings: [{ pronunciation: "/roÊŠ/", definition: "a line; to propel a boat" }, { pronunciation: "/raÊŠ/", definition: "an argument or fight" }] },
      { word: "sake", meanings: [{ pronunciation: "/seÉªk/", definition: "benefit; purpose" }, { pronunciation: "/ËˆsÉ‘ËkeÉª/", definition: "Japanese rice wine" }] },
      { word: "sanction", meanings: [{ pronunciation: "/ËˆsÃ¦Å‹kÊƒÉ™n/", definition: "to approve" }, { pronunciation: "/ËˆsÃ¦Å‹kÊƒÉ™n/", definition: "to penalize" }] },
      { word: "screen", meanings: [{ pronunciation: "/skriËn/", definition: "to show (movie)" }, { pronunciation: "/skriËn/", definition: "to hide from view" }] },
      { word: "secreted", meanings: [{ pronunciation: "/sÉªËˆkriËtÉªd/", definition: "produced (gland)" }, { pronunciation: "/ËˆsiËkrÉªtÉªd/", definition: "hidden away" }] },
      { word: "secretive", meanings: [{ pronunciation: "/sÉªËˆkriËtÉªv/", definition: "producing secretions" }, { pronunciation: "/ËˆsiËkrÉªtÉªv/", definition: "keeping secrets" }] },
      { word: "seed", meanings: [{ pronunciation: "/siËd/", definition: "to plant seeds" }, { pronunciation: "/siËd/", definition: "to remove seeds" }] },
      { word: "segment", meanings: [{ pronunciation: "/ËˆsÉ›É¡mÉ™nt/", definition: "section (noun)" }, { pronunciation: "/sÉ›É¡ËˆmÉ›nt/", definition: "to divide (verb)" }] },
      { word: "separate", meanings: [{ pronunciation: "/ËˆsÉ›pÉ™rÉ™t/", definition: "distinct (adj)" }, { pronunciation: "/ËˆsÉ›pÉ™reÉªt/", definition: "to divide (verb)" }] },
      { word: "sewer", meanings: [{ pronunciation: "/ËˆsuËÉ™r/", definition: "underground drainage pipe" }, { pronunciation: "/ËˆsoÊŠÉ™r/", definition: "one who sews" }] },
      { word: "shower", meanings: [{ pronunciation: "/ËˆÊƒaÊŠÉ™r/", definition: "water spray for bathing" }, { pronunciation: "/ËˆÊƒoÊŠÉ™r/", definition: "one who shows" }] },
      { word: "skied", meanings: [{ pronunciation: "/skiËd/", definition: "traveled on skis" }, { pronunciation: "/skaÉªd/", definition: "hit high in air" }] },
      { word: "slaver", meanings: [{ pronunciation: "/ËˆsleÉªvÉ™r/", definition: "slave trader" }, { pronunciation: "/ËˆslÃ¦vÉ™r/", definition: "to drool" }] },
      { word: "sophisticate", meanings: [{ pronunciation: "/sÉ™ËˆfÉªstÉªkeÉªt/", definition: "to make complex (v)" }, { pronunciation: "/sÉ™ËˆfÉªstÉªkÉ™t/", definition: "sophisticated person (n)" }] },
      { word: "sow", meanings: [{ pronunciation: "/soÊŠ/", definition: "to plant seeds" }, { pronunciation: "/saÊŠ/", definition: "a female pig" }] },
      { word: "stingy", meanings: [{ pronunciation: "/ËˆstÉªndÊ’i/", definition: "unwilling to spend" }, { pronunciation: "/ËˆstÉªÅ‹i/", definition: "able to sting" }] },
      { word: "strike", meanings: [{ pronunciation: "/straÉªk/", definition: "to hit" }, { pronunciation: "/straÉªk/", definition: "to discover (ore)" }] },
      { word: "striped", meanings: [{ pronunciation: "/straÉªpt/", definition: "having stripes (adj)" }, { pronunciation: "/straÉªpd/", definition: "made stripes (past)" }] },
      { word: "subject", meanings: [{ pronunciation: "/ËˆsÊŒbdÊ’Éªkt/", definition: "topic; person (noun)" }, { pronunciation: "/sÉ™bËˆdÊ’É›kt/", definition: "to expose (verb)" }] },
      { word: "supposed", meanings: [{ pronunciation: "/sÉ™ËˆpoÊŠzd/", definition: "assumed (past verb)" }, { pronunciation: "/sÉ™ËˆpoÊŠst/", definition: "expected to (adj)" }] },
      { word: "survey", meanings: [{ pronunciation: "/ËˆsÉœËrveÉª/", definition: "questionnaire (noun)" }, { pronunciation: "/sÉ™rËˆveÉª/", definition: "to examine (verb)" }] },
      { word: "suspect", meanings: [{ pronunciation: "/ËˆsÊŒspÉ›kt/", definition: "person of interest (n)" }, { pronunciation: "/sÉ™ËˆspÉ›kt/", definition: "to doubt (verb)" }] },
      { word: "syndicate", meanings: [{ pronunciation: "/ËˆsÉªndÉªkÉ™t/", definition: "group (noun)" }, { pronunciation: "/ËˆsÉªndÉªkeÉªt/", definition: "to publish (verb)" }] },
      { word: "tangier", meanings: [{ pronunciation: "/ËˆtÃ¦ndÊ’iÉ™r/", definition: "more tangy" }, { pronunciation: "/tÃ¦nËˆdÊ’ÉªÉ™r/", definition: "city in Morocco" }] },
      { word: "tear", meanings: [{ pronunciation: "/tÉ›É™r/", definition: "to rip or pull apart" }, { pronunciation: "/tÉªÉ™r/", definition: "liquid from the eye" }] },
      { word: "temper", meanings: [{ pronunciation: "/ËˆtÉ›mpÉ™r/", definition: "to moderate" }, { pronunciation: "/ËˆtÉ›mpÉ™r/", definition: "anger; mood" }] },
      { word: "thou", meanings: [{ pronunciation: "/Ã°aÊŠ/", definition: "you (archaic)" }, { pronunciation: "/Î¸aÊŠ/", definition: "thousand (slang)" }] },
      { word: "tow", meanings: [{ pronunciation: "/toÊŠ/", definition: "to pull" }, { pronunciation: "/taÊŠ/", definition: "fiber (archaic)" }] },
      { word: "tower", meanings: [{ pronunciation: "/ËˆtaÊŠÉ™r/", definition: "tall structure" }, { pronunciation: "/ËˆtoÊŠÉ™r/", definition: "one who tows" }] },
      { word: "transplant", meanings: [{ pronunciation: "/ËˆtrÃ¦nsplÉ‘Ënt/", definition: "organ replacement (n)" }, { pronunciation: "/trÃ¦nsËˆplÉ‘Ënt/", definition: "to move plant (verb)" }] },
      { word: "trim", meanings: [{ pronunciation: "/trÉªm/", definition: "to cut off" }, { pronunciation: "/trÉªm/", definition: "to add decoration" }] },
      { word: "turnout", meanings: [{ pronunciation: "/ËˆtÉœËrnaÊŠt/", definition: "attendance" }, { pronunciation: "/tÉœËrnËˆaÊŠt/", definition: "a place to turn" }] },
      { word: "unionized", meanings: [{ pronunciation: "/ËˆjuËnjÉ™naÉªzd/", definition: "joined a union" }, { pronunciation: "/ÊŒnËˆaÉªÉ™naÉªzd/", definition: "not ionized (chem)" }] },
      { word: "update", meanings: [{ pronunciation: "/ËˆÊŒpdeÉªt/", definition: "new information (noun)" }, { pronunciation: "/ÊŒpËˆdeÉªt/", definition: "to modernize (verb)" }] },
      { word: "use", meanings: [{ pronunciation: "/juËs/", definition: "purpose (noun)" }, { pronunciation: "/juËz/", definition: "to employ (verb)" }] },
      { word: "ventilate", meanings: [{ pronunciation: "/ËˆvÉ›ntÉªleÉªt/", definition: "to air out (v)" }, { pronunciation: "/ËˆvÉ›ntÉªlÉ™t/", definition: "ventilated (adj)" }] },
      { word: "vice", meanings: [{ pronunciation: "/vaÉªs/", definition: "immoral behavior" }, { pronunciation: "/ËˆvaÉªsi/", definition: "in place of (Latin)" }] },
      { word: "viola", meanings: [{ pronunciation: "/viËˆoÊŠlÉ™/", definition: "stringed instrument" }, { pronunciation: "/ËˆvaÉªÉ™lÉ™/", definition: "a type of flower" }] },
      { word: "violate", meanings: [{ pronunciation: "/ËˆvaÉªÉ™leÉªt/", definition: "to break (v)" }, { pronunciation: "/ËˆvaÉªÉ™lÉ™t/", definition: "violet color (n)" }] },
      { word: "weather", meanings: [{ pronunciation: "/ËˆwÉ›Ã°É™r/", definition: "to endure" }, { pronunciation: "/ËˆwÉ›Ã°É™r/", definition: "to wear away" }] },
      { word: "wicked", meanings: [{ pronunciation: "/ËˆwÉªkÉªd/", definition: "evil (adj)" }, { pronunciation: "/wÉªkt/", definition: "past of wick (verb)" }] },
      { word: "wind", meanings: [{ pronunciation: "/wÉªnd/", definition: "moving air" }, { pronunciation: "/waÉªnd/", definition: "to turn or coil" }] },
      { word: "winged", meanings: [{ pronunciation: "/wÉªÅ‹d/", definition: "having wings (adj)" }, { pronunciation: "/ËˆwÉªÅ‹Éªd/", definition: "flew quickly (past)" }] },
      { word: "won", meanings: [{ pronunciation: "/wÊŒn/", definition: "was victorious" }, { pronunciation: "/wÉ’n/", definition: "Korean currency" }] },
      { word: "workout", meanings: [{ pronunciation: "/ËˆwÉœËrkaÊŠt/", definition: "exercise session" }, { pronunciation: "/wÉœËrkËˆaÊŠt/", definition: "to exercise; solve" }] },
      { word: "wound", meanings: [{ pronunciation: "/wuËnd/", definition: "an injury" }, { pronunciation: "/waÊŠnd/", definition: "past tense of wind (coil)" }] }
    ];

    const CATEGORIES = ["heteronyms", "other"];

    const CATEGORY_LABELS = {
      "heteronyms": "Heteronyms",
      "other": "Other categories"
    };

    // ==================== GAME STATE ====================
    let gameState = {
      players: [],
      settings: {
        imposterCount: 1,
        category: "heteronyms"
      },
      gameMode: "NORMAL",
      secretWord: null,
      allWords: [],
      currentPlayerIndex: 0,
      phase: "setup",
      chosenImposters: [], // Array for multiple selections
      winner: null
    };

    let debugMode = "RANDOM";
    let debugSequence = "";

    // ==================== WORD ORDER MANAGEMENT ====================
    function getWordOrder() {
      try {
        const saved = localStorage.getItem('hetro-imposter-word-order');
        if (saved) {
          return JSON.parse(saved);
        }
      } catch (e) {
        console.warn('Could not load word order:', e);
      }
      return null;
    }

    function saveWordOrder(order) {
      try {
        localStorage.setItem('hetro-imposter-word-order', JSON.stringify(order));
      } catch (e) {
        console.warn('Could not save word order:', e);
      }
    }

    function initWordOrder() {
      let order = getWordOrder();
      if (!order || !order.indices || order.indices.length !== HETERONYMS.length) {
        // First run or word list changed - create new shuffled order
        order = {
          indices: shuffleArray([...Array(HETERONYMS.length).keys()]),
          currentIndex: 0
        };
        saveWordOrder(order);
      }
      return order;
    }

    function getNextWord() {
      let order = initWordOrder();
      
      // Get the word at current position
      const wordIndex = order.indices[order.currentIndex];
      const word = HETERONYMS[wordIndex];
      
      // Advance to next position
      order.currentIndex++;
      
      // If we've used all words, reshuffle and start over
      if (order.currentIndex >= order.indices.length) {
        order.indices = shuffleArray([...Array(HETERONYMS.length).keys()]);
        order.currentIndex = 0;
      }
      
      saveWordOrder(order);
      return word;
    }

    // ==================== INITIALIZATION ====================
    function init() {
      loadState();
      setupDebugListener();
      setupHoldToReveal();
      renderCategoryPills();
      updatePlayerCount();
    }

    function setupDebugListener() {
      document.addEventListener('keydown', (e) => {
        debugSequence += e.key.toLowerCase();
        if (debugSequence.length > 3) {
          debugSequence = debugSequence.slice(-3);
        }
        if (debugSequence === 'qwe') {
          document.getElementById('debug-panel').classList.toggle('show');
          debugSequence = "";
        }
      });
    }

    function setupHoldToReveal() {
      const wrapper = document.getElementById('hold-reveal-wrapper');
      
      const startHold = (e) => {
        e.preventDefault();
        wrapper.classList.add('holding');
      };
      
      const endHold = (e) => {
        wrapper.classList.remove('holding');
      };
      
      wrapper.addEventListener('touchstart', startHold, { passive: false });
      wrapper.addEventListener('touchend', endHold);
      wrapper.addEventListener('touchcancel', endHold);
      
      wrapper.addEventListener('mousedown', startHold);
      wrapper.addEventListener('mouseup', endHold);
      wrapper.addEventListener('mouseleave', endHold);
      
      document.addEventListener('mouseup', endHold);
      
      wrapper.addEventListener('contextmenu', (e) => e.preventDefault());
    }

    function setDebugMode(mode) {
      debugMode = mode;
      document.querySelectorAll('.debug-mode-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.mode === mode);
      });
    }

    // ==================== CANCEL GAME FUNCTIONS ====================
    function showCancelConfirm(screen) {
      document.getElementById(`cancel-confirm-${screen}`).classList.add('show');
    }

    function hideCancelConfirm(screen) {
      document.getElementById(`cancel-confirm-${screen}`).classList.remove('show');
    }

    function cancelGame() {
      hideCancelConfirm('pass');
      hideCancelConfirm('role');
      
      gameState.players = [];
      gameState.secretWord = null;
      gameState.allWords = [];
      gameState.currentPlayerIndex = 0;
      gameState.chosenImposters = [];
      gameState.winner = null;
      
      showScreen('setup');
    }

    // ==================== STATE MANAGEMENT ====================
    function saveState() {
      try {
        localStorage.setItem('hetro-imposter-state', JSON.stringify(gameState));
      } catch (e) {
        console.warn('Could not save state:', e);
      }
    }

    function loadState() {
      try {
        const saved = localStorage.getItem('hetro-imposter-state');
        if (saved) {
          const parsed = JSON.parse(saved);
          if (parsed.settings) {
            gameState.settings = parsed.settings;
          }
        }
      } catch (e) {
        console.warn('Could not load state:', e);
      }
    }

    // ==================== SCREEN NAVIGATION ====================
    function showScreen(screenId) {
      document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
      document.getElementById(`screen-${screenId}`).classList.add('active');
      gameState.phase = screenId;
      saveState();
    }

    // ==================== SETUP SCREEN ====================
    function getMaxImposters(playerCount) {
      if (playerCount >= 13) return 3;
      if (playerCount >= 9) return 2;
      return 1;
    }

    function updateImposterOptions(playerCount) {
      const maxImposters = getMaxImposters(playerCount);
      const container = document.getElementById('imposter-options');
      const hint = document.getElementById('imposter-hint');
      
      let html = '';
      for (let i = 1; i <= 3; i++) {
        const disabled = i > maxImposters ? 'disabled' : '';
        const selected = i === gameState.settings.imposterCount && i <= maxImposters ? 'selected' : '';
        html += `<button class="option-btn ${selected}" data-imposters="${i}" onclick="selectImposters(${i})" ${disabled}>${i}</button>`;
      }
      container.innerHTML = html;
      
      // Adjust selected count if it exceeds max
      if (gameState.settings.imposterCount > maxImposters) {
        gameState.settings.imposterCount = maxImposters;
        updateImposterOptions(playerCount); // Re-render with corrected selection
      }
      
      // Update hint
      if (maxImposters === 1) {
        hint.textContent = '9+ players unlocks 2 imposters, 13+ unlocks 3.';
      } else if (maxImposters === 2) {
        hint.textContent = '13+ players unlocks 3 imposters.';
      } else {
        hint.textContent = 'All imposter options unlocked.';
      }
    }

    function updatePlayerCount() {
      const textarea = document.getElementById('players-textarea');
      const names = parsePlayerNames(textarea.value);
      const count = names.length;
      
      const badge = document.getElementById('player-count-badge');
      badge.textContent = `${count} player${count !== 1 ? 's' : ''}`;
      
      const startBtn = document.getElementById('btn-start');
      startBtn.disabled = count < 3;
      
      if (count < 3 && count > 0) {
        badge.style.background = 'var(--imposter-glow)';
      } else if (count >= 3) {
        badge.style.background = 'var(--civilian-glow)';
      } else {
        badge.style.background = 'var(--accent)';
      }
      
      updateImposterOptions(count);
    }

    function parsePlayerNames(text) {
      return text
        .split('\n')
        .map(name => name.trim())
        .filter(name => name.length > 0)
        .slice(0, 20);
    }

    function selectImposters(count) {
      const playerCount = parsePlayerNames(document.getElementById('players-textarea').value).length;
      const maxImposters = getMaxImposters(playerCount);
      
      if (count > maxImposters) return;
      
      gameState.settings.imposterCount = count;
      document.querySelectorAll('[data-imposters]').forEach(btn => {
        btn.classList.toggle('selected', parseInt(btn.dataset.imposters) === count);
      });
      saveState();
    }

    function renderCategoryPills() {
      const container = document.getElementById('category-pills');
      container.innerHTML = CATEGORIES.map(cat => {
        const isDisabled = cat === 'other';
        const isSelected = cat === gameState.settings.category && !isDisabled;
        const label = CATEGORY_LABELS[cat] || cat;
        return `
          <button class="category-pill ${isSelected ? 'selected' : ''}" 
                  data-category="${cat}"
                  onclick="selectCategory('${cat}')"
                  ${isDisabled ? 'disabled style="opacity: 0.4; cursor: not-allowed;"' : ''}>
            ${label}
          </button>
        `;
      }).join('');
      
      // Ensure heteronyms is selected by default
      if (gameState.settings.category === 'all' || gameState.settings.category === 'other') {
        gameState.settings.category = 'heteronyms';
        renderCategoryPills();
      }
    }

    function selectCategory(category) {
      if (category === 'other') return; // Disabled category
      
      gameState.settings.category = category;
      document.querySelectorAll('.category-pill').forEach(pill => {
        pill.classList.toggle('selected', pill.dataset.category === category);
      });
      saveState();
    }

    // ==================== GAME LOGIC ====================
    function startGame() {
      const textarea = document.getElementById('players-textarea');
      const names = parsePlayerNames(textarea.value);
      
      if (names.length < 3) return;
      
      gameState.players = names.map((name, i) => ({
        id: i,
        name: name,
        role: null,
        word: null,
        hasViewed: false
      }));
      
      gameState.gameMode = selectGameMode();
      
      // Get next word from shuffled order
      const selectedWord = getNextWord();
      
      switch (gameState.gameMode) {
        case "ALL_IMPOSTERS":
          gameState.secretWord = selectedWord;
          gameState.allWords = [gameState.secretWord];
          gameState.players.forEach(p => {
            p.role = "imposter";
            p.word = null;
          });
          break;
          
        case "ALL_DIFFERENT":
          // For ALL_DIFFERENT mode, we need multiple different words
          gameState.allWords = [selectedWord];
          for (let i = 1; i < gameState.players.length; i++) {
            gameState.allWords.push(getNextWord());
          }
          gameState.secretWord = gameState.allWords[0];
          gameState.players.forEach((p, i) => {
            p.role = "civilian";
            p.word = gameState.allWords[i];
          });
          break;
          
        case "NO_IMPOSTER":
          gameState.secretWord = selectedWord;
          gameState.allWords = [gameState.secretWord];
          gameState.players.forEach(p => {
            p.role = "civilian";
            p.word = gameState.secretWord;
          });
          break;
          
        default:
          gameState.secretWord = selectedWord;
          gameState.allWords = [gameState.secretWord];
          
          const imposterIndices = shuffleArray(
            [...Array(gameState.players.length).keys()]
          ).slice(0, gameState.settings.imposterCount);
          
          gameState.players.forEach((p, i) => {
            if (imposterIndices.includes(i)) {
              p.role = "imposter";
              p.word = null;
            } else {
              p.role = "civilian";
              p.word = gameState.secretWord;
            }
          });
          break;
      }
      
      gameState.currentPlayerIndex = 0;
      gameState.chosenImposters = [];
      gameState.winner = null;
      
      saveState();
      showPassDevice();
    }

    function selectGameMode() {
      if (debugMode !== "RANDOM") {
        return debugMode;
      }
      
      const roll = Math.random();
      if (roll < 0.10) return "ALL_IMPOSTERS";
      if (roll < 0.20) return "ALL_DIFFERENT";
      if (roll < 0.30) return "NO_IMPOSTER";
      return "NORMAL";
    }

    // ==================== ROLE REVEAL ====================
    function renderProgressDots(containerId) {
      const container = document.getElementById(containerId);
      container.innerHTML = gameState.players.map((p, i) => {
        let cls = 'progress-dot';
        if (i < gameState.currentPlayerIndex) cls += ' done';
        else if (i === gameState.currentPlayerIndex) cls += ' active';
        return `<div class="${cls}"></div>`;
      }).join('');
    }

    function showPassDevice() {
      const player = gameState.players[gameState.currentPlayerIndex];
      document.getElementById('pass-player-name').textContent = player.name;
      renderProgressDots('progress-dots');
      hideCancelConfirm('pass');
      showScreen('pass');
    }

    function showRoleScreen() {
      const player = gameState.players[gameState.currentPlayerIndex];
      
      document.getElementById('hold-reveal-wrapper').classList.remove('holding');
      
      document.getElementById('role-player-label').textContent = player.name;
      
      const roleBadge = document.getElementById('role-badge');
      const roleWord = document.getElementById('role-word');
      const wordContainer = document.getElementById('role-word-container');
      const imposterContainer = document.getElementById('role-imposter-container');
      
      if (player.role === "civilian") {
        roleBadge.textContent = "CIVILIAN";
        roleBadge.className = "role-badge civilian";
        wordContainer.style.display = "block";
        imposterContainer.style.display = "none";
        roleWord.textContent = player.word.word.toUpperCase();
      } else {
        roleBadge.textContent = "IMPOSTER";
        roleBadge.className = "role-badge imposter";
        wordContainer.style.display = "none";
        imposterContainer.style.display = "block";
      }
      
      renderProgressDots('progress-dots-role');
      hideCancelConfirm('role');
      showScreen('role');
    }

    function nextPlayer() {
      gameState.players[gameState.currentPlayerIndex].hasViewed = true;
      gameState.currentPlayerIndex++;
      
      if (gameState.currentPlayerIndex >= gameState.players.length) {
        document.getElementById('starting-player').textContent = gameState.players[0].name;
        showScreen('discussion');
      } else {
        showPassDevice();
      }
      saveState();
    }

    // ==================== CONFIRMATION ====================
    function showConfirmation() {
      const imposterCount = gameState.settings.imposterCount;
      gameState.chosenImposters = [];
      
      // Update instruction text
      const instruction = document.getElementById('confirm-instruction');
      if (imposterCount === 1) {
        instruction.textContent = 'Select who the group decided is the imposter:';
      } else {
        instruction.textContent = `Select the ${imposterCount} players the group decided are imposters:`;
      }
      
      // Render player options
      const container = document.getElementById('confirm-options');
      container.innerHTML = gameState.players.map(p => `
        <div class="confirm-option" data-player-id="${p.id}" onclick="toggleConfirmation(${p.id})">
          <span class="player-name">${escapeHtml(p.name)}</span>
        </div>
      `).join('');
      
      updateSelectionCounter();
      showScreen('confirm');
    }

    function toggleConfirmation(playerId) {
      const imposterCount = gameState.settings.imposterCount;
      const index = gameState.chosenImposters.indexOf(playerId);
      
      if (index > -1) {
        // Deselect
        gameState.chosenImposters.splice(index, 1);
      } else {
        // Select (if not at max)
        if (gameState.chosenImposters.length < imposterCount) {
          gameState.chosenImposters.push(playerId);
        } else if (imposterCount === 1) {
          // For single selection, replace
          gameState.chosenImposters = [playerId];
        }
      }
      
      // Update visual selection
      document.querySelectorAll('.confirm-option').forEach(opt => {
        const id = parseInt(opt.dataset.playerId);
        opt.classList.toggle('selected', gameState.chosenImposters.includes(id));
      });
      
      updateSelectionCounter();
    }

    function updateSelectionCounter() {
      const imposterCount = gameState.settings.imposterCount;
      const selected = gameState.chosenImposters.length;
      const counter = document.getElementById('selection-counter');
      const btn = document.getElementById('btn-reveal');
      
      if (selected === imposterCount) {
        counter.textContent = `${selected} of ${imposterCount} selected`;
        counter.classList.add('complete');
        btn.disabled = false;
      } else {
        counter.textContent = `Select ${imposterCount - selected} more player${imposterCount - selected !== 1 ? 's' : ''}`;
        counter.classList.remove('complete');
        btn.disabled = true;
      }
    }

    // ==================== RESULTS ====================
    function revealResults() {
      const chosenPlayers = gameState.chosenImposters.map(id => 
        gameState.players.find(p => p.id === id)
      );
      const actualImposters = gameState.players.filter(p => p.role === "imposter");
      
      // Count correct guesses
      const correctGuesses = chosenPlayers.filter(p => p.role === "imposter").length;
      const totalImposters = actualImposters.length;
      
      // Show chosen players
      document.getElementById('result-chosen-names').innerHTML = chosenPlayers.map(p => 
        `<div class="result-name">${escapeHtml(p.name)}</div>`
      ).join('');
      
      // Show their actual roles
      const resultReveal = document.getElementById('result-reveal');
      const resultRoles = document.getElementById('result-roles');
      
      resultRoles.innerHTML = chosenPlayers.map(p => {
        if (p.role === "imposter") {
          return `<div class="role-badge imposter">IMPOSTER</div>`;
        } else {
          return `<div class="role-badge civilian">CIVILIAN</div>`;
        }
      }).join('');
      
      // Determine result styling
      if (correctGuesses === chosenPlayers.length && correctGuesses > 0) {
        resultReveal.className = "result-reveal correct";
      } else if (correctGuesses === 0) {
        resultReveal.className = "result-reveal wrong";
      } else {
        resultReveal.className = "result-reveal partial";
      }
      
      // Determine winner and show message
      const winnerIcon = document.getElementById('winner-icon');
      const winnerText = document.getElementById('winner-text');
      const impostersSection = document.getElementById('actual-imposters-section');
      const impostersList = document.getElementById('actual-imposters-list');
      
      if (gameState.gameMode === "ALL_IMPOSTERS") {
        winnerIcon.textContent = "ğŸŒ€";
        winnerText.textContent = "Everyone was an Imposter";
        winnerText.className = "winner-text text-warning";
        impostersSection.style.display = "none";
      } else if (gameState.gameMode === "NO_IMPOSTER") {
        winnerIcon.textContent = "ğŸ˜±";
        winnerText.textContent = "There was no Imposter";
        winnerText.className = "winner-text text-warning";
        impostersSection.style.display = "none";
      } else if (gameState.gameMode === "ALL_DIFFERENT") {
        winnerIcon.textContent = "ğŸ­";
        winnerText.textContent = "Everyone had different words";
        winnerText.className = "winner-text text-warning";
        impostersSection.style.display = "none";
      } else if (correctGuesses > 0) {
        winnerIcon.textContent = "ğŸ‰";
        if (correctGuesses === totalImposters) {
          winnerText.textContent = "Civilians Win";
        } else {
          winnerText.textContent = `Civilians found ${correctGuesses} of ${totalImposters}`;
        }
        winnerText.className = "winner-text text-success";
        
        // Show remaining imposters if not all caught
        if (correctGuesses < totalImposters) {
          const remainingImposters = actualImposters.filter(p => !gameState.chosenImposters.includes(p.id));
          impostersSection.style.display = "block";
          impostersList.innerHTML = remainingImposters.map(p => `
            <div class="imposter-item">${escapeHtml(p.name)}</div>
          `).join('');
        } else {
          impostersSection.style.display = "none";
        }
      } else {
        winnerIcon.textContent = "ğŸ˜ˆ";
        winnerText.textContent = totalImposters > 1 ? "Imposters Win" : "Imposter Wins";
        winnerText.className = "winner-text text-danger";
        
        impostersSection.style.display = "block";
        impostersList.innerHTML = actualImposters.map(p => `
          <div class="imposter-item">${escapeHtml(p.name)}</div>
        `).join('');
      }
      
      showScreen('results');
    }

    // ==================== SUMMARY ====================
    function showSummary() {
      document.getElementById('summary-word').textContent = 
        gameState.secretWord.word.toUpperCase();
      
      const meaningsContainer = document.getElementById('summary-meanings');
      meaningsContainer.innerHTML = gameState.secretWord.meanings.map(m => `
        <div class="meaning-item">
          <div class="meaning-text">
            <span class="pronunciation">${m.pronunciation}</span>
            <p>${m.definition}</p>
          </div>
        </div>
      `).join('');
      
      const allWordsContainer = document.getElementById('summary-all-words');
      const allWordsList = document.getElementById('all-words-list');
      
      if (gameState.gameMode === "ALL_DIFFERENT") {
        allWordsContainer.style.display = "block";
        allWordsList.innerHTML = gameState.players.map((p, i) => `
          <div class="all-words-item">
            <span>${escapeHtml(p.name)}</span>
            <span class="text-warning">${gameState.allWords[i].word.toUpperCase()}</span>
          </div>
        `).join('');
      } else {
        allWordsContainer.style.display = "none";
      }
      
      const twistReveal = document.getElementById('twist-reveal');
      const twistText = document.getElementById('twist-text');
      
      if (gameState.gameMode !== "NORMAL") {
        twistReveal.style.display = "block";
        switch (gameState.gameMode) {
          case "ALL_IMPOSTERS":
            twistText.textContent = "Everyone was an imposter. No one actually knew the word.";
            break;
          case "ALL_DIFFERENT":
            twistText.textContent = "Every player had a completely different word.";
            break;
          case "NO_IMPOSTER":
            twistText.textContent = "There was no imposter. Everyone had the same word but you accused an innocent civilian.";
            break;
        }
      } else {
        twistReveal.style.display = "none";
      }
      
      showScreen('summary');
    }

    // ==================== PLAY AGAIN ====================
    function playAgain() {
      gameState.players.forEach(p => {
        p.role = null;
        p.word = null;
        p.hasViewed = false;
      });
      gameState.currentPlayerIndex = 0;
      gameState.chosenImposters = [];
      gameState.winner = null;
      saveState();
      startGame();
    }

    function newPlayers() {
      gameState.players = [];
      document.getElementById('players-textarea').value = '';
      updatePlayerCount();
      showScreen('setup');
    }

    // ==================== UTILITIES ====================
    function shuffleArray(array) {
      const arr = [...array];
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    function randomChoice(array) {
      return array[Math.floor(Math.random() * array.length)];
    }

    function escapeHtml(str) {
      const div = document.createElement('div');
      div.textContent = str;
      return div.innerHTML;
    }

    // ==================== INIT ====================
    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>
